(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["tracks"],{"0580":function(t,e){var a=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'],i=a.join(","),r="undefined"===typeof Element?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;function n(t,e){e=e||{};var a,n,o,l=[],c=[],u=t.querySelectorAll(i);for(e.includeContainer&&r.call(t,i)&&(u=Array.prototype.slice.apply(u),u.unshift(t)),a=0;a<u.length;a++)n=u[a],s(n)&&(o=d(n),0===o?l.push(n):c.push({documentOrder:a,tabIndex:o,node:n}));var h=c.sort(p).map((function(t){return t.node})).concat(l);return h}function s(t){return!(!l(t)||m(t)||d(t)<0)}function o(t){if(!t)throw new Error("No node provided");return!1!==r.call(t,i)&&s(t)}function l(t){return!(t.disabled||b(t)||_(t))}n.isTabbable=o,n.isFocusable=u;var c=a.concat("iframe").join(",");function u(t){if(!t)throw new Error("No node provided");return!1!==r.call(t,c)&&l(t)}function d(t){var e=parseInt(t.getAttribute("tabindex"),10);return isNaN(e)?h(t)?0:t.tabIndex:e}function p(t,e){return t.tabIndex===e.tabIndex?t.documentOrder-e.documentOrder:t.tabIndex-e.tabIndex}function h(t){return"true"===t.contentEditable}function f(t){return"INPUT"===t.tagName}function b(t){return f(t)&&"hidden"===t.type}function v(t){return f(t)&&"radio"===t.type}function m(t){return v(t)&&!y(t)}function g(t){for(var e=0;e<t.length;e++)if(t[e].checked)return t[e]}function y(t){if(!t.name)return!0;var e=t.ownerDocument.querySelectorAll('input[type="radio"][name="'+t.name+'"]'),a=g(e);return!a||a===t}function _(t){return null===t.offsetParent||"hidden"===getComputedStyle(t).visibility}t.exports=n},"06cd":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper"},[this.$slots.title?a("h3",{staticClass:"ui header"},[t._t("title")],2):t._e(),!t.isLoading&&t.libraries.length>0?a("p",{staticClass:"ui subtitle"},[t._t("subtitle")],2):t._e(),t.isLoading||0!==t.libraries.length?t._e():a("p",{staticClass:"ui subtitle"},[a("translate",{attrs:{"translate-context":"Content/Federation/Paragraph"}},[t._v("No matching library.")])],1),a("div",{staticClass:"ui hidden divider"}),a("div",{staticClass:"ui cards"},[t.isLoading?a("div",{staticClass:"ui inverted active dimmer"},[a("div",{staticClass:"ui loader"})]):t._e(),t._l(t.libraries,(function(e){return a("library-card",{key:e.uuid,attrs:{"display-scan":!1,"display-follow":t.$store.state.auth.authenticated&&e.actor.full_username!=t.$store.state.auth.fullUsername,library:e,"display-copy-fid":!0}})}))],2),t.nextPage?[a("div",{staticClass:"ui hidden divider"}),t.nextPage?a("button",{class:["ui","basic","button"],on:{click:function(e){return t.fetchData(t.nextPage)}}},[a("translate",{attrs:{"translate-context":"*/*/Button,Label"}},[t._v("Show more")])],1):t._e()]:t._e()],2)},r=[],n=(a("99af"),a("2909")),s=a("ceb5"),o=a("bc3a"),l=a.n(o),c=a("c395"),u={props:{url:{type:String,required:!0}},components:{LibraryCard:c["a"]},data:function(){return{libraries:[],limit:6,isLoading:!1,errors:null,previousPage:null,nextPage:null}},created:function(){this.fetchData(this.url)},methods:{fetchData:function(t){this.isLoading=!0;var e=this,a=s["a"].clone({});a.page_size=this.limit,a.offset=this.offset,l.a.get(t,{params:a}).then((function(t){e.previousPage=t.data.previous,e.nextPage=t.data.next,e.isLoading=!1,e.libraries=[].concat(Object(n["a"])(e.libraries),Object(n["a"])(t.data.results)),e.$emit("loaded",e.libraries)}),(function(t){e.isLoading=!1,e.errors=t.backendErrors}))},updateOffset:function(t){t?this.offset+=this.limit:this.offset=Math.max(this.offset-this.limit,0)}},watch:{offset:function(){this.fetchData()}}},d=u,p=a("2877"),h=Object(p["a"])(d,i,r,!1,null,null,null);e["a"]=h.exports},"21a2":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.anonymousCanListen?t._e():a("div",{staticClass:"ui warning message",attrs:{role:"alert"}},[a("p",[a("strong",[a("translate",{attrs:{"translate-context":"Content/Embed/Message"}},[t._v("Sharing will not work because this pod doesn't allow anonymous users to access content.")])],1)]),a("p",[a("translate",{attrs:{"translate-context":"Content/Embed/Message"}},[t._v("Please contact your admins and ask them to update the corresponding setting.")])],1)]),a("div",{staticClass:"ui form"},[a("div",{staticClass:"two fields"},[a("div",{staticClass:"field"},[a("div",{staticClass:"field"},[a("label",{attrs:{for:"embed-width"}},[a("translate",{attrs:{"translate-context":"Popup/Embed/Input.Label"}},[t._v("Widget width")])],1),a("p",[a("translate",{attrs:{"translate-context":"Popup/Embed/Paragraph"}},[t._v("Leave empty for a responsive widget")])],1),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.width,expression:"width",modifiers:{number:!0}}],attrs:{id:"embed-width",type:"number",min:"0",step:"10"},domProps:{value:t.width},on:{input:function(e){e.target.composing||(t.width=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),"track"!=t.type?[a("br"),a("div",{staticClass:"field"},[a("label",{attrs:{for:"embed-height"}},[a("translate",{attrs:{"translate-context":"Popup/Embed/Input.Label"}},[t._v("Widget height")])],1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.height,expression:"height"}],attrs:{id:"embed-height",type:"number",min:t.minHeight,max:"1000",step:"10"},domProps:{value:t.height},on:{input:function(e){e.target.composing||(t.height=e.target.value)}}})])]:t._e()],2),a("div",{staticClass:"field"},[a("button",{staticClass:"ui right accent labeled icon floated button",on:{click:t.copy}},[a("i",{staticClass:"copy icon"}),a("translate",{attrs:{"translate-context":"*/*/Button.Label/Short, Verb"}},[t._v("Copy")])],1),a("label",{attrs:{for:"embed-width"}},[a("translate",{attrs:{"translate-context":"Popup/Embed/Input.Label/Noun"}},[t._v("Embed code")])],1),a("p",[a("translate",{attrs:{"translate-context":"Popup/Embed/Paragraph"}},[t._v("Copy/paste this code in your website HTML")])],1),a("textarea",{ref:"textarea",attrs:{rows:"5",readonly:""},domProps:{value:t.embedCode}}),a("div",{staticClass:"ui right"},[t.copied?a("p",{staticClass:"message"},[a("translate",{attrs:{"translate-context":"Content/*/Paragraph"}},[t._v("Text copied to clipboard!")])],1):t._e()])])])]),a("div",{staticClass:"preview"},[a("h3",[a("a",{attrs:{href:t.iframeSrc,target:"_blank"}},[a("translate",{attrs:{"translate-context":"Popup/Embed/Title/Noun"}},[t._v("Preview")])],1)]),a("iframe",{attrs:{width:t.frameWidth,height:t.height,scrolling:"no",frameborder:"no",src:t.iframeSrc}})])])},r=[],n=(a("99af"),a("ac1f"),a("5319"),a("2ca0"),a("5530")),s=a("2f62"),o=a("ceb5"),l={props:["type","id"],data:function(){var t={width:null,height:150,minHeight:100,copied:!1};return"album"!==this.type&&"artist"!==this.type&&"playlist"!==this.type||(t.height=330,t.minHeight=250),t},computed:Object(n["a"])(Object(n["a"])({},Object(s["d"])({nodeinfo:function(t){return t.instance.nodeinfo}})),{},{anonymousCanListen:function(){return o["a"].get(this.nodeinfo,"metadata.library.anonymousCanListen",!1)},iframeSrc:function(){var t="/front/";t.startsWith("/")&&(t="".concat(window.location.protocol,"//").concat(window.location.host).concat(t));var e=this.$store.state.instance.instanceUrl,a="";return window.location.href.startsWith(e)||(a="&b=".concat(e)),"".concat(t,"embed.html?&type=").concat(this.type,"&id=").concat(this.id).concat(a)},frameWidth:function(){return this.width?this.width:"100%"},embedCode:function(){var t=this.iframeSrc.replace(/&/g,"&amp;");return'<iframe width="'.concat(this.frameWidth,'" height="').concat(this.height,'" scrolling="no" frameborder="no" src="').concat(t,'"></iframe>')}}),methods:{copy:function(){this.$refs.textarea.select(),document.execCommand("Copy");var t=this;t.copied=!0,this.timeout=setTimeout((function(){t.copied=!1}),5e3)}}},c=l,u=a("2877"),d=Object(u["a"])(c,i,r,!1,null,null,null);e["a"]=d.exports},2696:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui app-card card"},[a("div",{class:["ui","head-image","squares"],on:{click:function(e){return t.$router.push({name:"library.playlists.detail",params:{id:t.playlist.id}})}}},[t._l(t.images,(function(t,e){return a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"url"}],key:e,attrs:{alt:""}})})),a("play-button",{attrs:{"icon-only":!0,"is-playable":t.playlist.is_playable,"button-classes":["ui","circular","large","vibrant","icon","button"],playlist:t.playlist}})],2),a("div",{staticClass:"content"},[a("strong",[a("router-link",{staticClass:"discrete link",attrs:{to:{name:"library.playlists.detail",params:{id:t.playlist.id}}}},[t._v(" "+t._s(t.playlist.name)+" ")])],1),a("div",{staticClass:"description"},[a("user-link",{staticClass:"left floated",attrs:{user:t.playlist.user,avatar:!1}})],1)]),a("div",{staticClass:"extra content"},[a("translate",{attrs:{"translate-context":"*/*/*","translate-params":{count:t.playlist.tracks_count},"translate-n":t.playlist.tracks_count,"translate-plural":"%{ count } tracks"}},[t._v("%{ count } track")]),a("play-button",{staticClass:"right floated basic icon",attrs:{"dropdown-only":!0,"is-playable":t.playlist.is_playable,"dropdown-icon-classes":["ellipsis","horizontal","large really discrete"],playlist:t.playlist}})],1)])},r=[],n=(a("d81d"),a("fb6a"),a("a3e6")),s={props:["playlist"],components:{PlayButton:n["a"]},computed:{images:function(){var t=this,e=this.playlist.album_covers.map((function(e){return t.$store.getters["instance/absoluteUrl"](e)})).slice(0,4);while(e.length<4)e.push(a("271e"));return e}}},o=s,l=a("2877"),c=Object(l["a"])(o,i,r,!1,null,null,null);e["a"]=c.exports},"271e":function(t,e,a){t.exports=a.p+"img/default-cover.89d13c2f.png"},"404d":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:["ui",{active:t.show},{"overlay fullscreen":t.fullscreen&&["phone","tablet"].indexOf(t.$store.getters["ui/windowSize"])>-1},"modal"]},[a("i",{staticClass:"close inside icon"}),t.show?t._t("default"):t._e()],2)},r=[],n=a("1157"),s=a.n(n),o=a("6c92"),l=a.n(o),c={props:{show:{type:Boolean,required:!0},fullscreen:{type:Boolean,default:!0}},data:function(){return{control:null,focusTrap:null}},mounted:function(){this.focusTrap=l()(this.$el)},beforeDestroy:function(){this.control&&s()(this.$el).modal("hide"),s()(this.$el).remove()},methods:{initModal:function(){this.control=s()(this.$el).modal({duration:100,onApprove:function(){this.$emit("approved")}.bind(this),onDeny:function(){this.$emit("deny")}.bind(this),onHidden:function(){this.$emit("update:show",!1)}.bind(this),onVisible:function(){this.focusTrap.activate(),this.focusTrap.unpause()}.bind(this)})}},watch:{show:{handler:function(t){t?(this.initModal(),this.$emit("show"),this.control.modal("show"),this.focusTrap.activate(),this.focusTrap.unpause()):this.control&&(this.$emit("hide"),this.control.modal("hide"),this.control.remove(),this.focusTrap.deactivate(),this.focusTrap.pause())}}}},u=c,d=a("2877"),p=Object(d["a"])(u,i,r,!1,null,null,null);e["default"]=p.exports},4389:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.button?a("button",{class:["ui","pink",{inverted:t.isFavorite},{favorited:t.isFavorite},"icon","labeled","button"],on:{click:function(e){return e.stopPropagation(),t.$store.dispatch("favorites/toggle",t.track.id)}}},[a("i",{staticClass:"heart icon"}),t.isFavorite?a("translate",{attrs:{"translate-context":"Content/Track/Button.Message"}},[t._v("In favorites")]):a("translate",{attrs:{"translate-context":"Content/Track/*/Verb"}},[t._v("Add to favorites")])],1):a("button",{class:["ui","favorite-icon",{pink:t.isFavorite},{favorited:t.isFavorite},"basic","circular","icon",{really:!t.border},"button"],attrs:{"aria-label":t.title,title:t.title},on:{click:function(e){return e.stopPropagation(),t.$store.dispatch("favorites/toggle",t.track.id)}}},[a("i",{class:["heart",{pink:t.isFavorite},"basic","icon"]})])},r=[],n={props:{track:{type:Object},button:{type:Boolean,default:!1},border:{type:Boolean,default:!1}},computed:{title:function(){return this.isFavorite?this.$pgettext("Content/Track/Icon.Tooltip/Verb","Remove from favorites"):this.$pgettext("Content/Track/*/Verb","Add to favorites")},isFavorite:function(){return this.$store.getters["favorites/isFavorite"](this.track.id)}}},s=n,o=a("2877"),l=Object(o["a"])(s,i,r,!1,null,null,null);e["default"]=l.exports},"4b90":function(t,e,a){"use strict";a("c975"),a("4d63"),a("ac1f"),a("25f0"),a("466d"),a("5319");e["a"]={updateQueryString:function(t,e,a){var i=new RegExp("([?&])"+e+"=.*?(&|$)","i"),r=-1!==t.indexOf("?")?"&":"?";return t.match(i)?t.replace(i,"$1"+e+"="+a+"$2"):t+r+e+"="+a}}},"4c04":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.button?a("button",{class:["ui","icon","labeled","button"],on:{click:function(e){return e.stopPropagation(),t.$store.commit("playlists/chooseTrack",t.track)}}},[a("i",{staticClass:"list icon"}),a("translate",{attrs:{"translate-context":"Sidebar/Player/Icon.Tooltip/Verb"}},[t._v("Add to playlist…")])],1):a("button",{class:["ui","basic","circular","icon",{really:!t.border},"button"],attrs:{"aria-label":t.labels.addToPlaylist,title:t.labels.addToPlaylist},on:{click:function(e){return e.stopPropagation(),t.$store.commit("playlists/chooseTrack",t.track)}}},[a("i",{class:["list","basic","icon"]})])},r=[],n={props:{track:{type:Object},button:{type:Boolean,default:!1},border:{type:Boolean,default:!1}},data:function(){return{showModal:!1}},computed:{labels:function(){return{addToPlaylist:this.$pgettext("Sidebar/Player/Icon.Tooltip/Verb","Add to playlist…")}}}},s=n,o=a("2877"),l=Object(o["a"])(s,i,r,!1,null,null,null);e["default"]=l.exports},"4d63":function(t,e,a){var i=a("83ab"),r=a("da84"),n=a("94ca"),s=a("7156"),o=a("9bf2").f,l=a("241c").f,c=a("44e7"),u=a("ad6d"),d=a("9f7f"),p=a("6eeb"),h=a("d039"),f=a("69f3").set,b=a("2626"),v=a("b622"),m=v("match"),g=r.RegExp,y=g.prototype,_=/a/g,k=/a/g,C=new g(_)!==_,w=d.UNSUPPORTED_Y,x=i&&n("RegExp",!C||w||h((function(){return k[m]=!1,g(_)!=_||g(k)==k||"/a/i"!=g(_,"i")})));if(x){var L=function(t,e){var a,i=this instanceof L,r=c(t),n=void 0===e;if(!i&&r&&t.constructor===L&&n)return t;C?r&&!n&&(t=t.source):t instanceof L&&(n&&(e=u.call(t)),t=t.source),w&&(a=!!e&&e.indexOf("y")>-1,a&&(e=e.replace(/y/g,"")));var o=s(C?new g(t,e):g(t,e),i?this:y,L);return w&&a&&f(o,{sticky:a}),o},$=function(t){t in L||o(L,t,{configurable:!0,get:function(){return g[t]},set:function(e){g[t]=e}})},T=l(g),P=0;while(T.length>P)$(T[P++]);y.constructor=L,L.prototype=y,p(r,"RegExp",L)}b("RegExp")},"53a8":function(t,e){t.exports=i;var a=Object.prototype.hasOwnProperty;function i(){for(var t={},e=0;e<arguments.length;e++){var i=arguments[e];for(var r in i)a.call(i,r)&&(t[r]=i[r])}return t}},"6b08":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"component-tags-list"},[t._l(t.toDisplay,(function(e){return a("router-link",{key:e,class:["ui","circular","hashtag","label",t.labelClasses],attrs:{to:{name:t.detailRoute,params:{id:e}}}},[t._v(" #"+t._s(t._f("truncate")(e,t.truncateSize))+" ")])})),t.showMore&&t.toDisplay.length<t.tags.length?a("div",{staticClass:"ui circular inverted accent label",attrs:{role:"button"},on:{click:function(e){e.preventDefault(),t.honorLimit=!1}}},[a("translate",{attrs:{"translate-context":"Content/*/Button/Label/Verb","translate-params":{count:t.tags.length-t.toDisplay.length},"translate-n":t.tags.length-t.toDisplay.length,"translate-plural":"Show %{ count } more tags"}},[t._v("Show 1 more tag")])],1):t._e()],2)},r=[],n=(a("fb6a"),a("a9e3"),{props:{tags:{type:Array,required:!0},showMore:{type:Boolean,default:!0},truncateSize:{type:Number,default:25},limit:{type:Number,default:5},labelClasses:{type:String,default:""},detailRoute:{type:String,default:"library.tags.detail"}},data:function(){return{honorLimit:!0}},computed:{toDisplay:function(){return this.honorLimit?(this.tags||[]).slice(0,this.limit):this.tags}}}),s=n,o=a("2877"),l=Object(o["a"])(s,i,r,!1,null,null,null);e["a"]=l.exports},"6c92":function(t,e,a){var i,r=a("0580"),n=a("53a8"),s=function(){var t=[];return{activateTrap:function(e){if(t.length>0){var a=t[t.length-1];a!==e&&a.pause()}var i=t.indexOf(e);-1===i||t.splice(i,1),t.push(e)},deactivateTrap:function(e){var a=t.indexOf(e);-1!==a&&t.splice(a,1),t.length>0&&t[t.length-1].unpause()}}}();function o(t,e){var a=document,o="string"===typeof t?a.querySelector(t):t,p=n({returnFocusOnDeactivate:!0,escapeDeactivates:!0},e),h={firstTabbableNode:null,lastTabbableNode:null,nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1},f={activate:b,deactivate:v,pause:m,unpause:g};return f;function b(t){if(!h.active){S(),h.active=!0,h.paused=!1,h.nodeFocusedBeforeActivation=a.activeElement;var e=t&&t.onActivate?t.onActivate:p.onActivate;return e&&e(),y(),f}}function v(t){if(h.active){clearTimeout(i),_(),h.active=!1,h.paused=!1,s.deactivateTrap(f);var e=t&&void 0!==t.onDeactivate?t.onDeactivate:p.onDeactivate;e&&e();var a=t&&void 0!==t.returnFocus?t.returnFocus:p.returnFocusOnDeactivate;return a&&d((function(){N(w(h.nodeFocusedBeforeActivation))})),f}}function m(){!h.paused&&h.active&&(h.paused=!0,_())}function g(){h.paused&&h.active&&(h.paused=!1,S(),y())}function y(){if(h.active)return s.activateTrap(f),i=d((function(){N(C())})),a.addEventListener("focusin",L,!0),a.addEventListener("mousedown",x,{capture:!0,passive:!1}),a.addEventListener("touchstart",x,{capture:!0,passive:!1}),a.addEventListener("click",P,{capture:!0,passive:!1}),a.addEventListener("keydown",$,{capture:!0,passive:!1}),f}function _(){if(h.active)return a.removeEventListener("focusin",L,!0),a.removeEventListener("mousedown",x,!0),a.removeEventListener("touchstart",x,!0),a.removeEventListener("click",P,!0),a.removeEventListener("keydown",$,!0),f}function k(t){var e=p[t],i=e;if(!e)return null;if("string"===typeof e&&(i=a.querySelector(e),!i))throw new Error("`"+t+"` refers to no known node");if("function"===typeof e&&(i=e(),!i))throw new Error("`"+t+"` did not return a node");return i}function C(){var t;if(t=null!==k("initialFocus")?k("initialFocus"):o.contains(a.activeElement)?a.activeElement:h.firstTabbableNode||k("fallbackFocus"),!t)throw new Error("Your focus-trap needs to have at least one focusable element");return t}function w(t){var e=k("setReturnFocus");return e||t}function x(t){o.contains(t.target)||(p.clickOutsideDeactivates?v({returnFocus:!r.isFocusable(t.target)}):p.allowOutsideClick&&p.allowOutsideClick(t)||t.preventDefault())}function L(t){o.contains(t.target)||t.target instanceof Document||(t.stopImmediatePropagation(),N(h.mostRecentlyFocusedNode||C()))}function $(t){if(!1!==p.escapeDeactivates&&c(t))return t.preventDefault(),void v();u(t)&&T(t)}function T(t){return S(),t.shiftKey&&t.target===h.firstTabbableNode?(t.preventDefault(),void N(h.lastTabbableNode)):t.shiftKey||t.target!==h.lastTabbableNode?void 0:(t.preventDefault(),void N(h.firstTabbableNode))}function P(t){p.clickOutsideDeactivates||o.contains(t.target)||p.allowOutsideClick&&p.allowOutsideClick(t)||(t.preventDefault(),t.stopImmediatePropagation())}function S(){var t=r(o);h.firstTabbableNode=t[0]||C(),h.lastTabbableNode=t[t.length-1]||C()}function N(t){t!==a.activeElement&&(t&&t.focus?(t.focus(),h.mostRecentlyFocusedNode=t,l(t)&&t.select()):N(C()))}}function l(t){return t.tagName&&"input"===t.tagName.toLowerCase()&&"function"===typeof t.select}function c(t){return"Escape"===t.key||"Esc"===t.key||27===t.keyCode}function u(t){return"Tab"===t.key||9===t.keyCode}function d(t){return setTimeout(t,0)}t.exports=o},7156:function(t,e,a){var i=a("861d"),r=a("d2bb");t.exports=function(t,e,a){var n,s;return r&&"function"==typeof(n=e.constructor)&&n!==a&&i(s=n.prototype)&&s!==a.prototype&&r(t,s),t}},"773e":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[this.$slots.title?a("h3",{staticClass:"ui header"},[t._t("title")],2):t._e(),t.isLoading?a("div",{staticClass:"ui inverted active dimmer"},[a("div",{staticClass:"ui loader"})]):t._e(),t.playlistsExist?a("div",{staticClass:"ui cards app-cards"},t._l(t.objects,(function(t){return a("playlist-card",{key:t.id,attrs:{playlist:t}})})),1):a("div",{staticClass:"ui placeholder segment"},[a("div",{staticClass:"ui icon header"},[a("i",{staticClass:"list icon"}),a("translate",{attrs:{"translate-context":"Content/Home/Placeholder"}},[t._v(" No playlists have been created yet ")])],1),t.$store.state.auth.authenticated?a("button",{staticClass:"ui success icon labeled button",on:{click:function(e){return t.$store.commit("playlists/chooseTrack",null)}}},[a("i",{staticClass:"list icon"}),a("translate",{attrs:{"translate-context":"Content/Home/CreatePlaylist"}},[t._v(" Create Playlist ")])],1):t._e()]),t.nextPage?[a("div",{staticClass:"ui hidden divider"}),t.nextPage?a("button",{class:["ui","basic","button"],on:{click:function(e){return t.fetchData(t.nextPage)}}},[a("translate",{attrs:{"translate-context":"*/*/Button,Label"}},[t._v("Show more")])],1):t._e()]:t._e()],2)},r=[],n=(a("99af"),a("2909")),s=a("ceb5"),o=a("bc3a"),l=a.n(o),c=a("2696"),u={props:{filters:{type:Object,required:!0},url:{type:String,required:!0}},components:{PlaylistCard:c["a"]},data:function(){return{objects:[],limit:this.filters.limit||3,isLoading:!1,errors:null,previousPage:null,nextPage:null}},created:function(){this.fetchData(this.url)},computed:{playlistsExist:function(){return this.objects.length>0}},methods:{fetchData:function(t){if(t){this.isLoading=!0;var e=this,a=s["a"].clone(this.filters);a.page_size=this.limit,a.offset=this.offset,l.a.get(t,{params:a}).then((function(t){e.previousPage=t.data.previous,e.nextPage=t.data.next,e.isLoading=!1,e.objects=[].concat(Object(n["a"])(e.objects),Object(n["a"])(t.data.results))}),(function(t){e.isLoading=!1,e.errors=t.backendErrors}))}},updateOffset:function(t){t?this.offset+=this.limit:this.offset=Math.max(this.offset-this.limit,0)}},watch:{offset:function(){this.fetchData()},"$store.state.moderation.lastUpdate":function(){this.fetchData(this.url)}}},d=u,p=a("2877"),h=Object(p["a"])(d,i,r,!1,null,null,null);e["a"]=h.exports},a3e6:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{class:["ui",{tiny:t.discrete},{icon:!t.discrete},{buttons:!t.dropdownOnly&&!t.iconOnly},"play-button component-play-button"],attrs:{title:t.title}},[t.dropdownOnly?t._e():a("button",{class:t.buttonClasses.concat(["ui",{loading:t.isLoading},{mini:t.discrete},{disabled:!t.playable}]),attrs:{disabled:!t.playable,"aria-label":t.labels.replacePlay},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.replacePlay(e)}}},[a("i",{class:[t.playIconClass,"icon"]}),t.discrete||t.iconOnly?t._e():[t._v(" "),t._t("default",[a("translate",{attrs:{"translate-context":"*/Queue/Button.Label/Short, Verb"}},[t._v("Play")])])]],2),t.discrete||t.iconOnly?t._e():a("button",{class:["ui",{disabled:!t.playable&&!t.filterableArtist},"floating","dropdown",{icon:!t.dropdownOnly},{button:!t.dropdownOnly}],on:{click:function(e){e.preventDefault(),t.clicked=!0}}},[a("i",{class:t.dropdownIconClasses.concat(["icon"]),attrs:{title:t.title}}),t.clicked?a("div",{staticClass:"menu"},[a("button",{ref:"add",staticClass:"item basic",attrs:{"data-ref":"add",disabled:!t.playable,title:t.labels.addToQueue},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.add(e)}}},[a("i",{staticClass:"plus icon"}),a("translate",{attrs:{"translate-context":"*/Queue/Dropdown/Button/Label/Short"}},[t._v("Add to queue")])],1),a("button",{ref:"addNext",staticClass:"item basic",attrs:{"data-ref":"addNext",disabled:!t.playable,title:t.labels.playNext},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addNext()}}},[a("i",{staticClass:"step forward icon"}),t._v(t._s(t.labels.playNext)+" ")]),a("button",{ref:"playNow",staticClass:"item basic",attrs:{"data-ref":"playNow",disabled:!t.playable,title:t.labels.playNow},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addNext(!0)}}},[a("i",{staticClass:"play icon"}),t._v(t._s(t.labels.playNow)+" ")]),t.track?a("button",{staticClass:"item basic",attrs:{disabled:!t.playable,title:t.labels.startRadio},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.$store.dispatch("radios/start",{type:"similar",objectId:t.track.id})}}},[a("i",{staticClass:"feed icon"}),a("translate",{attrs:{"translate-context":"*/Queue/Button.Label/Short, Verb"}},[t._v("Start radio")])],1):t._e(),a("div",{staticClass:"divider"}),t.filterableArtist?a("button",{ref:"filterArtist",staticClass:"item basic",attrs:{"data-ref":"filterArtist",disabled:!t.filterableArtist,title:t.labels.hideArtist},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.filterArtist(e)}}},[a("i",{staticClass:"eye slash outline icon"}),a("translate",{attrs:{"translate-context":"*/Queue/Dropdown/Button/Label/Short"}},[t._v("Hide content from this artist")])],1):t._e(),t._l(t.getReportableObjs({track:t.track,album:t.album,artist:t.artist,playlist:t.playlist,account:t.account,channel:t.channel}),(function(e){return a("button",{key:e.target.type+e.target.id,ref:"report"+e.target.type+e.target.id,refInFor:!0,staticClass:"item basic",attrs:{"data-ref":"report"+e.target.type+e.target.id},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.$store.dispatch("moderation/report",e.target)}}},[a("i",{staticClass:"share icon"}),t._v(" "+t._s(e.label)+" ")])}))],2):t._e()])])},r=[],n=(a("4de4"),a("7db0"),a("4160"),a("c975"),a("d81d"),a("d3b7"),a("159b"),a("bc3a")),s=a.n(n),o=a("1157"),l=a.n(o),c=a("add5"),u={mixins:[c["a"]],props:{tracks:{type:Array,required:!1},track:{type:Object,required:!1},account:{type:Object,required:!1},dropdownIconClasses:{type:Array,required:!1,default:function(){return["dropdown"]}},playIconClass:{type:String,required:!1,default:"play icon"},buttonClasses:{type:Array,required:!1,default:function(){return["button"]}},playlist:{type:Object,required:!1},discrete:{type:Boolean,default:!1},dropdownOnly:{type:Boolean,default:!1},iconOnly:{type:Boolean,default:!1},artist:{type:Object,required:!1},album:{type:Object,required:!1},library:{type:Object,required:!1},channel:{type:Object,required:!1},isPlayable:{type:Boolean,required:!1,default:null}},data:function(){return{isLoading:!1,clicked:!1}},computed:{labels:function(){var t;return t=this.track?this.$pgettext("*/Queue/Dropdown/Button/Title","Play track"):this.album?this.$pgettext("*/Queue/Dropdown/Button/Title","Play album"):this.artist?this.$pgettext("*/Queue/Dropdown/Button/Title","Play artist"):this.playlist?this.$pgettext("*/Queue/Dropdown/Button/Title","Play playlist"):this.$pgettext("*/Queue/Dropdown/Button/Title","Play tracks"),{playNow:this.$pgettext("*/Queue/Dropdown/Button/Title","Play now"),addToQueue:this.$pgettext("*/Queue/Dropdown/Button/Title","Add to current queue"),playNext:this.$pgettext("*/Queue/Dropdown/Button/Title","Play next"),startRadio:this.$pgettext("*/Queue/Dropdown/Button/Title","Play similar songs"),report:this.$pgettext("*/Moderation/*/Button/Label,Verb","Report…"),replacePlay:t}},title:function(){return this.playable?this.$pgettext("*/*/Button.Label/Noun","More…"):this.track?this.$pgettext("*/Queue/Button/Title","This track is not available in any library you have access to"):void 0},playable:function(){return!!this.isPlayable||(this.track?this.track.uploads&&this.track.uploads.length>0:this.artist&&this.artist.tracks_count?this.artist.tracks_count>0:this.artist&&this.artist.albums?this.artist.albums.filter((function(t){return!0===t.is_playable})).length>0:!!this.album||!!this.tracks&&this.tracks.filter((function(t){return t.uploads&&t.uploads.length>0})).length>0)},filterableArtist:function(){return this.track?this.track.artist:this.album?this.album.artist:this.artist?this.artist:void 0}},methods:{filterArtist:function(){this.$store.dispatch("moderation/hide",{type:"artist",target:this.filterableArtist})},getTracksPage:function(t,e,a,i){t>10&&a(i);var r=this;e["page_size"]=100,e["page"]=t,e["hidden"]="",e["playable"]="true",i=i||[],s.a.get("tracks/",{params:e}).then((function(n){n.data.results.forEach((function(t){i.push(t)})),n.data.next?r.getTracksPage(t+1,e,a,i):a(i)}))},getPlayableTracks:function(){var t=this;this.isLoading=!0;var e=new Promise((function(e,a){if(t.track)t.track.uploads&&0!==t.track.uploads.length?e([t.track]):s.a.get("tracks/".concat(t.track.id,"/")).then((function(t){e([t.data])}));else if(t.tracks)e(t.tracks);else if(t.playlist){var i="playlists/"+t.playlist.id+"/";s.a.get(i+"tracks/").then((function(a){var i=t.$store.getters["moderation/artistFilters"]().map((function(t){return t.target.id})),r=a.data.results.map((function(t){return t.track}));i.length>0&&(r=r.filter((function(t){var e=i.indexOf(t.artist.id)>-1;return!(e||t.album&&i.indexOf(t.album.artist.id)>-1)}))),e(r)}))}else if(t.artist){var r={artist:t.artist.id,include_channels:"true",ordering:"album__release_date,disc_number,position"};t.getTracksPage(1,r,e)}else if(t.album){var n={album:t.album.id,include_channels:"true",ordering:"disc_number,position"};t.getTracksPage(1,n,e)}else if(t.library){var o={library:t.library.uuid,ordering:"-creation_date"};t.getTracksPage(1,o,e)}}));return e.then((function(e){return setTimeout((function(e){t.isLoading=!1}),250),e.filter((function(t){return t.uploads&&t.uploads.length>0}))}))},add:function(){var t=this;this.getPlayableTracks().then((function(e){t.$store.dispatch("queue/appendMany",{tracks:e}).then((function(){return t.addMessage(e)}))})),l()(t.$el).find(".ui.dropdown").dropdown("hide")},replacePlay:function(){var t=this;t.$store.dispatch("queue/clean"),this.getPlayableTracks().then((function(e){t.$store.dispatch("queue/appendMany",{tracks:e}).then((function(){return t.addMessage(e)}))})),l()(t.$el).find(".ui.dropdown").dropdown("hide")},addNext:function(t){var e=this,a=0===this.$store.state.queue.tracks.length;this.getPlayableTracks().then((function(i){e.$store.dispatch("queue/appendMany",{tracks:i,index:e.$store.state.queue.currentIndex+1}).then((function(){return e.addMessage(i)}));var r=t&&!a;r&&e.$store.dispatch("queue/next")})),l()(e.$el).find(".ui.dropdown").dropdown("hide")},addMessage:function(t){if(!(t.length<1)){var e=this.$npgettext("*/Queue/Message","%{ count } track was added to your queue","%{ count } tracks were added to your queue",t.length);this.$store.commit("ui/addMessage",{content:this.$gettextInterpolate(e,{count:t.length}),date:new Date})}}},watch:{clicked:function(){var t=this,e=this;this.$nextTick((function(){l()(t.$el).find(".ui.dropdown").dropdown({selectOnKeydown:!1,action:function(t,a,i){var r=e.$refs[i.data("ref")];Array.isArray(r)?r[0].click():r.click(),l()(e.$el).find(".ui.dropdown").dropdown("hide")}}),l()(t.$el).find(".ui.dropdown").dropdown("show",(function(){var t=l()(e.$el).find(".ui.dropdown").find(".menu"),a=t.get(0).getBoundingClientRect(),i=(a.left,document.documentElement.clientWidth),r=a.right-i,n=-a.left,s=0;r>0?(s=-r-5,t.css({cssText:"left: ".concat(s,"px !important;")})):n>0&&(s=n+5,t.css({cssText:"right: -".concat(s,"px !important;")}))}))}))}}},d=u,p=a("2877"),h=Object(p["a"])(d,i,r,!1,null,null,null);e["a"]=h.exports},a9e3:function(t,e,a){"use strict";var i=a("83ab"),r=a("da84"),n=a("94ca"),s=a("6eeb"),o=a("5135"),l=a("c6b6"),c=a("7156"),u=a("c04e"),d=a("d039"),p=a("7c73"),h=a("241c").f,f=a("06cf").f,b=a("9bf2").f,v=a("58a8").trim,m="Number",g=r[m],y=g.prototype,_=l(p(y))==m,k=function(t){var e,a,i,r,n,s,o,l,c=u(t,!1);if("string"==typeof c&&c.length>2)if(c=v(c),e=c.charCodeAt(0),43===e||45===e){if(a=c.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+c}for(n=c.slice(2),s=n.length,o=0;o<s;o++)if(l=n.charCodeAt(o),l<48||l>r)return NaN;return parseInt(n,i)}return+c};if(n(m,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var C,w=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof w&&(_?d((function(){y.valueOf.call(a)})):l(a)!=m)?c(new g(k(e)),a,w):k(e)},x=i?h(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),L=0;x.length>L;L++)o(g,C=x[L])&&!o(w,C)&&b(w,C,f(g,C));w.prototype=y,y.constructor=w,s(r,m,w)}},add5:function(t,e,a){"use strict";a("b0c0");var i,r,n={methods:{getReportableObjs:function(t){var e=t.track,a=t.album,i=t.artist,r=t.playlist,n=t.account,s=t.library,o=t.channel,l=[];if(n){var c=this.$pgettext("*/Moderation/*/Verb","Report @%{ username }…");l.push({label:this.$gettextInterpolate(c,{username:n.preferred_username}),target:{type:"account",_obj:n,full_username:n.full_username,label:n.full_username,typeLabel:this.$pgettext("*/*/*/Noun","Account")}}),e&&(a=e.album,i=e.artist)}return e&&(l.push({label:this.$pgettext("*/Moderation/*/Verb","Report this track…"),target:{type:"track",id:e.id,_obj:e,label:e.title,typeLabel:this.$pgettext("*/*/*/Noun","Track")}}),a=e.album,i=e.artist),a&&(l.push({label:this.$pgettext("*/Moderation/*/Verb","Report this album…"),target:{type:"album",id:a.id,label:a.title,_obj:a,typeLabel:this.$pgettext("*/*/*","Album")}}),i||(i=a.artist)),o?l.push({label:this.$pgettext("*/Moderation/*/Verb","Report this channel…"),target:{type:"channel",uuid:o.uuid,label:o.artist.name,_obj:o,typeLabel:this.$pgettext("*/*/*","Channel")}}):i&&l.push({label:this.$pgettext("*/Moderation/*/Verb","Report this artist…"),target:{type:"artist",id:i.id,label:i.name,_obj:i,typeLabel:this.$pgettext("*/*/*/Noun","Artist")}}),r&&l.push({label:this.$pgettext("*/Moderation/*/Verb","Report this playlist…"),target:{type:"playlist",id:r.id,label:r.name,_obj:r,typeLabel:this.$pgettext("*/*/*","Playlist")}}),s&&l.push({label:this.$pgettext("*/Moderation/*/Verb","Report this library…"),target:{type:"library",uuid:s.uuid,label:s.name,_obj:s,typeLabel:this.$pgettext("*/*/*/Noun","Library")}}),l}}},s=n,o=a("2877"),l=Object(o["a"])(s,i,r,!1,null,null,null);e["a"]=l.exports},c395:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui card"},[a("div",{staticClass:"content"},[a("h4",{staticClass:"header"},[a("router-link",{attrs:{to:{name:"library.detail",params:{id:t.library.uuid}}}},[t._v(" "+t._s(t.library.name)+" ")]),a("div",{directives:[{name:"dropdown",rawName:"v-dropdown"}],staticClass:"ui right floated dropdown"},[a("i",{staticClass:"ellipsis vertical large icon nomargin"}),a("div",{staticClass:"menu"},t._l(t.getReportableObjs({library:t.library,account:t.library.actor}),(function(e){return a("button",{key:e.target.type+e.target.id,staticClass:"item basic",on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.$store.dispatch("moderation/report",e.target)}}},[a("i",{staticClass:"share icon"}),t._v(" "+t._s(e.label)+" ")])})),0)]),"me"===t.library.privacy_level?a("span",{staticClass:"right floated",attrs:{"data-tooltip":t.labels.tooltips.me}},[a("i",{staticClass:"small lock icon"})]):"everyone"===t.library.privacy_level?a("span",{staticClass:"right floated",attrs:{"data-tooltip":t.labels.tooltips.everyone}},[a("i",{staticClass:"small globe icon"})]):t._e()],1),a("div",{staticClass:"meta"},[a("span",[a("i",{staticClass:"small outline clock icon"}),a("human-date",{attrs:{date:t.library.creation_date}})],1)]),a("div",{staticClass:"description"},[t._v(" "+t._s(t.library.description)+" "),a("div",{staticClass:"ui hidden divider"})]),a("div",{staticClass:"meta"},[a("i",{staticClass:"music icon"}),a("translate",{attrs:{"translate-context":"*/*/*","translate-params":{count:t.library.uploads_count},"translate-n":t.library.uploads_count,"translate-plural":"%{ count } tracks"}},[t._v("%{ count } track")])],1),t.displayScan&&t.latestScan?a("div",{staticClass:"meta"},["pending"===t.latestScan.status?[a("i",{staticClass:"hourglass icon"}),a("translate",{attrs:{"translate-context":"Content/Library/Card.List item"}},[t._v("Scan pending")])]:t._e(),"scanning"===t.latestScan.status?[a("i",{staticClass:"loading spinner icon"}),a("translate",{attrs:{"translate-context":"Content/Library/Card.List item","translate-params":{progress:t.scanProgress}}},[t._v("Scanning… (%{ progress }%)")])]:"errored"===t.latestScan.status?[a("i",{staticClass:"dangerdownload icon"}),a("translate",{attrs:{"translate-context":"Content/Library/Card.List item"}},[t._v("Problem during scanning")])]:"finished"===t.latestScan.status&&0===t.latestScan.errored_files?[a("i",{staticClass:"success download icon"}),a("translate",{attrs:{"translate-context":"Content/Library/Card.List item"}},[t._v("Scanned")])]:"finished"===t.latestScan.status&&t.latestScan.errored_files>0?[a("i",{staticClass:"warning download icon"}),a("translate",{attrs:{"translate-context":"Content/Library/Card.List item"}},[t._v("Scanned with errors")])]:t._e(),a("a",{staticClass:"link right floated",attrs:{href:""},on:{click:function(e){e.preventDefault(),t.showScan=!t.showScan}}},[a("translate",{attrs:{"translate-context":"Content/Library/Card.Button.Label/Noun"}},[t._v("Details")]),t.showScan?a("i",{staticClass:"angle down icon"}):a("i",{staticClass:"angle right icon"})],1),t.showScan?a("div",[t.latestScan.modification_date?[a("translate",{attrs:{"translate-context":"Content/Library/Card.List item/Noun"}},[t._v("Last update:")]),a("human-date",{attrs:{date:t.latestScan.modification_date}}),a("br")]:t._e(),a("translate",{attrs:{"translate-context":"Content/Library/Card.List item/Noun"}},[t._v("Failed tracks:")]),t._v(" "+t._s(t.latestScan.errored_files)+" ")],2):t._e()],2):t._e(),t.displayScan&&t.canLaunchScan?a("div",{staticClass:"clearfix"},[a("a",{staticClass:"right floated link",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.launchScan(e)}}},[a("translate",{attrs:{"translate-context":"Content/Library/Card.Button.Label/Verb"}},[t._v("Scan now")]),t._v(" "),a("i",{staticClass:"paper plane icon"})],1)]):t._e()]),a("div",{staticClass:"extra content"},[a("actor-link",{staticStyle:{color:"var(--link-color)"},attrs:{actor:t.library.actor}})],1),t.displayCopyFid?a("div",{staticClass:"extra content"},[a("div",{staticClass:"ui form"},[a("div",{staticClass:"field"},[a("label",{attrs:{for:t.library.fid}},[a("translate",{attrs:{"translate-context":"Content/Library/Title"}},[t._v("Sharing link")])],1),a("copy-input",{attrs:{id:t.library.fid,"button-classes":"basic",value:t.library.fid}})],1)])]):t._e(),t.displayFollow||t.radioPlayable?a("div",{class:["ui",{two:t.displayFollow&&t.radioPlayable},"bottom","attached","buttons"]},[t.radioPlayable?a("radio-button",{attrs:{type:"library","object-id":t.library.uuid}}):t._e(),t.displayFollow?[t.library.follow?t.library.follow.approved?t.library.follow.approved?[a("dangerous-button",{class:["ui","button"],attrs:{action:t.unfollow}},[a("translate",{attrs:{"translate-context":"*/Library/Button.Label/Verb"}},[t._v("Unfollow")]),a("p",{attrs:{slot:"modal-header"},slot:"modal-header"},[a("translate",{attrs:{"translate-context":"Popup/Library/Title"}},[t._v("Unfollow this library?")])],1),a("div",{attrs:{slot:"modal-content"},slot:"modal-content"},[a("p",[a("translate",{attrs:{"translate-context":"Popup/Library/Paragraph"}},[t._v("By unfollowing this library, you loose access to its content.")])],1)]),a("div",{attrs:{slot:"modal-confirm"},slot:"modal-confirm"},[a("translate",{attrs:{"translate-context":"*/Library/Button.Label/Verb"}},[t._v("Unfollow")])],1)],1)]:t._e():[a("button",{staticClass:"ui disabled button"},[a("i",{staticClass:"hourglass icon"}),a("translate",{attrs:{"translate-context":"Content/Library/Card.Paragraph"}},[t._v("Follow request pending approval")])],1),a("button",{staticClass:"ui button",on:{click:t.unfollow}},[a("translate",{attrs:{"translate-context":"Content/Library/Card.Paragraph"}},[t._v("Cancel follow request")])],1)]:a("button",{class:["ui","success",{loading:t.isLoadingFollow},"button"],on:{click:function(e){return t.follow()}}},[a("translate",{attrs:{"translate-context":"Content/Library/Card.Button.Label/Verb"}},[t._v("Follow")])],1)]:t._e()],2):t._e()])},r=[],n=(a("e25e"),a("bc3a")),s=a.n(n),o=a("add5"),l=a("d4fd"),c=(a("1157"),{mixins:[o["a"]],props:{library:{type:Object,required:!0},displayFollow:{type:Boolean,default:!0},displayScan:{type:Boolean,default:!0},displayCopyFid:{type:Boolean,default:!0}},components:{RadioButton:l["a"]},data:function(){return{isLoadingFollow:!1,showScan:!1,scanTimeout:null,latestScan:this.library.latest_scan}},computed:{labels:function(){var t=this.$pgettext("Content/Library/Card.Help text","This library is private and your approval from its owner is needed to access its content"),e=this.$pgettext("Content/Library/Card.Help text","This library is public and you can access its content freely");return{tooltips:{me:t,everyone:e}}},scanProgress:function(){var t=this.latestScan,e=100*t.processed_files/t.total_files;return Math.min(parseInt(e),100)},scanStatus:function(){return this.latestScan?this.latestScan.status:"unknown"},canLaunchScan:function(){return"pending"!==this.scanStatus&&"scanning"!==this.scanStatus},radioPlayable:function(){return(this.library.actor.is_local||"finished"===this.scanStatus)&&("everyone"===this.library.privacy_level||this.library.follow&&this.library.follow.is_approved)}},methods:{launchScan:function(){var t=this,e=this.$pgettext("Content/Library/Message","Scan launched"),a=this.$pgettext("Content/Library/Message","Scan skipped (previous scan is too recent)");s.a.post("federation/libraries/".concat(this.library.uuid,"/scan/")).then((function(i){var r;"skipped"==i.data.status?r=a:(t.latestScan=i.data.scan,r=e),t.$store.commit("ui/addMessage",{content:r,date:new Date})}))},follow:function(){var t=this;this.isLoadingFollow=!0,s.a.post("federation/follows/library/",{target:this.library.uuid}).then((function(e){t.library.follow=e.data,t.isLoadingFollow=!1,t.$emit("followed")}),(function(e){t.isLoadingFollow=!1}))},unfollow:function(){var t=this;this.isLoadingFollow=!0,s.a.delete("federation/follows/library/".concat(this.library.follow.uuid,"/")).then((function(e){t.$emit("deleted"),t.library.follow=null,t.isLoadingFollow=!1}),(function(e){t.isLoadingFollow=!1}))},fetchScanStatus:function(){var t=this;s.a.get("federation/follows/library/".concat(this.library.follow.uuid,"/")).then((function(e){t.latestScan=e.data.target.latest_scan,"pending"===t.scanStatus||"scanning"===t.scanStatus?t.scanTimeout=setTimeout(t.fetchScanStatus(),5e3):clearTimeout(t.scanTimeout)}))}},watch:{showScan:function(t,e){t?"pending"!==this.scanStatus&&"scanning"!==this.scanStatus||this.fetchScanStatus():this.scanTimeout&&clearTimeout(this.scanTimeout)}}}),u=c,d=a("2877"),p=Object(d["a"])(u,i,r,!1,null,null,null);e["a"]=p.exports},d4fd:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{class:["ui","primary",{inverted:t.running},"icon","labeled","button"],on:{click:t.toggleRadio}},[a("i",{staticClass:"ui feed icon",attrs:{role:"button"}}),t.running?[a("translate",{attrs:{"translate-context":"*/Player/Button.Label/Short, Verb"}},[t._v("Stop radio")])]:[a("translate",{attrs:{"translate-context":"*/Queue/Button.Label/Short, Verb"}},[t._v("Start radio")])]],2)},r=[],n=a("ceb5"),s={props:{customRadioId:{required:!1},type:{type:String,required:!1},clientOnly:{type:Boolean,default:!1},objectId:{default:null}},methods:{toggleRadio:function(){this.running?this.$store.dispatch("radios/stop"):this.$store.dispatch("radios/start",{type:this.type,objectId:this.objectId,customRadioId:this.customRadioId,clientOnly:this.clientOnly})}},computed:{running:function(){var t=this.$store.state.radios,e=t.current;return!!t.running&&(e.type===this.type&&n["a"].isEqual(e.objectId,this.objectId)&&e.customRadioId===this.customRadioId)}}},o=s,l=a("2877"),c=Object(l["a"])(o,i,r,!1,null,null,null);e["a"]=c.exports},f167:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.track?a("div",[a("section",{staticClass:"ui vertical stripe segment"},[a("div",{staticClass:"ui stackable grid row container"},[a("div",{staticClass:"six wide column"},[t.upload?[a("h3",{staticClass:"ui header"},["music"===t.track.artist.content_category?a("translate",{key:"1",attrs:{"translate-context":"Content/*/*"}},[t._v("Track Details")]):a("translate",{key:"2",attrs:{"translate-context":"Content/*/*"}},[t._v("Episode Details")])],1),a("table",{staticClass:"ui basic table"},[a("tbody",[a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/*/*"}},[t._v("Duration")])],1),a("td",{staticClass:"right aligned"},[t.upload.duration?[t._v(t._s(t._f("duration")(t.upload.duration)))]:a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("N/A")])],2)]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Size")])],1),a("td",{staticClass:"right aligned"},[t.upload.size?[t._v(t._s(t._f("humanSize")(t.upload.size)))]:a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("N/A")])],2)]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Codec")])],1),a("td",{staticClass:"right aligned"},[t.upload.extension?[t._v(t._s(t.upload.extension))]:a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("N/A")])],2)]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/Track/*/Noun"}},[t._v("Bitrate")])],1),a("td",{staticClass:"right aligned"},[t.upload.bitrate?[t._v(t._s(t._f("humanSize")(t.upload.bitrate))+"/s")]:a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("N/A")])],2)]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/*/*"}},[t._v("Downloads")])],1),a("td",{staticClass:"right aligned"},[t._v(" "+t._s(t.track.downloads_count)+" ")])])])])]:t._e()],2),a("div",{staticClass:"ten wide column"},[t.track.tags&&t.track.tags.length>0?[a("tags-list",{attrs:{tags:t.track.tags}}),a("div",{staticClass:"ui hidden divider"})]:t._e(),a("rendered-description",{attrs:{content:t.track.description,"can-update":!1}}),a("h2",{staticClass:"ui header"},[a("translate",{attrs:{"translate-context":"Content/*/*"}},[t._v("Release Details")])],1),a("table",{staticClass:"ui basic table ellipsis-rows"},[a("tbody",[a("tr",[a("td",[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Artist")])],1),a("td",{staticClass:"right aligned"},[a("router-link",{attrs:{to:{name:"library.artists.detail",params:{id:t.track.artist.id}}}},[t._v(" "+t._s(t.track.artist.name)+" ")])],1)]),t.track.album?a("tr",[a("td",["music"===t.track.album.artist.content_category?a("translate",{key:"1",attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Album")]):a("translate",{key:"2",attrs:{"translate-context":"*/*/*"}},[t._v("Serie")])],1),a("td",{staticClass:"right aligned"},[a("router-link",{attrs:{to:{name:"library.albums.detail",params:{id:t.track.album.id}}}},[t._v(" "+t._s(t.track.album.title)+" ")])],1)]):t._e(),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Year")])],1),a("td",{staticClass:"right aligned"},[t.track.album&&t.track.album.release_date?[t._v(" "+t._s(t._f("moment")(t.track.album.release_date,"Y"))+" ")]:[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("N/A")])]],2)]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/Track/*/Noun"}},[t._v("Copyright")])],1),a("td",{staticClass:"right aligned"},[t.track.copyright?a("span",{attrs:{title:t.track.copyright}},[t._v(t._s(t._f("truncate")(t.track.copyright,50)))]):[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("N/A")])]],2)]),a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("License")])],1),a("td",{staticClass:"right aligned"},[t.license?a("a",{attrs:{href:t.license.url,target:"_blank",rel:"noopener noreferrer"}},[t._v(t._s(t.license.name))]):a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("N/A")])],1)]),t.track.is_local?t._e():a("tr",[a("td",[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("URL")])],1),a("td",{attrs:{title:t.track.fid}},[a("a",{attrs:{href:t.track.fid,target:"_blank",rel:"noopener noreferrer"}},[t._v(" "+t._s(t._f("truncate")(t.track.fid,65))+" ")])])])])]),t.musicbrainzUrl?a("a",{attrs:{href:t.musicbrainzUrl,target:"_blank",rel:"noreferrer noopener"}},[a("i",{staticClass:"external icon"}),a("translate",{attrs:{"translate-context":"Content/*/*/Clickable, Verb"}},[t._v("View on MusicBrainz")])],1):t._e(),a("h2",{staticClass:"ui header"},[a("translate",{attrs:{"translate-context":"Content/*/Title/Noun"}},[t._v("Related Playlists")])],1),a("playlist-widget",{attrs:{url:"playlists/",filters:{track:t.track.id,playable:!0,ordering:"-modification_date"}}}),a("h2",{staticClass:"ui header"},[a("translate",{attrs:{"translate-context":"Content/*/Title/Noun"}},[t._v("Related Libraries")])],1),a("library-widget",{attrs:{url:"tracks/"+t.id+"/libraries/"},on:{loaded:function(e){return t.$emit("libraries-loaded",e)}}},[a("translate",{attrs:{slot:"subtitle","translate-context":"Content/Track/Paragraph"},slot:"subtitle"},[t._v("This track is present in the following libraries:")])],1)],2)])])]):t._e()},r=[],n=a("bc3a"),s=a.n(n),o=(a("4b90"),a("3677"),a("06cd")),l=a("6b08"),c=a("773e"),u={props:["track","libraries"],components:{LibraryWidget:o["a"],TagsList:l["a"],PlaylistWidget:c["a"]},data:function(){return{id:this.track.id,licenseData:null}},created:function(){this.track&&this.track.license&&this.fetchLicenseData(this.track.license)},methods:{fetchLicenseData:function(t){var e=this,a="licenses/".concat(t);s.a.get(a).then((function(t){e.licenseData=t.data}))}},computed:{labels:function(){return{title:this.$pgettext("*/*/*/Noun","Track")}},musicbrainzUrl:function(){if(this.track.mbid)return"https://musicbrainz.org/recording/"+this.track.mbid},upload:function(){if(this.track.uploads)return this.track.uploads[0]},license:function(){return this.track&&this.track.license?this.licenseData:null},cover:function(){return this.track.cover&&this.track.cover.urls.original?this.track.cover:this.track.album&&this.track.album.cover?this.track.album.cover:void 0}},watch:{track:function(t){t&&t.license&&this.fetchLicenseData(t.license)}}},d=u,p=a("2877"),h=Object(p["a"])(d,i,r,!1,null,null,null);e["default"]=h.exports},fb6c:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",[t.isLoading?a("div",{directives:[{name:"title",rawName:"v-title",value:t.labels.title,expression:"labels.title"}],staticClass:"ui vertical segment"},[a("div",{class:["ui","centered","active","inline","loader"]})]):t._e(),t.track?[a("section",{directives:[{name:"title",rawName:"v-title",value:t.track.title,expression:"track.title"}],class:["ui","head","vertical","center","aligned","stripe","segment"]},[a("div",{staticClass:"ui basic padded segment"},[a("div",{staticClass:"ui stackable grid row container"},[a("div",{staticClass:"eight wide left aligned column"},[a("h1",{staticClass:"ui header"},[t._v(" "+t._s(t.track.title)+" "),a("div",{staticClass:"sub header",domProps:{innerHTML:t._s(t.subtitle)}})])]),a("div",{staticClass:"eight wide right aligned column button-group"},[a("play-button",{staticClass:"vibrant",attrs:{track:t.track}},[a("translate",{attrs:{"translate-context":"*/Queue/Button.Label/Short, Verb"}},[t._v("Play")])],1),t._v(" "),t.$store.state.auth.authenticated?a("track-favorite-icon",{attrs:{border:!0,track:t.track}}):t._e(),t.$store.state.auth.authenticated?a("track-playlist-icon",{staticClass:"circular",attrs:{border:!0,track:t.track}}):t._e(),t.upload?a("a",{staticClass:"ui basic circular icon button",attrs:{role:"button","aria-label":t.labels.download,href:t.downloadUrl,target:"_blank",title:t.labels.download}},[a("i",{staticClass:"download icon"})]):t._e(),t.publicLibraries.length>0?a("modal",{attrs:{show:t.showEmbedModal},on:{"update:show":function(e){t.showEmbedModal=e}}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Popup/Track/Title"}},[t._v("Embed this track on your website")])],1),a("div",{staticClass:"scrolling content"},[a("div",{staticClass:"description"},[a("embed-wizard",{attrs:{type:"track",id:t.track.id}})],1)]),a("div",{staticClass:"actions"},[a("button",{staticClass:"ui basic deny button"},[a("translate",{attrs:{"translate-context":"*/*/Button.Label/Verb"}},[t._v("Cancel")])],1)])]):t._e(),a("button",{directives:[{name:"dropdown",rawName:"v-dropdown",value:{direction:"downward"},expression:"{direction: 'downward'}"}],staticClass:"ui floating dropdown circular icon basic button",attrs:{title:t.labels.more}},[a("i",{staticClass:"ellipsis vertical icon"}),a("div",{staticClass:"menu",staticStyle:{right:"0",left:"auto"}},[t.domain!=t.$store.getters["instance/domain"]?a("a",{staticClass:"basic item",attrs:{href:t.track.fid,target:"_blank"}},[a("i",{staticClass:"external icon"}),a("translate",{attrs:{"translate-params":{domain:t.domain},"translate-context":"Content/*/Button.Label/Verb"}},[t._v("View on %{ domain }")])],1):t._e(),t.publicLibraries.length>0?a("div",{staticClass:"basic item",attrs:{role:"button"},on:{click:function(e){t.showEmbedModal=!t.showEmbedModal}}},[a("i",{staticClass:"code icon"}),a("translate",{attrs:{"translate-context":"Content/*/Button.Label/Verb"}},[t._v("Embed")])],1):t._e(),a("a",{staticClass:"basic item",attrs:{href:t.wikipediaUrl,target:"_blank",rel:"noreferrer noopener"}},[a("i",{staticClass:"wikipedia w icon"}),a("translate",{attrs:{"translate-context":"Content/*/Button.Label/Verb"}},[t._v("Search on Wikipedia")])],1),t.discogsUrl?a("a",{staticClass:"basic item",attrs:{href:t.discogsUrl,target:"_blank",rel:"noreferrer noopener"}},[a("i",{staticClass:"external icon"}),a("translate",{attrs:{"translate-context":"Content/*/Button.Label/Verb"}},[t._v("Search on Discogs")])],1):t._e(),t.track.is_local?a("router-link",{staticClass:"basic item",attrs:{to:{name:"library.tracks.edit",params:{id:t.track.id}}}},[a("i",{staticClass:"edit icon"}),a("translate",{attrs:{"translate-context":"Content/*/Button.Label/Verb"}},[t._v("Edit")])],1):t._e(),t.artist&&t.$store.state.auth.authenticated&&t.artist.channel&&t.artist.attributed_to.full_username===t.$store.state.auth.fullUsername?a("dangerous-button",{class:["ui",{loading:t.isLoading},"item"],on:{confirm:function(e){return t.remove()}}},[a("i",{staticClass:"ui trash icon"}),a("translate",{attrs:{"translate-context":"*/*/*/Verb"}},[t._v("Delete…")]),a("p",{attrs:{slot:"modal-header"},slot:"modal-header"},[a("translate",{attrs:{"translate-context":"Popup/Channel/Title"}},[t._v("Delete this track?")])],1),a("div",{attrs:{slot:"modal-content"},slot:"modal-content"},[a("p",[a("translate",{attrs:{"translate-context":"Content/Moderation/Paragraph"}},[t._v("The track will be deleted, as well as any related files and data. This action is irreversible.")])],1)]),a("p",{attrs:{slot:"modal-confirm"},slot:"modal-confirm"},[a("translate",{attrs:{"translate-context":"*/*/*/Verb"}},[t._v("Delete")])],1)],1):t._e(),a("div",{staticClass:"divider"}),t._l(t.getReportableObjs({track:t.track}),(function(e){return a("div",{key:e.target.type+e.target.id,staticClass:"basic item",attrs:{role:"button"},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.$store.dispatch("moderation/report",e.target)}}},[a("i",{staticClass:"share icon"}),t._v(" "+t._s(e.label)+" ")])})),a("div",{staticClass:"divider"}),t.$store.state.auth.availablePermissions["library"]?a("router-link",{staticClass:"basic item",attrs:{to:{name:"manage.library.tracks.detail",params:{id:t.track.id}}}},[a("i",{staticClass:"wrench icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/Link"}},[t._v("Open in moderation interface")])],1):t._e(),t.$store.state.auth.profile&&t.$store.state.auth.profile.is_superuser?a("a",{staticClass:"basic item",attrs:{href:t.$store.getters["instance/absoluteUrl"]("/api/admin/music/track/"+t.track.id),target:"_blank",rel:"noopener noreferrer"}},[a("i",{staticClass:"wrench icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/Link/Verb"}},[t._v("View in Django's admin")])],1):t._e()],2)])],1)])])]),t.track?a("router-view",{key:t.$route.fullPath,attrs:{track:t.track,object:t.track,"object-type":"track"},on:{"libraries-loaded":function(e){t.libraries=e}}}):t._e()]:t._e()],2)},r=[],n=(a("4de4"),a("b0c0"),a("ac1f"),a("5319"),a("cadb")),s=a("bc3a"),o=a.n(s),l=a("4b90"),c=a("025e"),u=a("3677"),d=a("a3e6"),p=a("4389"),h=a("4c04"),f=a("404d"),b=a("21a2"),v=a("add5"),m=a("98fc"),g="tracks/";function y(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}var _={props:["id"],mixins:[v["a"]],components:{PlayButton:d["a"],TrackPlaylistIcon:h["default"],TrackFavoriteIcon:p["default"],Modal:f["default"],EmbedWizard:b["a"]},data:function(){return{time:n["a"],isLoading:!0,track:null,artist:null,showEmbedModal:!1,libraries:[]}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.isLoading=!0;var e=g+this.id+"/";u["a"].default.debug('Fetching track "'+this.id+'"'),o.a.get(e,{params:{refresh:"true"}}).then((function(e){t.track=e.data,o.a.get("artists/".concat(e.data.artist.id,"/")).then((function(e){t.artist=e.data})),t.isLoading=!1}))},remove:function(){var t=this,e=this;e.isLoading=!0,o.a.delete("tracks/".concat(this.track.id)).then((function(a){e.isLoading=!1,e.$emit("deleted"),e.$router.push({name:"library.artists.detail",params:{id:t.artist.id}})}),(function(t){e.isLoading=!1,e.errors=t.backendErrors}))}},computed:{domain:function(){if(this.track)return Object(c["b"])(this.track.fid)},publicLibraries:function(){return this.libraries.filter((function(t){return"everyone"===t.privacy_level}))},upload:function(){if(this.track.uploads)return this.track.uploads[0]},labels:function(){return{title:this.$pgettext("*/*/*/Noun","Track"),download:this.$pgettext("Content/Track/Link/Verb","Download"),more:this.$pgettext("*/*/Button.Label/Noun","More…")}},wikipediaUrl:function(){return"https://en.wikipedia.org/w/index.php?search="+encodeURI(this.track.title+" "+this.track.artist.name)},discogsUrl:function(){if(this.track.album)return"https://discogs.com/search/?type=release&title="+encodeURI(this.track.album.title)+"&artist="+encodeURI(this.track.artist.name)+"&track="+encodeURI(this.track.title)},downloadUrl:function(){var t=this.$store.getters["instance/absoluteUrl"](this.upload.listen_url);if(this.$store.state.auth.authenticated){var e="jwt",a=this.$store.state.auth.token;this.$store.state.auth.scopedTokens&&this.$store.state.auth.scopedTokens.listen&&(e="token",a=this.$store.state.auth.scopedTokens.listen),t=l["a"].updateQueryString(t,e,encodeURI(a))}return t},attributedToUrl:function(){var t=this.$router.resolve({name:"profile.full.overview",params:{username:this.track.attributed_to.preferred_username,domain:this.track.attributed_to.domain}});return t.href},albumUrl:function(){var t=this.$router.resolve({name:"library.albums.detail",params:{id:this.track.album.id}});return t.href},artistUrl:function(){var t=this.$router.resolve({name:"library.artists.detail",params:{id:this.track.artist.id}});return t.href},headerStyle:function(){return this.cover&&this.cover.urls.original?"background-image: url("+this.$store.getters["instance/absoluteUrl"](this.cover.urls.original)+")":""},subtitle:function(){var t;return this.track.attributed_to?(t=this.$pgettext("Content/Track/Paragraph",'Uploaded by <a class="internal" href="%{ uploaderUrl }">%{ uploader }</a> on <time title="%{ date }" datetime="%{ date }">%{ prettyDate }</time>'),this.$gettextInterpolate(t,{uploaderUrl:this.attributedToUrl,uploader:y("@".concat(this.track.attributed_to.full_username)),date:y(this.track.creation_date),prettyDate:y(Object(m["b"])(this.track.creation_date,"LL"))})):(t=this.$pgettext("Content/Track/Paragraph",'Uploaded on <time title="%{ date }" datetime="%{ date }">%{ prettyDate }</time>'),this.$gettextInterpolate(t,{date:y(this.track.creation_date),prettyDate:y(Object(m["b"])(this.track.creation_date,"LL"))}))}},watch:{id:function(){this.fetchData()}}},k=_,C=a("2877"),w=Object(C["a"])(k,i,r,!1,null,null,null);e["default"]=w.exports}}]);