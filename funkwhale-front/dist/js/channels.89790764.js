(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["channels"],{"0580":function(t,e){var a=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'],n=a.join(","),s="undefined"===typeof Element?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;function i(t,e){e=e||{};var a,i,o,l=[],c=[],u=t.querySelectorAll(n);for(e.includeContainer&&s.call(t,n)&&(u=Array.prototype.slice.apply(u),u.unshift(t)),a=0;a<u.length;a++)i=u[a],r(i)&&(o=d(i),0===o?l.push(i):c.push({documentOrder:a,tabIndex:o,node:i}));var h=c.sort(p).map((function(t){return t.node})).concat(l);return h}function r(t){return!(!l(t)||v(t)||d(t)<0)}function o(t){if(!t)throw new Error("No node provided");return!1!==s.call(t,n)&&r(t)}function l(t){return!(t.disabled||m(t)||_(t))}i.isTabbable=o,i.isFocusable=u;var c=a.concat("iframe").join(",");function u(t){if(!t)throw new Error("No node provided");return!1!==s.call(t,c)&&l(t)}function d(t){var e=parseInt(t.getAttribute("tabindex"),10);return isNaN(e)?h(t)?0:t.tabIndex:e}function p(t,e){return t.tabIndex===e.tabIndex?t.documentOrder-e.documentOrder:t.tabIndex-e.tabIndex}function h(t){return"true"===t.contentEditable}function b(t){return"INPUT"===t.tagName}function m(t){return b(t)&&"hidden"===t.type}function f(t){return b(t)&&"radio"===t.type}function v(t){return f(t)&&!y(t)}function g(t){for(var e=0;e<t.length;e++)if(t[e].checked)return t[e]}function y(t){if(!t.name)return!0;var e=t.ownerDocument.querySelectorAll('input[type="radio"][name="'+t.name+'"]'),a=g(e);return!a||a===t}function _(t){return null===t.offsetParent||"hidden"===getComputedStyle(t).visibility}t.exports=i},"1e6f":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._t("default"),a("div",{staticClass:"ui hidden divider"}),t.isLoading?a("div",{staticClass:"ui inverted active dimmer"},[a("div",{staticClass:"ui loader"})]):t._e(),t._l(t.objects,(function(t){return a("channel-entry-card",{key:t.id,attrs:{entry:t}})})),t.count>t.limit?[a("div",{staticClass:"ui hidden divider"}),a("div",{staticClass:"ui center aligned basic segment"},[a("pagination",{attrs:{current:t.page,"paginate-by":t.limit,total:t.count},on:{"page-changed":t.updatePage}})],1)]:t._e(),t.isLoading||0!==t.objects.length?t._e():[a("empty-state",{attrs:{refresh:!0},on:{refresh:function(e){return t.fetchData("tracks/")}}},[a("p",[a("translate",{attrs:{"translate-context":"Content/Channels/*"}},[t._v("You may need to subscribe to this channel to see its content.")])],1)])]],2)},s=[],i=(a("a9e3"),a("ceb5")),r=a("bc3a"),o=a.n(r),l=a("a432"),c=a("1799"),u=(a("38b2"),{props:{filters:{type:Object,required:!0},limit:{type:Number,default:10}},components:{ChannelEntryCard:l["a"],Pagination:c["a"]},data:function(){return{objects:[],count:0,isLoading:!1,errors:null,nextPage:null,page:1}},created:function(){this.fetchData("tracks/")},methods:{fetchData:function(t){if(t){this.isLoading=!0;var e=this,a=i["a"].clone(this.filters);a.page_size=this.limit,a.page=this.page,a.include_channels=!0,o.a.get(t,{params:a}).then((function(t){e.nextPage=t.data.next,e.isLoading=!1,e.objects=t.data.results,e.count=t.data.count,e.$emit("fetched",t.data)}),(function(t){e.isLoading=!1,e.errors=t.backendErrors}))}},updatePage:function(t){this.page=t}},watch:{page:function(){this.fetchData("tracks/")}}}),d=u,p=a("2877"),h=Object(p["a"])(d,n,s,!1,null,null,null);e["a"]=h.exports},"271e":function(t,e,a){t.exports=a.p+"img/default-cover.89d13c2f.png"},"372f":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("channel-entries",{attrs:{limit:25,filters:{channel:t.object.uuid,ordering:"creation_date"}}})],1)},s=[],i=a("1e6f"),r={props:["object"],components:{ChannelEntries:i["a"]}},o=r,l=a("2877"),c=Object(l["a"])(o,n,s,!1,null,null,null);e["default"]=c.exports},"404d":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:["ui",{active:t.show},{"overlay fullscreen":t.fullscreen&&["phone","tablet"].indexOf(t.$store.getters["ui/windowSize"])>-1},"modal"]},[a("i",{staticClass:"close inside icon"}),t.show?t._t("default"):t._e()],2)},s=[],i=a("1157"),r=a.n(i),o=a("6c92"),l=a.n(o),c={props:{show:{type:Boolean,required:!0},fullscreen:{type:Boolean,default:!0}},data:function(){return{control:null,focusTrap:null}},mounted:function(){this.focusTrap=l()(this.$el)},beforeDestroy:function(){this.control&&r()(this.$el).modal("hide"),r()(this.$el).remove()},methods:{initModal:function(){this.control=r()(this.$el).modal({duration:100,onApprove:function(){this.$emit("approved")}.bind(this),onDeny:function(){this.$emit("deny")}.bind(this),onHidden:function(){this.$emit("update:show",!1)}.bind(this),onVisible:function(){this.focusTrap.activate(),this.focusTrap.unpause()}.bind(this)})}},watch:{show:{handler:function(t){t?(this.initModal(),this.$emit("show"),this.control.modal("show"),this.focusTrap.activate(),this.focusTrap.unpause()):this.control&&(this.$emit("hide"),this.control.modal("hide"),this.control.remove(),this.focusTrap.deactivate(),this.focusTrap.pause())}}}},u=c,d=a("2877"),p=Object(d["a"])(u,n,s,!1,null,null,null);e["default"]=p.exports},4389:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.button?a("button",{class:["ui","pink",{inverted:t.isFavorite},{favorited:t.isFavorite},"icon","labeled","button"],on:{click:function(e){return e.stopPropagation(),t.$store.dispatch("favorites/toggle",t.track.id)}}},[a("i",{staticClass:"heart icon"}),t.isFavorite?a("translate",{attrs:{"translate-context":"Content/Track/Button.Message"}},[t._v("In favorites")]):a("translate",{attrs:{"translate-context":"Content/Track/*/Verb"}},[t._v("Add to favorites")])],1):a("button",{class:["ui","favorite-icon",{pink:t.isFavorite},{favorited:t.isFavorite},"basic","circular","icon",{really:!t.border},"button"],attrs:{"aria-label":t.title,title:t.title},on:{click:function(e){return e.stopPropagation(),t.$store.dispatch("favorites/toggle",t.track.id)}}},[a("i",{class:["heart",{pink:t.isFavorite},"basic","icon"]})])},s=[],i={props:{track:{type:Object},button:{type:Boolean,default:!1},border:{type:Boolean,default:!1}},computed:{title:function(){return this.isFavorite?this.$pgettext("Content/Track/Icon.Tooltip/Verb","Remove from favorites"):this.$pgettext("Content/Track/*/Verb","Add to favorites")},isFavorite:function(){return this.$store.getters["favorites/isFavorite"](this.track.id)}}},r=i,o=a("2877"),l=Object(o["a"])(r,n,s,!1,null,null,null);e["default"]=l.exports},"53a8":function(t,e){t.exports=n;var a=Object.prototype.hasOwnProperty;function n(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var s in n)a.call(n,s)&&(t[s]=n[s])}return t}},"6c92":function(t,e,a){var n,s=a("0580"),i=a("53a8"),r=function(){var t=[];return{activateTrap:function(e){if(t.length>0){var a=t[t.length-1];a!==e&&a.pause()}var n=t.indexOf(e);-1===n||t.splice(n,1),t.push(e)},deactivateTrap:function(e){var a=t.indexOf(e);-1!==a&&t.splice(a,1),t.length>0&&t[t.length-1].unpause()}}}();function o(t,e){var a=document,o="string"===typeof t?a.querySelector(t):t,p=i({returnFocusOnDeactivate:!0,escapeDeactivates:!0},e),h={firstTabbableNode:null,lastTabbableNode:null,nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1},b={activate:m,deactivate:f,pause:v,unpause:g};return b;function m(t){if(!h.active){L(),h.active=!0,h.paused=!1,h.nodeFocusedBeforeActivation=a.activeElement;var e=t&&t.onActivate?t.onActivate:p.onActivate;return e&&e(),y(),b}}function f(t){if(h.active){clearTimeout(n),_(),h.active=!1,h.paused=!1,r.deactivateTrap(b);var e=t&&void 0!==t.onDeactivate?t.onDeactivate:p.onDeactivate;e&&e();var a=t&&void 0!==t.returnFocus?t.returnFocus:p.returnFocusOnDeactivate;return a&&d((function(){T(x(h.nodeFocusedBeforeActivation))})),b}}function v(){!h.paused&&h.active&&(h.paused=!0,_())}function g(){h.paused&&h.active&&(h.paused=!1,L(),y())}function y(){if(h.active)return r.activateTrap(b),n=d((function(){T(w())})),a.addEventListener("focusin",$,!0),a.addEventListener("mousedown",k,{capture:!0,passive:!1}),a.addEventListener("touchstart",k,{capture:!0,passive:!1}),a.addEventListener("click",V,{capture:!0,passive:!1}),a.addEventListener("keydown",j,{capture:!0,passive:!1}),b}function _(){if(h.active)return a.removeEventListener("focusin",$,!0),a.removeEventListener("mousedown",k,!0),a.removeEventListener("touchstart",k,!0),a.removeEventListener("click",V,!0),a.removeEventListener("keydown",j,!0),b}function C(t){var e=p[t],n=e;if(!e)return null;if("string"===typeof e&&(n=a.querySelector(e),!n))throw new Error("`"+t+"` refers to no known node");if("function"===typeof e&&(n=e(),!n))throw new Error("`"+t+"` did not return a node");return n}function w(){var t;if(t=null!==C("initialFocus")?C("initialFocus"):o.contains(a.activeElement)?a.activeElement:h.firstTabbableNode||C("fallbackFocus"),!t)throw new Error("Your focus-trap needs to have at least one focusable element");return t}function x(t){var e=C("setReturnFocus");return e||t}function k(t){o.contains(t.target)||(p.clickOutsideDeactivates?f({returnFocus:!s.isFocusable(t.target)}):p.allowOutsideClick&&p.allowOutsideClick(t)||t.preventDefault())}function $(t){o.contains(t.target)||t.target instanceof Document||(t.stopImmediatePropagation(),T(h.mostRecentlyFocusedNode||w()))}function j(t){if(!1!==p.escapeDeactivates&&c(t))return t.preventDefault(),void f();u(t)&&P(t)}function P(t){return L(),t.shiftKey&&t.target===h.firstTabbableNode?(t.preventDefault(),void T(h.lastTabbableNode)):t.shiftKey||t.target!==h.lastTabbableNode?void 0:(t.preventDefault(),void T(h.firstTabbableNode))}function V(t){p.clickOutsideDeactivates||o.contains(t.target)||p.allowOutsideClick&&p.allowOutsideClick(t)||(t.preventDefault(),t.stopImmediatePropagation())}function L(){var t=s(o);h.firstTabbableNode=t[0]||w(),h.lastTabbableNode=t[t.length-1]||w()}function T(t){t!==a.activeElement&&(t&&t.focus?(t.focus(),h.mostRecentlyFocusedNode=t,l(t)&&t.select()):T(w()))}}function l(t){return t.tagName&&"input"===t.tagName.toLowerCase()&&"function"===typeof t.select}function c(t){return"Escape"===t.key||"Esc"===t.key||27===t.keyCode}function u(t){return"Tab"===t.key||9===t.keyCode}function d(t){return setTimeout(t,0)}t.exports=o},"6eaa":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"ui form",on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.submit(e)}}},[t.errors.length>0?a("div",{staticClass:"ui negative message",attrs:{role:"alert"}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Content/*/Error message.Title"}},[t._v("Error while saving channel")])],1),a("ul",{staticClass:"list"},t._l(t.errors,(function(e){return a("li",[t._v(t._s(e))])})),0)]):t._e(),t.metadataChoices?[t.creating&&1===t.step?a("fieldset",{staticClass:"ui grouped channel-type required field"},[a("legend",[a("translate",{attrs:{"translate-context":"Content/Channel/Paragraph"}},[t._v("What this channel will be used for?")])],1),a("div",{staticClass:"ui hidden divider"}),a("div",{staticClass:"field"},t._l(t.categoryChoices,(function(e){return a("div",{class:["ui","radio","checkbox",{selected:e.value==t.newValues.content_category}]},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newValues.content_category,expression:"newValues.content_category"}],attrs:{type:"radio",name:"channel-category",id:"category-"+e.value},domProps:{value:e.value,checked:t._q(t.newValues.content_category,e.value)},on:{change:function(a){return t.$set(t.newValues,"content_category",e.value)}}}),a("label",{attrs:{for:"category-"+e.value}},[a("span",{class:["right floated","placeholder","image",{circular:"music"===e.value}]}),a("strong",[t._v(t._s(e.label))]),a("div",{staticClass:"ui small hidden divider"}),t._v(" "+t._s(e.helpText)+" ")])])})),0)]):t._e(),t.creating&&2!==t.step?t._e():[a("div",{staticClass:"ui required field"},[a("label",{attrs:{for:"channel-name"}},[a("translate",{attrs:{"translate-context":"Content/Channel/*"}},[t._v("Name")])],1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newValues.name,expression:"newValues.name"}],attrs:{type:"text",required:"",placeholder:t.labels.namePlaceholder},domProps:{value:t.newValues.name},on:{input:function(e){e.target.composing||t.$set(t.newValues,"name",e.target.value)}}})]),a("div",{staticClass:"ui required field"},[a("label",{attrs:{for:"channel-username"}},[a("translate",{attrs:{"translate-context":"Content/Channel/*"}},[t._v("Social Network Name")])],1),a("div",{staticClass:"ui left labeled input"},[a("div",{staticClass:"ui basic label"},[t._v("@")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newValues.username,expression:"newValues.username"}],attrs:{type:"text",required:t.creating,disabled:!t.creating,placeholder:t.labels.usernamePlaceholder},domProps:{value:t.newValues.username},on:{input:function(e){e.target.composing||t.$set(t.newValues,"username",e.target.value)}}})]),t.creating?[a("div",{staticClass:"ui small hidden divider"}),a("p",[a("translate",{attrs:{"translate-context":"Content/Channels/Paragraph"}},[t._v("Used in URLs and to follow this channel on the federation. You cannot change it afterwards.")])],1)]:t._e()],2),a("div",{staticClass:"six wide column"},[a("attachment-input",{attrs:{required:!1,"image-class":"podcast"===t.newValues.content_category?"":"circular"},on:{delete:function(e){t.newValues.cover=null}},model:{value:t.newValues.cover,callback:function(e){t.$set(t.newValues,"cover",e)},expression:"newValues.cover"}},[a("translate",{attrs:{slot:"label","translate-context":"Content/Channel/*"},slot:"label"},[t._v("Channel Picture")])],1)],1),a("div",{staticClass:"ui small hidden divider"}),a("div",{staticClass:"ui stackable grid row"},[a("div",{staticClass:"ten wide column"},[a("div",{staticClass:"ui field"},[a("label",{attrs:{for:"channel-tags"}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Tags")])],1),a("tags-selector",{attrs:{id:"channel-tags",required:!1},model:{value:t.newValues.tags,callback:function(e){t.$set(t.newValues,"tags",e)},expression:"newValues.tags"}})],1)]),"podcast"===t.newValues.content_category?a("div",{staticClass:"six wide column"},[a("div",{staticClass:"ui required field"},[a("label",{attrs:{for:"channel-language"}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Language")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.newValues.metadata.language,expression:"newValues.metadata.language"}],staticClass:"ui search selection dropdown",attrs:{name:"channel-language",id:"channel-language",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.newValues.metadata,"language",e.target.multiple?a:a[0])}}},t._l(t.metadataChoices.language,(function(e){return a("option",{domProps:{value:e.value}},[t._v(t._s(e.label))])})),0)])]):t._e()]),a("div",{staticClass:"ui small hidden divider"}),a("div",{staticClass:"ui field"},[a("label",{attrs:{for:"channel-name"}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Description")])],1),a("content-form",{model:{value:t.newValues.description,callback:function(e){t.$set(t.newValues,"description",e)},expression:"newValues.description"}})],1),"podcast"===t.newValues.content_category?a("div",{staticClass:"ui two fields"},[a("div",{staticClass:"ui required field"},[a("label",{attrs:{for:"channel-itunes-category"}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Category")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.newValues.metadata.itunes_category,expression:"newValues.metadata.itunes_category"}],staticClass:"ui dropdown",attrs:{name:"itunes-category",id:"itunes-category",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.newValues.metadata,"itunes_category",e.target.multiple?a:a[0])}}},t._l(t.metadataChoices.itunes_category,(function(e){return a("option",{domProps:{value:e.value}},[t._v(t._s(e.label))])})),0)]),a("div",{staticClass:"ui field"},[a("label",{attrs:{for:"channel-itunes-category"}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Subcategory")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.newValues.metadata.itunes_subcategory,expression:"newValues.metadata.itunes_subcategory"}],staticClass:"ui dropdown",attrs:{name:"itunes-category",id:"itunes-category",disabled:!t.newValues.metadata.itunes_category},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.newValues.metadata,"itunes_subcategory",e.target.multiple?a:a[0])}}},t._l(t.itunesSubcategories,(function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e))])})),0)])]):t._e(),"podcast"===t.newValues.content_category?a("div",{staticClass:"ui two fields"},[a("div",{staticClass:"ui field"},[a("label",{attrs:{for:"channel-itunes-email"}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Owner email")])],1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newValues.metadata.owner_email,expression:"newValues.metadata.owner_email"}],attrs:{name:"channel-itunes-email",id:"channel-itunes-email",type:"email"},domProps:{value:t.newValues.metadata.owner_email},on:{input:function(e){e.target.composing||t.$set(t.newValues.metadata,"owner_email",e.target.value)}}})]),a("div",{staticClass:"ui field"},[a("label",{attrs:{for:"channel-itunes-name"}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Owner name")])],1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newValues.metadata.owner_name,expression:"newValues.metadata.owner_name"}],attrs:{name:"channel-itunes-name",id:"channel-itunes-name",maxlength:"255"},domProps:{value:t.newValues.metadata.owner_name},on:{input:function(e){e.target.composing||t.$set(t.newValues.metadata,"owner_name",e.target.value)}}})])]):t._e(),a("p",[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Used for the itunes:email and itunes:name field required by certain platforms such as Spotify or iTunes.")])],1)]]:a("div",{staticClass:"ui active inverted dimmer"},[a("div",{staticClass:"ui text loader"},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Loading")])],1)])],2)},s=[],i=(a("a4d3"),a("e01a"),a("b0c0"),a("a9e3"),a("d3b7"),a("ac1f"),a("25f0"),a("5319"),a("5530")),r=a("bc3a"),o=a.n(r),l=a("c3b4"),c=a("8352");function u(t){return t.toString().toLowerCase().replace(/\s+/g,"").replace(/[^\w]+/g,"")}var d={props:{object:{type:Object,required:!1,default:null},step:{type:Number,required:!1,default:1}},components:{AttachmentInput:l["a"],TagsSelector:c["a"]},created:function(){this.fetchMetadataChoices()},data:function(){var t={};return this.object&&(t.metadata=Object(i["a"])({},this.object.metadata||{}),t.name=this.object.artist.name,t.description=this.object.artist.description,t.cover=this.object.artist.cover,t.tags=this.object.artist.tags,t.content_category=this.object.artist.content_category,t.username=this.object.actor.preferred_username),{isLoading:!1,errors:[],metadataChoices:null,newValues:{name:t.name||"",username:t.username||"",tags:t.tags||[],description:(t.description||{}).text||"",cover:(t.cover||{}).uuid||null,content_category:t.content_category||"podcast",metadata:t.metadata||{}}}},computed:{creating:function(){return null===this.object},categoryChoices:function(){return[{value:"podcast",label:this.$pgettext("*/*/*","Podcasts"),helpText:this.$pgettext("Content/Channels/Help","Host your episodes and keep your community updated.")},{value:"music",label:this.$pgettext("*/*/*","Artist discography"),helpText:this.$pgettext("Content/Channels/Help","Publish music you make as a nice discography of albums and singles.")}]},itunesSubcategories:function(){for(var t=0;t<this.metadataChoices.itunes_category.length;t++){var e=this.metadataChoices.itunes_category[t];if(e.value===this.newValues.metadata.itunes_category)return e.children||[]}return[]},labels:function(){return{namePlaceholder:this.$pgettext("Content/Channel/Form.Field.Placeholder","Awesome channel name"),usernamePlaceholder:this.$pgettext("Content/Channel/Form.Field.Placeholder","awesomechannelname")}},submittable:function(){var t=this.newValues.name&&this.newValues.username;return"podcast"===this.newValues.content_category&&(t=t&&this.newValues.metadata.itunes_category&&this.newValues.metadata.language),!!t}},methods:{fetchMetadataChoices:function(){var t=this;o.a.get("channels/metadata-choices").then((function(e){t.metadataChoices=e.data}),(function(e){t.errors=e.backendErrors}))},submit:function(){this.isLoading=!0;var t=this,e=this.creating?o.a.post:o.a.patch,a=this.creating?"channels/":"channels/".concat(this.object.uuid),n={name:this.newValues.name,username:this.newValues.username,tags:this.newValues.tags,content_category:this.newValues.content_category,cover:this.newValues.cover,metadata:this.newValues.metadata};this.newValues.description?n.description={content_type:"text/markdown",text:this.newValues.description}:n.description=null,e(a,n).then((function(e){t.isLoading=!1,t.creating?t.$emit("created",e.data):t.$emit("updated",e.data)}),(function(e){t.isLoading=!1,t.errors=e.backendErrors,t.$emit("errored",t.errors)}))}},watch:{"newValues.name":function(t){this.creating&&(this.newValues.username=u(t))},"newValues.metadata.itunes_category":function(t){this.newValues.metadata.itunes_subcategory=null},"newValues.content_category":{handler:function(t){this.$emit("category",t)},immediate:!0},isLoading:{handler:function(t){this.$emit("loading",t)},immediate:!0},submittable:{handler:function(t){this.$emit("submittable",t)},immediate:!0}}},p=d,h=a("2877"),b=Object(h["a"])(p,n,s,!1,null,null,null);e["a"]=b.exports},7156:function(t,e,a){var n=a("861d"),s=a("d2bb");t.exports=function(t,e,a){var i,r;return s&&"function"==typeof(i=e.constructor)&&i!==a&&n(r=i.prototype)&&r!==a.prototype&&s(t,r),t}},"83a3":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{directives:[{name:"title",rawName:"v-title",value:t.labels.title,expression:"labels.title"}],staticClass:"main pusher"},[t.isLoading?a("div",{staticClass:"ui vertical segment"},[a("div",{class:["ui","centered","active","inline","loader"]})]):t._e(),t.object&&!t.isLoading?[a("section",{directives:[{name:"title",rawName:"v-title",value:t.object.artist.name,expression:"object.artist.name"}],staticClass:"ui head vertical stripe segment container"},[a("div",{staticClass:"ui stackable grid"},[a("div",{staticClass:"seven wide column"},[a("div",{staticClass:"ui two column grid"},[a("div",{staticClass:"column"},[t.object.artist.cover?a("img",{staticClass:"huge channel-image",attrs:{alt:"",src:t.$store.getters["instance/absoluteUrl"](t.object.artist.cover.urls.medium_square_crop)}}):a("i",{staticClass:"huge circular inverted users violet icon"})]),a("div",{staticClass:"ui column right aligned"},[t.object.artist.tags&&t.object.artist.tags.length>0?a("tags-list",{attrs:{tags:t.object.artist.tags}}):t._e(),t.object.actor?a("actor-link",{attrs:{avatar:!1,actor:t.object.attributed_to,"display-name":!0}}):t._e(),t.totalTracks>0?[a("div",{staticClass:"ui hidden very small divider"}),"podcast"===t.object.artist.content_category?a("translate",{key:"1",attrs:{"translate-context":"Content/Channel/Paragraph","translate-plural":"%{ count } episodes","translate-n":t.totalTracks,"translate-params":{count:t.totalTracks}}},[t._v(" %{ count } episode ")]):a("translate",{key:"2",attrs:{"translate-context":"*/*/*","translate-params":{count:t.totalTracks},"translate-n":t.totalTracks,"translate-plural":"%{ count } tracks"}},[t._v("%{ count } track")])]:t._e(),t.object.attributed_to.full_username===t.$store.state.auth.fullUsername||t.$store.getters["channels/isSubscribed"](t.object.uuid)?[a("br"),a("translate",{attrs:{"translate-context":"Content/Channel/Paragraph","translate-plural":"%{ count } subscribers","translate-n":t.object.subscriptions_count,"translate-params":{count:t.object.subscriptions_count}}},[t._v("%{ count } subscriber")]),a("br"),a("translate",{attrs:{"translate-context":"Content/Channel/Paragraph","translate-plural":"%{ count } listenings","translate-n":t.object.downloads_count,"translate-params":{count:t.object.downloads_count}}},[t._v("%{ count } listening")])]:t._e(),a("div",{staticClass:"ui hidden small divider"}),a("a",{staticClass:"ui icon small basic button",on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.showSubscribeModal=!0}}},[a("i",{staticClass:"feed icon"})]),a("modal",{staticClass:"tiny",attrs:{show:t.showSubscribeModal},on:{"update:show":function(e){t.showSubscribeModal=e}}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Popup/Channel/Title/Verb"}},[t._v("Subscribe to this channel")])],1),a("div",{staticClass:"scrollable content"},[a("div",{staticClass:"description"},[t.$store.state.auth.authenticated?[a("h3",[a("i",{staticClass:"user icon"}),a("translate",{attrs:{"translate-context":"Content/Channels/Header"}},[t._v("Subscribe on Funkwhale")])],1),a("subscribe-button",{attrs:{channel:t.object},on:{subscribed:function(e){t.object.subscriptions_count+=1},unsubscribed:function(e){t.object.subscriptions_count-=1}}})]:t._e(),t.object.rss_url?[a("h3",[a("i",{staticClass:"feed icon"}),a("translate",{attrs:{"translate-context":"Content/Channels/Header"}},[t._v("Subscribe via RSS")])],1),a("p",[a("translate",{attrs:{"translate-context":"Content/Channels/Label"}},[t._v("Copy-paste the following URL in your favorite podcasting app:")])],1),a("copy-input",{attrs:{value:t.object.rss_url}})]:t._e(),t.object.actor?[a("h3",[a("i",{staticClass:"bell icon"}),a("translate",{attrs:{"translate-context":"Content/Channels/Header"}},[t._v("Subscribe on the Fediverse")])],1),a("p",[a("translate",{attrs:{"translate-context":"Content/Channels/Label"}},[t._v("If you're using Mastodon or other fediverse applications, you can subscribe to this account:")])],1),a("copy-input",{attrs:{value:"@"+t.object.actor.full_username}})]:t._e()],2)]),a("div",{staticClass:"actions"},[a("button",{staticClass:"ui basic deny button"},[a("translate",{attrs:{"translate-context":"*/*/Button.Label/Verb"}},[t._v("Cancel")])],1)])]),a("button",{directives:[{name:"dropdown",rawName:"v-dropdown",value:{direction:"downward"},expression:"{direction: 'downward'}"}],ref:"dropdown",staticClass:"ui right floated pointing dropdown icon small basic button"},[a("i",{staticClass:"ellipsis vertical icon"}),a("div",{staticClass:"menu"},[t.totalTracks>0?a("a",{staticClass:"basic item",attrs:{href:""},on:{click:function(e){e.preventDefault(),t.showEmbedModal=!t.showEmbedModal}}},[a("i",{staticClass:"code icon"}),a("translate",{attrs:{"translate-context":"Content/*/Button.Label/Verb"}},[t._v("Embed")])],1):t._e(),t.object.actor&&t.object.actor.domain!=t.$store.getters["instance/domain"]?a("a",{staticClass:"basic item",attrs:{href:t.object.url,target:"_blank"}},[a("i",{staticClass:"external icon"}),a("translate",{attrs:{"translate-params":{domain:t.object.actor.domain},"translate-context":"Content/*/Button.Label/Verb"}},[t._v("View on %{ domain }")])],1):t._e(),a("div",{staticClass:"divider"}),t._l(t.getReportableObjs({account:t.object.attributed_to,channel:t.object}),(function(e){return a("a",{key:e.target.type+e.target.id,staticClass:"basic item",attrs:{href:""},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.$store.dispatch("moderation/report",e.target)}}},[a("i",{staticClass:"share icon"}),t._v(" "+t._s(e.label)+" ")])})),t.isOwner?[a("div",{staticClass:"divider"}),a("a",{staticClass:"item",attrs:{href:""},on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.showEditModal=!0}}},[a("translate",{attrs:{"translate-context":"*/*/*/Verb"}},[t._v("Edit…")])],1),t.object?a("dangerous-button",{class:["ui",{loading:t.isLoading},"item"],on:{confirm:function(e){return t.remove()}}},[a("translate",{attrs:{"translate-context":"*/*/*/Verb"}},[t._v("Delete…")]),a("p",{attrs:{slot:"modal-header"},slot:"modal-header"},[a("translate",{attrs:{"translate-context":"Popup/Channel/Title"}},[t._v("Delete this Channel?")])],1),a("div",{attrs:{slot:"modal-content"},slot:"modal-content"},[a("p",[a("translate",{attrs:{"translate-context":"Content/Moderation/Paragraph"}},[t._v("The channel will be deleted, as well as any related files and data. This action is irreversible.")])],1)]),a("p",{attrs:{slot:"modal-confirm"},slot:"modal-confirm"},[a("translate",{attrs:{"translate-context":"*/*/*/Verb"}},[t._v("Delete")])],1)],1):t._e()]:t._e(),t.$store.state.auth.availablePermissions["library"]?[a("div",{staticClass:"divider"}),a("router-link",{staticClass:"basic item",attrs:{to:{name:"manage.channels.detail",params:{id:t.object.uuid}}}},[a("i",{staticClass:"wrench icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/Link"}},[t._v("Open in moderation interface")])],1)]:t._e()],2)])],2)]),a("h1",{staticClass:"ui header"},[a("div",{staticClass:"left aligned",attrs:{title:t.object.artist.name}},[t._v(" "+t._s(t.object.artist.name)+" "),a("div",{staticClass:"ui hidden very small divider"}),t.object.actor?a("div",{staticClass:"sub header ellipsis",attrs:{title:t.object.actor.full_username}},[t._v(" "+t._s(t.object.actor.full_username)+" ")]):a("div",{staticClass:"sub header ellipsis"},[a("a",{attrs:{href:t.object.url||t.object.rss_url,rel:"noopener noreferrer",target:"_blank"}},[a("i",{staticClass:"external link icon"}),a("translate",{attrs:{"translate-params":{domain:t.externalDomain},"translate-context":"Content/Channel/Paragraph"}},[t._v("Mirrored from %{ domain }")])],1)])])]),a("div",{staticClass:"header-buttons"},[t.isOwner?a("div",{staticClass:"ui buttons"},[a("button",{staticClass:"ui basic labeled icon button",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.$store.commit("channels/showUploadModal",{show:!0,config:{channel:t.object}})}}},[a("i",{staticClass:"upload icon"}),a("translate",{attrs:{"translate-context":"Content/Channels/Button.Label/Verb"}},[t._v("Upload")])],1)]):t._e(),a("div",{staticClass:"ui buttons"},[a("play-button",{staticClass:"vibrant",attrs:{"is-playable":t.isPlayable,artist:t.object.artist}},[a("translate",{attrs:{"translate-context":"Content/Channels/Button.Label/Verb"}},[t._v("Play")])],1)],1),a("div",{staticClass:"ui buttons"},[a("subscribe-button",{attrs:{channel:t.object},on:{subscribed:function(e){t.object.subscriptions_count+=1},unsubscribed:function(e){t.object.subscriptions_count-=1}}})],1),t.totalTracks>0?a("modal",{attrs:{show:t.showEmbedModal},on:{"update:show":function(e){t.showEmbedModal=e}}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Popup/Artist/Title/Verb"}},[t._v("Embed this artist work on your website")])],1),a("div",{staticClass:"scrolling content"},[a("div",{staticClass:"description"},[a("embed-wizard",{attrs:{type:"artist",id:t.object.artist.id}})],1)]),a("div",{staticClass:"actions"},[a("button",{staticClass:"ui basic deny button"},[a("translate",{attrs:{"translate-context":"*/*/Button.Label/Verb"}},[t._v("Cancel")])],1)])]):t._e(),t.isOwner?a("modal",{attrs:{show:t.showEditModal},on:{"update:show":function(e){t.showEditModal=e}}},[a("h4",{staticClass:"header"},["podcast"===t.object.artist.content_category?a("translate",{key:"1",attrs:{"translate-context":"Content/Channel/*"}},[t._v("Podcast channel")]):a("translate",{key:"2",attrs:{"translate-context":"Content/Channel/*"}},[t._v("Artist channel")])],1),a("div",{staticClass:"scrolling content"},[a("channel-form",{ref:"editForm",attrs:{object:t.object},on:{loading:function(e){t.edit.isLoading=e},submittable:function(e){t.edit.submittable=e},updated:t.fetchData}}),a("div",{staticClass:"ui hidden divider"})],1),a("div",{staticClass:"actions"},[a("button",{staticClass:"ui left floated basic deny button"},[a("translate",{attrs:{"translate-context":"*/*/Button.Label/Verb"}},[t._v("Cancel")])],1),a("button",{class:["ui","primary","confirm",{loading:t.edit.isLoading},"button"],attrs:{disabled:!t.edit.submittable},on:{click:function(e){return e.stopPropagation(),t.$refs.editForm.submit(e)}}},[a("translate",{attrs:{"translate-context":"*/Channels/Button.Label"}},[t._v("Update channel")])],1)])]):t._e()],1),"large"===t.$store.getters["ui/layoutVersion"]?a("div",[a("rendered-description",{attrs:{content:t.object.artist.description,"update-url":"channels/"+t.object.uuid+"/","can-update":!1},on:{updated:function(e){t.object=e}}})],1):t._e()]),a("div",{staticClass:"nine wide column"},[a("div",{staticClass:"ui secondary pointing center aligned menu"},[a("router-link",{staticClass:"item",attrs:{exact:!0,to:{name:"channels.detail",params:{id:t.id}}}},[a("translate",{attrs:{"translate-context":"Content/Channels/Link"}},[t._v("Overview")])],1),a("router-link",{staticClass:"item",attrs:{exact:!0,to:{name:"channels.detail.episodes",params:{id:t.id}}}},[t.isPodcast?a("translate",{key:"1",attrs:{"translate-context":"Content/Channels/*"}},[t._v("All Episodes")]):a("translate",{key:"2",attrs:{"translate-context":"*/*/*"}},[t._v("Tracks")])],1)],1),a("div",{staticClass:"ui hidden divider"}),t.object?a("router-view",{attrs:{object:t.object},on:{"tracks-loaded":function(e){t.totalTracks=e}}}):t._e()],1)])])]:t._e()],2)},s=[],i=(a("4de4"),a("ac1f"),a("5319"),a("96cf"),a("1da1")),r=a("bc3a"),o=a.n(r),l=a("a3e6"),c=a("1e6f"),u=a("9edc"),d=a("21a2"),p=a("404d"),h=a("6b08"),b=a("add5"),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{class:["ui","pink",{inverted:t.isSubscribed},{favorited:t.isSubscribed},"icon","labeled","button"],on:{click:function(e){return e.stopPropagation(),t.toggle(e)}}},[a("i",{staticClass:"heart icon"}),t.isSubscribed?a("translate",{attrs:{"translate-context":"Content/Track/Button.Message"}},[t._v("Unsubscribe")]):a("translate",{attrs:{"translate-context":"Content/Track/*/Verb"}},[t._v("Subscribe")])],1)},f=[],v={props:{channel:{type:Object}},computed:{title:function(){return this.isSubscribed?this.$pgettext("Content/Channel/Button/Verb","Subscribe"):this.$pgettext("Content/Channel/Button/Verb","Unsubscribe")},isSubscribed:function(){return this.$store.getters["channels/isSubscribed"](this.channel.uuid)}},methods:{toggle:function(){this.isSubscribed?this.$emit("unsubscribed"):this.$emit("subscribed"),this.$store.dispatch("channels/toggle",this.channel.uuid)}}},g=v,y=a("2877"),_=Object(y["a"])(g,m,f,!1,null,null,null),C=_.exports,w=a("6eaa"),x={mixins:[b["a"]],props:["id"],components:{PlayButton:l["a"],EmbedWizard:d["a"],Modal:p["default"],TagsList:h["a"],ChannelEntries:c["a"],ChannelSeries:u["a"],SubscribeButton:C,ChannelForm:w["a"]},data:function(){return{isLoading:!0,object:null,totalTracks:0,latestTracks:null,showEmbedModal:!1,showEditModal:!1,showSubscribeModal:!1,edit:{submittable:!1,loading:!1}}},beforeRouteUpdate:function(t,e,a){t.meta.preserveScrollPosition=!0,a()},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.fetchData();case 2:a=t.$store.state.auth.authenticated,a||t.$store.getters["instance/domain"]==t.object.actor.domain||t.$router.push({name:"login",query:{next:t.$route.fullPath}});case 4:case"end":return e.stop()}}),e)})))()},methods:{fetchData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,t.showEditModal=!1,t.edit.isLoading=!1,t.isLoading=!0,n=o.a.get("channels/".concat(t.id),{params:{refresh:"true"}}).then((function(t){if(a.object=t.data,a.id==t.data.uuid&&t.data.actor){var e=t.data.actor;e.is_local?a.$router.replace({name:"channels.detail",params:{id:e.preferred_username}}):a.$router.replace({name:"channels.detail",params:{id:e.full_username}})}o.a.get("tracks",{params:{channel:t.data.uuid,page_size:1,playable:!0,include_channels:!0}}).then((function(t){a.totalTracks=t.data.count,a.isLoading=!1}))})),e.next=7,n;case 7:case"end":return e.stop()}}),e)})))()},remove:function(){var t=this;t.isLoading=!0,o.a.delete("channels/".concat(this.object.uuid)).then((function(e){t.isLoading=!1,t.$emit("deleted"),t.$router.push({name:"profile.overview",params:{username:t.$store.state.auth.username}})}),(function(e){t.isLoading=!1,t.errors=e.backendErrors}))}},computed:{externalDomain:function(){var t=document.createElement("a");return t.href=this.object.url||this.object.rss_url,t.hostname},isOwner:function(){return this.$store.state.auth.authenticated&&this.object.attributed_to.full_username===this.$store.state.auth.fullUsername},isPodcast:function(){return"podcast"===this.object.artist.content_category},labels:function(){return{title:this.$pgettext("*/*/*","Channel")}},contentFilter:function(){var t=this;return this.$store.getters["moderation/artistFilters"]().filter((function(e){return e.target.id===t.object.artist.id}))[0]},isPlayable:function(){return this.totalTracks>0}},watch:{id:function(){this.fetchData()}}},k=x,$=Object(y["a"])(k,n,s,!1,null,null,null);e["default"]=$.exports},"9edc":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._t("default"),a("div",{staticClass:"ui hidden divider"}),t.isLoading?a("div",{staticClass:"ui inverted active dimmer"},[a("div",{staticClass:"ui loader"})]):t._e(),t.isPodcast?t._l(t.objects,(function(t){return a("channel-serie-card",{key:t.id,attrs:{serie:t}})})):a("div",{staticClass:"ui app-cards cards"},t._l(t.objects,(function(t){return a("album-card",{key:t.id,attrs:{album:t}})})),1),t.nextPage?[a("div",{staticClass:"ui hidden divider"}),t.nextPage?a("button",{class:["ui","basic","button"],on:{click:function(e){return t.fetchData(t.nextPage)}}},[a("translate",{attrs:{"translate-context":"*/*/Button,Label"}},[t._v("Show more")])],1):t._e()]:t._e(),t.isLoading||0!==t.objects.length?t._e():[a("empty-state",{attrs:{refresh:!0},on:{refresh:function(e){return t.fetchData("albums/")}}},[a("p",[a("translate",{attrs:{"translate-context":"Content/Channels/*"}},[t._v("You may need to subscribe to this channel to see its contents.")])],1)])]],2)},s=[],i=(a("99af"),a("a9e3"),a("ceb5")),r=a("bc3a"),o=a.n(r),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"channel-serie-card"},[n("div",{staticClass:"two-images"},[t.cover.urls.original?n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.$store.getters["instance/absoluteUrl"](t.cover.urls.medium_square_crop),expression:"$store.getters['instance/absoluteUrl'](cover.urls.medium_square_crop)"}],staticClass:"channel-image",attrs:{alt:""},on:{click:function(e){return t.$router.push({name:"library.albums.detail",params:{id:t.serie.id}})}}}):n("img",{staticClass:"channel-image",attrs:{alt:"",src:a("271e")},on:{click:function(e){return t.$router.push({name:"library.albums.detail",params:{id:t.serie.id}})}}}),t.cover.urls.original?n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.$store.getters["instance/absoluteUrl"](t.cover.urls.medium_square_crop),expression:"$store.getters['instance/absoluteUrl'](cover.urls.medium_square_crop)"}],staticClass:"channel-image",attrs:{alt:""},on:{click:function(e){return t.$router.push({name:"library.albums.detail",params:{id:t.serie.id}})}}}):n("img",{staticClass:"channel-image",attrs:{alt:"",src:a("271e")},on:{click:function(e){return t.$router.push({name:"library.albums.detail",params:{id:t.serie.id}})}}})]),n("div",{staticClass:"content ellipsis"},[n("strong",[n("router-link",{staticClass:"discrete link",attrs:{to:{name:"library.albums.detail",params:{id:t.serie.id}}}},[t._v(" "+t._s(t.serie.title)+" ")])],1),n("div",{staticClass:"description"},[n("translate",{attrs:{"translate-context":"Content/Channel/Paragraph","translate-plural":"%{ count } episodes","translate-n":t.serie.tracks_count,"translate-params":{count:t.serie.tracks_count}}},[t._v(" %{ count } episode ")])],1)]),n("div",{staticClass:"controls"},[n("play-button",{attrs:{"icon-only":!0,"is-playable":!0,"button-classes":["ui","circular","vibrant","icon","button"],album:t.serie}})],1)])},c=[],u=(a("4de4"),a("a3e6")),d={props:["serie"],components:{PlayButton:u["a"]},computed:{cover:function(){if(this.serie.cover)return this.serie.cover},duration:function(){var t=this.serie.uploads.filter((function(t){return t.duration}));return t[0].duration}}},p=d,h=a("2877"),b=Object(h["a"])(p,l,c,!1,null,null,null),m=b.exports,f=a("af03"),v={props:{filters:{type:Object,required:!0},isPodcast:{type:Boolean,default:!0},limit:{type:Number,default:5}},components:{ChannelSerieCard:m,AlbumCard:f["a"]},data:function(){return{objects:[],count:0,isLoading:!1,errors:null,nextPage:null}},created:function(){this.fetchData("albums/")},methods:{fetchData:function(t){if(t){this.isLoading=!0;var e=this,a=i["a"].clone(this.filters);a.page_size=this.limit,a.include_channels=!0,o.a.get(t,{params:a}).then((function(t){e.nextPage=t.data.next,e.isLoading=!1,e.objects=e.objects.concat(t.data.results),e.count=t.data.count}),(function(t){e.isLoading=!1,e.errors=t.backendErrors}))}}}},g=v,y=Object(h["a"])(g,n,s,!1,null,null,null);e["a"]=y.exports},a3e6:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{class:["ui",{tiny:t.discrete},{icon:!t.discrete},{buttons:!t.dropdownOnly&&!t.iconOnly},"play-button component-play-button"],attrs:{title:t.title}},[t.dropdownOnly?t._e():a("button",{class:t.buttonClasses.concat(["ui",{loading:t.isLoading},{mini:t.discrete},{disabled:!t.playable}]),attrs:{disabled:!t.playable,"aria-label":t.labels.replacePlay},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.replacePlay(e)}}},[a("i",{class:[t.playIconClass,"icon"]}),t.discrete||t.iconOnly?t._e():[t._v(" "),t._t("default",[a("translate",{attrs:{"translate-context":"*/Queue/Button.Label/Short, Verb"}},[t._v("Play")])])]],2),t.discrete||t.iconOnly?t._e():a("button",{class:["ui",{disabled:!t.playable&&!t.filterableArtist},"floating","dropdown",{icon:!t.dropdownOnly},{button:!t.dropdownOnly}],on:{click:function(e){e.preventDefault(),t.clicked=!0}}},[a("i",{class:t.dropdownIconClasses.concat(["icon"]),attrs:{title:t.title}}),t.clicked?a("div",{staticClass:"menu"},[a("button",{ref:"add",staticClass:"item basic",attrs:{"data-ref":"add",disabled:!t.playable,title:t.labels.addToQueue},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.add(e)}}},[a("i",{staticClass:"plus icon"}),a("translate",{attrs:{"translate-context":"*/Queue/Dropdown/Button/Label/Short"}},[t._v("Add to queue")])],1),a("button",{ref:"addNext",staticClass:"item basic",attrs:{"data-ref":"addNext",disabled:!t.playable,title:t.labels.playNext},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addNext()}}},[a("i",{staticClass:"step forward icon"}),t._v(t._s(t.labels.playNext)+" ")]),a("button",{ref:"playNow",staticClass:"item basic",attrs:{"data-ref":"playNow",disabled:!t.playable,title:t.labels.playNow},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addNext(!0)}}},[a("i",{staticClass:"play icon"}),t._v(t._s(t.labels.playNow)+" ")]),t.track?a("button",{staticClass:"item basic",attrs:{disabled:!t.playable,title:t.labels.startRadio},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.$store.dispatch("radios/start",{type:"similar",objectId:t.track.id})}}},[a("i",{staticClass:"feed icon"}),a("translate",{attrs:{"translate-context":"*/Queue/Button.Label/Short, Verb"}},[t._v("Start radio")])],1):t._e(),a("div",{staticClass:"divider"}),t.filterableArtist?a("button",{ref:"filterArtist",staticClass:"item basic",attrs:{"data-ref":"filterArtist",disabled:!t.filterableArtist,title:t.labels.hideArtist},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.filterArtist(e)}}},[a("i",{staticClass:"eye slash outline icon"}),a("translate",{attrs:{"translate-context":"*/Queue/Dropdown/Button/Label/Short"}},[t._v("Hide content from this artist")])],1):t._e(),t._l(t.getReportableObjs({track:t.track,album:t.album,artist:t.artist,playlist:t.playlist,account:t.account,channel:t.channel}),(function(e){return a("button",{key:e.target.type+e.target.id,ref:"report"+e.target.type+e.target.id,refInFor:!0,staticClass:"item basic",attrs:{"data-ref":"report"+e.target.type+e.target.id},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.$store.dispatch("moderation/report",e.target)}}},[a("i",{staticClass:"share icon"}),t._v(" "+t._s(e.label)+" ")])}))],2):t._e()])])},s=[],i=(a("4de4"),a("7db0"),a("4160"),a("c975"),a("d81d"),a("d3b7"),a("159b"),a("bc3a")),r=a.n(i),o=a("1157"),l=a.n(o),c=a("add5"),u={mixins:[c["a"]],props:{tracks:{type:Array,required:!1},track:{type:Object,required:!1},account:{type:Object,required:!1},dropdownIconClasses:{type:Array,required:!1,default:function(){return["dropdown"]}},playIconClass:{type:String,required:!1,default:"play icon"},buttonClasses:{type:Array,required:!1,default:function(){return["button"]}},playlist:{type:Object,required:!1},discrete:{type:Boolean,default:!1},dropdownOnly:{type:Boolean,default:!1},iconOnly:{type:Boolean,default:!1},artist:{type:Object,required:!1},album:{type:Object,required:!1},library:{type:Object,required:!1},channel:{type:Object,required:!1},isPlayable:{type:Boolean,required:!1,default:null}},data:function(){return{isLoading:!1,clicked:!1}},computed:{labels:function(){var t;return t=this.track?this.$pgettext("*/Queue/Dropdown/Button/Title","Play track"):this.album?this.$pgettext("*/Queue/Dropdown/Button/Title","Play album"):this.artist?this.$pgettext("*/Queue/Dropdown/Button/Title","Play artist"):this.playlist?this.$pgettext("*/Queue/Dropdown/Button/Title","Play playlist"):this.$pgettext("*/Queue/Dropdown/Button/Title","Play tracks"),{playNow:this.$pgettext("*/Queue/Dropdown/Button/Title","Play now"),addToQueue:this.$pgettext("*/Queue/Dropdown/Button/Title","Add to current queue"),playNext:this.$pgettext("*/Queue/Dropdown/Button/Title","Play next"),startRadio:this.$pgettext("*/Queue/Dropdown/Button/Title","Play similar songs"),report:this.$pgettext("*/Moderation/*/Button/Label,Verb","Report…"),replacePlay:t}},title:function(){return this.playable?this.$pgettext("*/*/Button.Label/Noun","More…"):this.track?this.$pgettext("*/Queue/Button/Title","This track is not available in any library you have access to"):void 0},playable:function(){return!!this.isPlayable||(this.track?this.track.uploads&&this.track.uploads.length>0:this.artist&&this.artist.tracks_count?this.artist.tracks_count>0:this.artist&&this.artist.albums?this.artist.albums.filter((function(t){return!0===t.is_playable})).length>0:!!this.album||!!this.tracks&&this.tracks.filter((function(t){return t.uploads&&t.uploads.length>0})).length>0)},filterableArtist:function(){return this.track?this.track.artist:this.album?this.album.artist:this.artist?this.artist:void 0}},methods:{filterArtist:function(){this.$store.dispatch("moderation/hide",{type:"artist",target:this.filterableArtist})},getTracksPage:function(t,e,a,n){t>10&&a(n);var s=this;e["page_size"]=100,e["page"]=t,e["hidden"]="",e["playable"]="true",n=n||[],r.a.get("tracks/",{params:e}).then((function(i){i.data.results.forEach((function(t){n.push(t)})),i.data.next?s.getTracksPage(t+1,e,a,n):a(n)}))},getPlayableTracks:function(){var t=this;this.isLoading=!0;var e=new Promise((function(e,a){if(t.track)t.track.uploads&&0!==t.track.uploads.length?e([t.track]):r.a.get("tracks/".concat(t.track.id,"/")).then((function(t){e([t.data])}));else if(t.tracks)e(t.tracks);else if(t.playlist){var n="playlists/"+t.playlist.id+"/";r.a.get(n+"tracks/").then((function(a){var n=t.$store.getters["moderation/artistFilters"]().map((function(t){return t.target.id})),s=a.data.results.map((function(t){return t.track}));n.length>0&&(s=s.filter((function(t){var e=n.indexOf(t.artist.id)>-1;return!(e||t.album&&n.indexOf(t.album.artist.id)>-1)}))),e(s)}))}else if(t.artist){var s={artist:t.artist.id,include_channels:"true",ordering:"album__release_date,disc_number,position"};t.getTracksPage(1,s,e)}else if(t.album){var i={album:t.album.id,include_channels:"true",ordering:"disc_number,position"};t.getTracksPage(1,i,e)}else if(t.library){var o={library:t.library.uuid,ordering:"-creation_date"};t.getTracksPage(1,o,e)}}));return e.then((function(e){return setTimeout((function(e){t.isLoading=!1}),250),e.filter((function(t){return t.uploads&&t.uploads.length>0}))}))},add:function(){var t=this;this.getPlayableTracks().then((function(e){t.$store.dispatch("queue/appendMany",{tracks:e}).then((function(){return t.addMessage(e)}))})),l()(t.$el).find(".ui.dropdown").dropdown("hide")},replacePlay:function(){var t=this;t.$store.dispatch("queue/clean"),this.getPlayableTracks().then((function(e){t.$store.dispatch("queue/appendMany",{tracks:e}).then((function(){return t.addMessage(e)}))})),l()(t.$el).find(".ui.dropdown").dropdown("hide")},addNext:function(t){var e=this,a=0===this.$store.state.queue.tracks.length;this.getPlayableTracks().then((function(n){e.$store.dispatch("queue/appendMany",{tracks:n,index:e.$store.state.queue.currentIndex+1}).then((function(){return e.addMessage(n)}));var s=t&&!a;s&&e.$store.dispatch("queue/next")})),l()(e.$el).find(".ui.dropdown").dropdown("hide")},addMessage:function(t){if(!(t.length<1)){var e=this.$npgettext("*/Queue/Message","%{ count } track was added to your queue","%{ count } tracks were added to your queue",t.length);this.$store.commit("ui/addMessage",{content:this.$gettextInterpolate(e,{count:t.length}),date:new Date})}}},watch:{clicked:function(){var t=this,e=this;this.$nextTick((function(){l()(t.$el).find(".ui.dropdown").dropdown({selectOnKeydown:!1,action:function(t,a,n){var s=e.$refs[n.data("ref")];Array.isArray(s)?s[0].click():s.click(),l()(e.$el).find(".ui.dropdown").dropdown("hide")}}),l()(t.$el).find(".ui.dropdown").dropdown("show",(function(){var t=l()(e.$el).find(".ui.dropdown").find(".menu"),a=t.get(0).getBoundingClientRect(),n=(a.left,document.documentElement.clientWidth),s=a.right-n,i=-a.left,r=0;s>0?(r=-s-5,t.css({cssText:"left: ".concat(r,"px !important;")})):i>0&&(r=i+5,t.css({cssText:"right: -".concat(r,"px !important;")}))}))}))}}},d=u,p=a("2877"),h=Object(p["a"])(d,n,s,!1,null,null,null);e["a"]=h.exports},a432:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:[{active:t.currentTrack&&t.isPlaying&&t.entry.id===t.currentTrack.id},"channel-entry-card"]},[n("div",{staticClass:"controls"},[n("play-button",{staticClass:"basic circular icon",attrs:{discrete:!0,"icon-only":!0,"is-playable":!0,"button-classes":["ui","circular","inverted vibrant","icon","button"],track:t.entry}})],1),t.cover&&t.cover.urls.original?n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.$store.getters["instance/absoluteUrl"](t.cover.urls.medium_square_crop),expression:"$store.getters['instance/absoluteUrl'](cover.urls.medium_square_crop)"}],staticClass:"channel-image image",attrs:{alt:""},on:{click:function(e){return t.$router.push({name:"library.tracks.detail",params:{id:t.entry.id}})}}}):"podcast"===t.entry.artist.content_category?n("span",{staticClass:"channel-image image",on:{click:function(e){return t.$router.push({name:"library.tracks.detail",params:{id:t.entry.id}})}}},[t._v("#"+t._s(t.entry.position))]):t.entry.album&&t.entry.album.cover&&t.entry.album.cover.urls.original?n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.$store.getters["instance/absoluteUrl"](t.entry.album.cover.urls.medium_square_crop),expression:"$store.getters['instance/absoluteUrl'](entry.album.cover.urls.medium_square_crop)"}],staticClass:"channel-image image",attrs:{alt:""},on:{click:function(e){return t.$router.push({name:"library.tracks.detail",params:{id:t.entry.id}})}}}):n("img",{staticClass:"channel-image image",attrs:{alt:"",src:a("271e")},on:{click:function(e){return t.$router.push({name:"library.tracks.detail",params:{id:t.entry.id}})}}}),n("div",{staticClass:"ellipsis content"},[n("strong",[n("router-link",{staticClass:"discrete link",attrs:{to:{name:"library.tracks.detail",params:{id:t.entry.id}}}},[t._v(" "+t._s(t.entry.title)+" ")])],1),n("br"),n("human-date",{staticClass:"really discrete",attrs:{date:t.entry.creation_date}})],1),n("div",{staticClass:"meta"},[t.$store.state.auth.authenticated&&t.$store.getters["favorites/isFavorite"](t.entry.id)?[n("track-favorite-icon",{staticClass:"tiny",attrs:{track:t.entry}})]:t._e(),t.duration?n("human-duration",{attrs:{duration:t.duration}}):t._e()],2),n("div",{staticClass:"controls"},[n("play-button",{staticClass:"play-button basic icon",attrs:{"dropdown-only":!0,"is-playable":t.entry.is_playable,"dropdown-icon-classes":["ellipsis","vertical","large really discrete"],track:t.entry}})],1)])},s=[],i=(a("4de4"),a("5530")),r=a("a3e6"),o=a("4389"),l=a("2f62"),c={props:["entry"],components:{PlayButton:r["a"],TrackFavoriteIcon:o["default"]},computed:Object(i["a"])(Object(i["a"])({},Object(l["c"])({currentTrack:"queue/currentTrack"})),{},{isPlaying:function(){return this.$store.state.player.playing},cover:function(){if(this.entry.cover)return this.entry.cover},duration:function(){var t=this.entry.uploads.filter((function(t){return t.duration}));if(t.length>0)return t[0].duration}})},u=c,d=a("2877"),p=Object(d["a"])(u,n,s,!1,null,null,null);e["a"]=p.exports},a9e3:function(t,e,a){"use strict";var n=a("83ab"),s=a("da84"),i=a("94ca"),r=a("6eeb"),o=a("5135"),l=a("c6b6"),c=a("7156"),u=a("c04e"),d=a("d039"),p=a("7c73"),h=a("241c").f,b=a("06cf").f,m=a("9bf2").f,f=a("58a8").trim,v="Number",g=s[v],y=g.prototype,_=l(p(y))==v,C=function(t){var e,a,n,s,i,r,o,l,c=u(t,!1);if("string"==typeof c&&c.length>2)if(c=f(c),e=c.charCodeAt(0),43===e||45===e){if(a=c.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:n=2,s=49;break;case 79:case 111:n=8,s=55;break;default:return+c}for(i=c.slice(2),r=i.length,o=0;o<r;o++)if(l=i.charCodeAt(o),l<48||l>s)return NaN;return parseInt(i,n)}return+c};if(i(v,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var w,x=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof x&&(_?d((function(){y.valueOf.call(a)})):l(a)!=v)?c(new g(C(e)),a,x):C(e)},k=n?h(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),$=0;k.length>$;$++)o(g,w=k[$])&&!o(x,w)&&m(x,w,b(g,w));x.prototype=y,y.constructor=x,r(s,v,x)}},add5:function(t,e,a){"use strict";a("b0c0");var n,s,i={methods:{getReportableObjs:function(t){var e=t.track,a=t.album,n=t.artist,s=t.playlist,i=t.account,r=t.library,o=t.channel,l=[];if(i){var c=this.$pgettext("*/Moderation/*/Verb","Report @%{ username }…");l.push({label:this.$gettextInterpolate(c,{username:i.preferred_username}),target:{type:"account",_obj:i,full_username:i.full_username,label:i.full_username,typeLabel:this.$pgettext("*/*/*/Noun","Account")}}),e&&(a=e.album,n=e.artist)}return e&&(l.push({label:this.$pgettext("*/Moderation/*/Verb","Report this track…"),target:{type:"track",id:e.id,_obj:e,label:e.title,typeLabel:this.$pgettext("*/*/*/Noun","Track")}}),a=e.album,n=e.artist),a&&(l.push({label:this.$pgettext("*/Moderation/*/Verb","Report this album…"),target:{type:"album",id:a.id,label:a.title,_obj:a,typeLabel:this.$pgettext("*/*/*","Album")}}),n||(n=a.artist)),o?l.push({label:this.$pgettext("*/Moderation/*/Verb","Report this channel…"),target:{type:"channel",uuid:o.uuid,label:o.artist.name,_obj:o,typeLabel:this.$pgettext("*/*/*","Channel")}}):n&&l.push({label:this.$pgettext("*/Moderation/*/Verb","Report this artist…"),target:{type:"artist",id:n.id,label:n.name,_obj:n,typeLabel:this.$pgettext("*/*/*/Noun","Artist")}}),s&&l.push({label:this.$pgettext("*/Moderation/*/Verb","Report this playlist…"),target:{type:"playlist",id:s.id,label:s.name,_obj:s,typeLabel:this.$pgettext("*/*/*","Playlist")}}),r&&l.push({label:this.$pgettext("*/Moderation/*/Verb","Report this library…"),target:{type:"library",uuid:r.uuid,label:r.name,_obj:r,typeLabel:this.$pgettext("*/*/*/Noun","Library")}}),l}}},r=i,o=a("2877"),l=Object(o["a"])(r,n,s,!1,null,null,null);e["a"]=l.exports},c31a:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[t.pendingUploads.length>0?a("div",{staticClass:"ui info message"},[t.isSuccessfull?[a("i",{staticClass:"close icon",attrs:{role:"button"},on:{click:function(e){t.pendingUploads=[]}}}),a("h3",{staticClass:"ui header"},[a("translate",{attrs:{"translate-context":"Content/Channel/Header"}},[t._v("Uploads published successfully")])],1),a("p",[a("translate",{attrs:{"translate-context":"Content/Channel/Paragraph"}},[t._v("Processed uploads:")]),t._v(" "+t._s(t.processedUploads.length)+"/"+t._s(t.pendingUploads.length)+" ")],1)]:t.isOver?[a("h3",{staticClass:"ui header"},[a("translate",{attrs:{"translate-context":"Content/Channel/Header"}},[t._v("Some uploads couldn't be published")])],1),a("div",{staticClass:"ui hidden divider"}),t.skippedUploads.length>0?a("router-link",{staticClass:"ui basic button",attrs:{to:{name:"content.libraries.files",query:{q:"status:skipped"}}}},[a("translate",{attrs:{"translate-context":"Content/Channel/Button"}},[t._v("View skipped uploads")])],1):t._e(),t.erroredUploads.length>0?a("router-link",{staticClass:"ui basic button",attrs:{to:{name:"content.libraries.files",query:{q:"status:errored"}}}},[a("translate",{attrs:{"translate-context":"Content/Channel/Button"}},[t._v("View errored uploads")])],1):t._e()]:[a("div",{staticClass:"ui inline right floated active loader"}),a("h3",{staticClass:"ui header"},[a("translate",{attrs:{"translate-context":"Content/Channel/Header"}},[t._v("Uploads are being processed")])],1),a("p",[a("translate",{attrs:{"translate-context":"Content/Channel/Paragraph"}},[t._v("Your uploads are being processed by Funkwhale and will be live very soon.")])],1),a("p",[a("translate",{attrs:{"translate-context":"Content/Channel/Paragraph"}},[t._v("Processed uploads:")]),t._v(" "+t._s(t.processedUploads.length)+"/"+t._s(t.pendingUploads.length)+" ")],1)]],2):t._e(),"small"===t.$store.getters["ui/layoutVersion"]?a("div",[a("rendered-description",{attrs:{content:t.object.artist.description,"update-url":"channels/"+t.object.uuid+"/","can-update":!1}}),a("div",{staticClass:"ui hidden divider"})],1):t._e(),a("channel-entries",{key:String(t.episodesKey)+"entries",attrs:{limit:25,filters:{channel:t.object.uuid,ordering:"-creation_date",page_size:"25"}}},[a("h2",{staticClass:"ui header"},[t.isPodcast?a("translate",{key:"1",attrs:{"translate-context":"Content/Channel/Paragraph"}},[t._v("Latest episodes")]):a("translate",{key:"2",attrs:{"translate-context":"Content/Channel/Paragraph"}},[t._v("Latest tracks")])],1)]),a("div",{staticClass:"ui hidden divider"}),a("channel-series",{key:String(t.seriesKey)+"series",attrs:{filters:t.seriesFilters,"is-podcast":t.isPodcast}},[a("h2",{staticClass:"ui with-actions header"},[t.isPodcast?a("translate",{key:"1",attrs:{"translate-context":"Content/Channel/Paragraph"}},[t._v("Series")]):a("translate",{key:"2",attrs:{"translate-context":"*/*/*"}},[t._v("Albums")]),t.isOwner?a("div",{staticClass:"actions"},[a("a",{on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.$refs.albumModal.show=!0}}},[a("i",{staticClass:"plus icon"}),a("translate",{attrs:{"translate-context":"Content/Profile/Button"}},[t._v("Add new")])],1)]):t._e()],1)]),t.isOwner?a("album-modal",{ref:"albumModal",attrs:{channel:t.object},on:{created:function(e){t.$refs.albumModal.show=!1,t.seriesKey=new Date}}}):t._e()],1)},s=[],i=(a("99af"),a("4de4"),a("4160"),a("159b"),a("2909")),r=(a("96cf"),a("1da1")),o=a("bc3a"),l=a.n(o),c=a("4328"),u=a.n(c),d=a("1e6f"),p=a("9edc"),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("modal",{staticClass:"small",attrs:{show:t.show},on:{"update:show":function(e){t.show=e}}},[a("h4",{staticClass:"header"},["podcasts"===t.channel.content_category?a("translate",{key:"1",attrs:{"translate-context":"Popup/Channels/Title/Verb"}},[t._v("New serie")]):a("translate",{key:"2",attrs:{"translate-context":"Popup/Channels/Title"}},[t._v("New album")])],1),a("div",{staticClass:"scrolling content"},[a("channel-album-form",{ref:"albumForm",attrs:{channel:t.channel},on:{loading:function(e){t.isLoading=e},submittable:function(e){t.submittable=e},created:function(e){return t.$emit("created",e)}}})],1),a("div",{staticClass:"actions"},[a("button",{staticClass:"ui basic cancel button"},[a("translate",{attrs:{"translate-context":"*/*/Button.Label/Verb"}},[t._v("Cancel")])],1),a("button",{class:["ui","primary",{loading:t.isLoading},"button"],attrs:{disabled:!t.submittable},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.$refs.albumForm.submit()}}},[a("translate",{attrs:{"translate-context":"*/*/Button.Label"}},[t._v("Create")])],1)])])},b=[],m=a("404d"),f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{class:["ui",{loading:t.isLoading},"form"],on:{submit:function(t){t.stopPropagation(),t.preventDefault()}}},[t.errors.length>0?a("div",{staticClass:"ui negative message",attrs:{role:"alert"}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Content/*/Error message.Title"}},[t._v("Error while creating")])],1),a("ul",{staticClass:"list"},t._l(t.errors,(function(e){return a("li",[t._v(t._s(e))])})),0)]):t._e(),a("div",{staticClass:"ui required field"},[a("label",{attrs:{for:"album-title"}},[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Title")])],1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.values.title,expression:"values.title"}],attrs:{type:"text"},domProps:{value:t.values.title},on:{input:function(e){e.target.composing||t.$set(t.values,"title",e.target.value)}}})])])},v=[],g=(a("d3b7"),a("ddb0"),a("5530")),y={props:{channel:{type:Object,required:!0}},components:{},data:function(){return{errors:[],isLoading:!1,values:{title:""}}},computed:{submittable:function(){return this.values.title.length>0}},methods:{submit:function(){var t=this;t.isLoading=!0,t.errors=[];var e=Object(g["a"])(Object(g["a"])({},this.values),{},{artist:this.channel.artist.id});return l.a.post("albums/",e).then((function(e){t.isLoading=!1,t.$emit("created")}),(function(e){t.errors=e.backendErrors,t.isLoading=!1}))}},watch:{submittable:function(t){this.$emit("submittable",t)},isLoading:function(t){this.$emit("loading",t)}}},_=y,C=a("2877"),w=Object(C["a"])(_,f,v,!1,null,null,null),x=w.exports,k={props:["channel"],components:{Modal:m["default"],ChannelAlbumForm:x},data:function(){return{isLoading:!1,submittable:!1,show:!1}},watch:{show:function(){this.isLoading=!1,this.submittable=!1}}},$=k,j=Object(C["a"])($,h,b,!1,null,null,null),P=j.exports,V={props:["object"],components:{ChannelEntries:d["a"],ChannelSeries:p["a"],AlbumModal:P},data:function(){return{seriesKey:new Date,episodesKey:new Date,pendingUploads:[]}},created:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isOwner){e.next=4;break}return e.next=3,t.fetchPendingUploads();case 3:t.$store.commit("ui/addWebsocketEventHandler",{eventName:"import.status_updated",id:"fileUploadChannel",handler:t.handleImportEvent});case 4:case"end":return e.stop()}}),e)})))()},destroyed:function(){this.$store.commit("ui/removeWebsocketEventHandler",{eventName:"import.status_updated",id:"fileUploadChannel"})},computed:{isPodcast:function(){return"podcast"===this.object.artist.content_category},isOwner:function(){return this.$store.state.auth.authenticated&&this.object.attributed_to.full_username===this.$store.state.auth.fullUsername},seriesFilters:function(){var t={artist:this.object.artist.id,ordering:"-creation_date"};return this.isOwner||(t.playable="true"),t},processedUploads:function(){return this.pendingUploads.filter((function(t){return"pending"!=t.import_status}))},erroredUploads:function(){return this.pendingUploads.filter((function(t){return"errored"===t.import_status}))},skippedUploads:function(){return this.pendingUploads.filter((function(t){return"skipped"===t.import_status}))},finishedUploads:function(){return this.pendingUploads.filter((function(t){return"finished"===t.import_status}))},pendingUploadsById:function(){var t={};return this.pendingUploads.forEach((function(e){t[e.uuid]=e})),t},isOver:function(){return this.pendingUploads&&this.processedUploads.length===this.pendingUploads.length},isSuccessfull:function(){return this.pendingUploads&&this.finishedUploads.length===this.pendingUploads.length}},methods:{handleImportEvent:function(t){this.pendingUploadsById[t.upload.uuid]&&Object.assign(this.pendingUploadsById[t.upload.uuid],t.upload)},fetchPendingUploads:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("uploads/",{params:{channel:t.object.uuid,import_status:["pending","skipped","errored"],include_channels:"true"},paramsSerializer:function(t){return u.a.stringify(t,{indices:!1})}});case 2:a=e.sent,t.pendingUploads=a.data.results;case 4:case"end":return e.stop()}}),e)})))()}},watch:{"$store.state.channels.latestPublication":function(t){t&&t.uploads&&t.channel.uuid===this.object.uuid&&(this.pendingUploads=[].concat(Object(i["a"])(this.pendingUploads),Object(i["a"])(t.uploads)))},isOver:function(t){t&&(this.seriesKey=new Date,this.episodesKey=new Date)}}},L=V,T=Object(C["a"])(L,n,s,!1,null,null,null);e["default"]=T.exports},c3b4:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui form"},[t.errors.length>0?a("div",{staticClass:"ui negative message",attrs:{role:"alert"}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Content/*/Error message.Title"}},[t._v("Your attachment cannot be saved")])],1),a("ul",{staticClass:"list"},t._l(t.errors,(function(e){return a("li",[t._v(t._s(e))])})),0)]):t._e(),a("div",{staticClass:"ui field"},[a("span",{attrs:{id:"avatarLabel"}},[t._t("label")],2),a("div",{staticClass:"ui stackable grid row"},[a("div",{staticClass:"three wide column"},[t.value&&t.value===t.initialValue?a("img",{class:["ui",t.imageClass,"image"],attrs:{alt:"",src:t.$store.getters["instance/absoluteUrl"]("api/v1/attachments/"+t.value+"/proxy?next=medium_square_crop")}}):t.attachment?a("img",{class:["ui",t.imageClass,"image"],attrs:{alt:"",src:t.$store.getters["instance/absoluteUrl"]("api/v1/attachments/"+t.attachment.uuid+"/proxy?next=medium_square_crop")}}):a("div",{class:["ui",t.imageClass,"static","large placeholder image"]})]),a("div",{staticClass:"eleven wide column"},[a("div",{staticClass:"file-input"},[a("label",{attrs:{for:t.attachmentId}},[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Upload New Picture…")])],1),a("input",{ref:"attachment",staticClass:"ui input",attrs:{type:"file",id:t.attachmentId,accept:"image/x-png,image/jpeg"},on:{change:t.submit}})]),a("div",{staticClass:"ui very small hidden divider"}),a("p",[a("translate",{attrs:{"translate-context":"Content/*/Paragraph"}},[t._v("PNG or JPG. Dimensions should be between 1400x1400px and 3000x3000px. Maximum file size allowed is 5MB.")])],1),t.value?a("button",{staticClass:"ui basic tiny button",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.remove(t.value)}}},[a("translate",{attrs:{"translate-context":"Content/Radio/Button.Label/Verb"}},[t._v("Remove")])],1):t._e(),t.isLoading?a("div",{staticClass:"ui active inverted dimmer"},[a("div",{staticClass:"ui indeterminate text loader"},[a("translate",{attrs:{"translate-context":"Content/*/*/Noun"}},[t._v("Uploading file…")])],1)]):t._e()])])])])},s=[],i=(a("d3b7"),a("25f0"),a("bc3a")),r=a.n(i),o={props:{value:{},imageClass:{default:"",required:!1}},data:function(){return{attachment:null,isLoading:!1,errors:[],initialValue:this.value,attachmentId:Math.random().toString(36).substring(7)}},methods:{submit:function(){var t=this;this.isLoading=!0,this.errors=[];var e=this;this.file=this.$refs.attachment.files[0];var a=new FormData;a.append("file",this.file),r.a.post("attachments/",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(a){t.isLoading=!1,e.attachment=a.data,e.$emit("input",e.attachment.uuid)}),(function(t){e.isLoading=!1,e.errors=t.backendErrors}))},remove:function(t){var e=this;this.isLoading=!0,this.errors=[];var a=this;r.a.delete("attachments/".concat(t,"/")).then((function(t){e.isLoading=!1,a.attachment=null,a.$emit("delete")}),(function(t){a.isLoading=!1,a.errors=t.backendErrors}))}},watch:{value:function(t){this.attachment&&t===this.initialValue&&this.remove(this.attachment.uuid)}}},l=o,c=a("2877"),u=Object(c["a"])(l,n,s,!1,null,null,null);e["a"]=u.exports}}]);