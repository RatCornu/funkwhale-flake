(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["playlists"],{1613:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",[t.isLoading?a("div",{directives:[{name:"title",rawName:"v-title",value:t.labels.playlist,expression:"labels.playlist"}],staticClass:"ui vertical segment"},[a("div",{class:["ui","centered","active","inline","loader"]})]):t._e(),!t.isLoading&&t.playlist?a("section",{directives:[{name:"title",rawName:"v-title",value:t.playlist.name,expression:"playlist.name"}],staticClass:"ui head vertical center aligned stripe segment"},[a("div",{staticClass:"segment-content"},[a("h2",{staticClass:"ui center aligned icon header"},[a("i",{staticClass:"circular inverted list warning icon"}),a("div",{staticClass:"content"},[t._v(" "+t._s(t.playlist.name)+" "),a("div",{staticClass:"sub header"},[a("translate",{attrs:{"translate-plural":"Playlist containing %{ count } tracks, by %{ username }","translate-n":t.playlist.tracks_count,"translate-params":{count:t.playlist.tracks_count,username:t.playlist.user.username},"translate-context":"Content/Playlist/Header.Subtitle"}},[t._v(" Playlist containing %{ count } track, by %{ username } ")]),a("br"),a("duration",{attrs:{seconds:t.playlist.duration}})],1)])]),a("div",{staticClass:"ui hidden divider"}),a("play-button",{staticClass:"vibrant",attrs:{"is-playable":t.playlist.is_playable,tracks:t.tracks}},[a("translate",{attrs:{"translate-context":"Content/Queue/Button.Label/Short, Verb"}},[t._v("Play all")])],1),t.$store.state.auth.profile&&t.playlist.user.id===t.$store.state.auth.profile.id?a("button",{staticClass:"ui icon labeled button",on:{click:function(e){t.edit=!t.edit}}},[a("i",{staticClass:"pencil icon"}),t.edit?[a("translate",{attrs:{"translate-context":"Content/Playlist/Button.Label/Verb"}},[t._v("Stop Editing")])]:[a("translate",{attrs:{"translate-context":"Content/*/Button.Label/Verb"}},[t._v("Edit")])]],2):t._e(),"everyone"===t.playlist.privacy_level&&t.playlist.is_playable?a("button",{staticClass:"ui icon labeled button",on:{click:function(e){t.showEmbedModal=!t.showEmbedModal}}},[a("i",{staticClass:"code icon"}),a("translate",{attrs:{"translate-context":"Content/*/Button.Label/Verb"}},[t._v("Embed")])],1):t._e(),t.$store.state.auth.profile&&t.playlist.user.id===t.$store.state.auth.profile.id?a("dangerous-button",{staticClass:"ui labeled danger icon button",attrs:{action:t.deletePlaylist}},[a("i",{staticClass:"trash icon"}),t._v(" "),a("translate",{attrs:{"translate-context":"*/*/*/Verb"}},[t._v("Delete")]),a("p",{directives:[{name:"translate",rawName:"v-translate",value:{playlist:t.playlist.name},expression:"{playlist: playlist.name}"}],attrs:{slot:"modal-header","translate-context":"Popup/Playlist/Title/Call to action","translate-params":{playlist:t.playlist.name}},slot:"modal-header"},[t._v(' Do you want to delete the playlist "%{ playlist }"? ')]),a("p",{attrs:{slot:"modal-content"},slot:"modal-content"},[a("translate",{attrs:{"translate-context":"Popup/Playlist/Paragraph"}},[t._v("This will completely delete this playlist and cannot be undone.")])],1),a("div",{attrs:{slot:"modal-confirm"},slot:"modal-confirm"},[a("translate",{attrs:{"translate-context":"Popup/Playlist/Button.Label/Verb"}},[t._v("Delete playlist")])],1)],1):t._e()],1),"everyone"===t.playlist.privacy_level&&t.playlist.is_playable?a("modal",{attrs:{show:t.showEmbedModal},on:{"update:show":function(e){t.showEmbedModal=e}}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Popup/Album/Title/Verb"}},[t._v("Embed this playlist on your website")])],1),a("div",{staticClass:"scrolling content"},[a("div",{staticClass:"description"},[a("embed-wizard",{attrs:{type:"playlist",id:t.playlist.id}})],1)]),a("div",{staticClass:"actions"},[a("button",{staticClass:"ui basic deny button"},[a("translate",{attrs:{"translate-context":"*/*/Button.Label/Verb"}},[t._v("Cancel")])],1)])]):t._e()],1):t._e(),a("section",{staticClass:"ui vertical stripe segment"},[t.edit?[a("playlist-editor",{attrs:{playlist:t.playlist,"playlist-tracks":t.playlistTracks},on:{"playlist-updated":function(e){t.playlist=e},"tracks-updated":t.updatePlts}})]:t.tracks.length>0?[a("h2",[a("translate",{attrs:{"translate-context":"*/*/*"}},[t._v("Tracks")])],1),a("track-table",{attrs:{"display-position":!0,tracks:t.tracks}})]:a("div",{staticClass:"ui placeholder segment"},[a("div",{staticClass:"ui icon header"},[a("i",{staticClass:"list icon"}),a("translate",{attrs:{"translate-context":"Content/Home/Placeholder"}},[t._v("There are no tracks in this playlist yet")])],1),a("button",{staticClass:"ui success icon labeled button",on:{click:function(e){t.edit=!t.edit}}},[a("i",{staticClass:"pencil icon"}),a("translate",{attrs:{"translate-context":"Content/Home/CreatePlaylist"}},[t._v("Edit")])],1)])],2)])},i=[],n=(a("d81d"),a("bc3a")),r=a.n(n),l=a("5a65"),o=a("d4fd"),c=a("a3e6"),u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ui text container component-playlist-editor"},[s("playlist-form",{attrs:{title:!1,playlist:t.playlist},on:{updated:function(e){return t.$emit("playlist-updated",e)}}}),s("h3",{staticClass:"ui top attached header"},[s("translate",{attrs:{"translate-context":"Content/Playlist/Title"}},[t._v("Playlist editor")])],1),s("div",{staticClass:"ui attached segment"},["loading"===t.status?[s("div",{staticClass:"ui active tiny inline loader"}),s("translate",{attrs:{"translate-context":"Content/Playlist/Paragraph"}},[t._v("Syncing changes to serverâ€¦")])]:"errored"===t.status?[s("i",{staticClass:"dangerclose icon"}),s("translate",{attrs:{"translate-context":"Content/Playlist/Error message.Title"}},[t._v("An error occurred while saving your changes")]),t.errors.length>0?s("div",{staticClass:"ui negative message",attrs:{role:"alert"}},[s("ul",{staticClass:"list"},t._l(t.errors,(function(e){return s("li",[t._v(t._s(e))])})),0)]):t._e()]:"confirmDuplicateAdd"===t.status?s("div",{staticClass:"ui warning message",attrs:{role:"alert"}},[s("p",{directives:[{name:"translate",rawName:"v-translate",value:{playlist:t.playlist.name},expression:"{playlist: playlist.name}"}],attrs:{"translate-context":"Content/Playlist/Paragraph"}},[t._v("Some tracks in your queue are already in this playlist:")]),s("ul",{staticClass:"ui relaxed divided list duplicate-tracks-list"},t._l(t.duplicateTrackAddInfo.tracks,(function(e){return s("li",{staticClass:"ui item"},[t._v(t._s(e))])})),0),s("button",{staticClass:"ui small success button",on:{click:function(e){return t.insertMany(t.queueTracks,!0)}}},[s("translate",{attrs:{"translate-context":"*/Playlist/Button.Label/Verb"}},[t._v("Add anyways")])],1)]):"saved"===t.status?[s("i",{staticClass:"success check icon"}),t._v(" "),s("translate",{attrs:{"translate-context":"Content/Playlist/Paragraph"}},[t._v("Changes synced with server")])]:t._e()],2),s("div",{staticClass:"ui bottom attached segment"},[s("button",{class:["ui",{disabled:0===t.queueTracks.length},"labeled","icon","button"],attrs:{disabled:0===t.queueTracks.length,title:t.labels.copyTitle},on:{click:function(e){return t.insertMany(t.queueTracks,!1)}}},[s("i",{staticClass:"plus icon"}),s("translate",{attrs:{"translate-context":"Content/Playlist/Button.Label/Verb","translate-plural":"Insert from queue (%{ count } tracks)","translate-n":t.queueTracks.length,"translate-params":{count:t.queueTracks.length}}},[t._v(" Insert from queue (%{ count } track) ")])],1),s("dangerous-button",{staticClass:"ui labeled right floated danger icon button",attrs:{disabled:0===t.plts.length,action:t.clearPlaylist}},[s("i",{staticClass:"eraser icon"}),t._v(" "),s("translate",{attrs:{"translate-context":"*/Playlist/Button.Label/Verb"}},[t._v("Clear playlist")]),s("p",{directives:[{name:"translate",rawName:"v-translate",value:{playlist:t.playlist.name},expression:"{playlist: playlist.name}"}],attrs:{slot:"modal-header","translate-context":"Popup/Playlist/Title","translate-params":{playlist:t.playlist.name}},slot:"modal-header"},[t._v(' Do you want to clear the playlist "%{ playlist }"? ')]),s("p",{attrs:{slot:"modal-content"},slot:"modal-content"},[s("translate",{attrs:{"translate-context":"Popup/Playlist/Paragraph"}},[t._v("This will remove all tracks from this playlist and cannot be undone.")])],1),s("div",{attrs:{slot:"modal-confirm"},slot:"modal-confirm"},[s("translate",{attrs:{"translate-context":"*/Playlist/Button.Label/Verb"}},[t._v("Clear playlist")])],1)],1),s("div",{staticClass:"ui hidden divider"}),t.plts.length>0?[s("p",[s("translate",{attrs:{"translate-context":"Content/Playlist/Paragraph/Call to action"}},[t._v("Drag and drop rows to reorder tracks in the playlist")])],1),s("div",{staticClass:"table-wrapper"},[s("table",{staticClass:"ui compact very basic unstackable table"},[s("draggable",{attrs:{tag:"tbody"},on:{update:t.reorder},model:{value:t.plts,callback:function(e){t.plts=e},expression:"plts"}},t._l(t.plts,(function(e,i){return s("tr",{key:i+"-"+e.track.id},[s("td",{staticClass:"left aligned"},[t._v(t._s(e.index+1))]),s("td",{staticClass:"center aligned"},[e.track.album&&e.track.album.cover&&e.track.album.cover.urls.original?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.$store.getters["instance/absoluteUrl"](e.track.album.cover.urls.medium_square_crop),expression:"$store.getters['instance/absoluteUrl'](plt.track.album.cover.urls.medium_square_crop)"}],staticClass:"ui mini image",attrs:{alt:""}}):s("img",{staticClass:"ui mini image",attrs:{alt:"",src:a("271e")}})]),s("td",{attrs:{colspan:"4"}},[s("strong",[t._v(t._s(e.track.title))]),s("br"),t._v(" "+t._s(e.track.artist.name)+" ")]),s("td",{staticClass:"right aligned"},[s("button",{staticClass:"ui circular danger basic icon button"},[s("i",{staticClass:"trash icon",on:{click:function(e){return e.stopPropagation(),t.removePlt(i)}}})])])])})),0)],1)])]:t._e()],2)],1)},d=[],p=(a("4160"),a("a434"),a("159b"),a("5530")),h=a("2f62"),g=a("b910"),m=a("310e"),y=a.n(m),v={components:{draggable:y.a,PlaylistForm:g["a"]},props:["playlist","playlistTracks"],data:function(){return{plts:this.playlistTracks,isLoading:!1,errors:[],duplicateTrackAddInfo:{},showDuplicateTrackAddConfirmation:!1}},methods:{success:function(){this.isLoading=!1,this.errors=[],this.showDuplicateTrackAddConfirmation=!1},errored:function(t){this.isLoading=!1,1==t.length&&"tracks_already_exist_in_playlist"==t[0].code?(this.duplicateTrackAddInfo=t[0],this.showDuplicateTrackAddConfirmation=!0):this.errors=t},reorder:function(t){var e=t.oldIndex,a=t.newIndex,s=this;s.isLoading=!0;this.plts[a];var i="playlists/".concat(this.playlist.id,"/move");r.a.post(i,{from:e,to:a}).then((function(t){s.success()}),(function(t){s.errored(t.backendErrors)}))},removePlt:function(t){this.plts.splice(t,1);var e=this;e.isLoading=!0;var a="playlists/".concat(this.playlist.id,"/remove");r.a.post(a,{index:t}).then((function(t){e.success(),e.$store.dispatch("playlists/fetchOwn")}),(function(t){e.errored(t.backendErrors)}))},clearPlaylist:function(){this.plts=[];var t=this;t.isLoading=!0;var e="playlists/"+this.playlist.id+"/clear";r.a.delete(e).then((function(e){t.success(),t.$store.dispatch("playlists/fetchOwn")}),(function(e){t.errored(e.backendErrors)}))},insertMany:function(t,e){var a=this,s=t.map((function(t){return t.id})),i={tracks:s,allow_duplicates:e};a.isLoading=!0;var n="playlists/"+this.playlist.id+"/add/";r.a.post(n,i).then((function(t){t.data.results.forEach((function(t){a.plts.push(t)})),a.success(),a.$store.dispatch("playlists/fetchOwn")}),(function(t){t.rawPayload.playlist?a.errored(t.rawPayload.playlist.non_field_errors):a.errored(t.backendErrors)}))}},computed:Object(p["a"])(Object(p["a"])({},Object(h["d"])({queueTracks:function(t){return t.queue.tracks}})),{},{labels:function(){return{copyTitle:this.$pgettext("Content/Playlist/Button.Tooltip/Verb","Copy queued tracks to playlist")}},status:function(){return this.isLoading?"loading":this.errors.length>0?"errored":this.showDuplicateTrackAddConfirmation?"confirmDuplicateAdd":"saved"}}),watch:{plts:{handler:function(t){t.forEach((function(t,e){t.index=e})),this.$emit("tracks-updated",t)},deep:!0}}},b=v,f=a("2877"),C=Object(f["a"])(b,u,d,!1,null,null,null),x=C.exports,_=a("21a2"),P=a("404d"),w={props:{id:{required:!0},defaultEdit:{type:Boolean,default:!1}},components:{PlaylistEditor:x,TrackTable:l["a"],PlayButton:c["a"],RadioButton:o["a"],Modal:P["default"],EmbedWizard:_["a"]},data:function(){return{edit:this.defaultEdit,isLoading:!1,playlist:null,tracks:[],playlistTracks:[],showEmbedModal:!1}},created:function(){this.fetch()},computed:{labels:function(){return{playlist:this.$pgettext("*/*/*","Playlist")}}},methods:{updatePlts:function(t){this.playlistTracks=t,this.tracks=t.map((function(t,e){var a=t.track;return a.position=e+1,a}))},fetch:function(){var t=this;t.isLoading=!0;var e="playlists/"+this.id+"/";r.a.get(e).then((function(a){t.playlist=a.data,r.a.get(e+"tracks/").then((function(e){t.updatePlts(e.data.results)})).then((function(){t.isLoading=!1}))}))},deletePlaylist:function(){var t=this,e="playlists/"+this.id+"/";r.a.delete(e).then((function(e){t.$store.dispatch("playlists/fetchOwn"),t.$router.push({path:"/library"})}))}}},$=w,k=Object(f["a"])($,s,i,!1,null,null,null);e["default"]=k.exports},1799:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.maxPage>1?a("div",{staticClass:"ui pagination menu component-pagination",attrs:{role:"navigation","aria-label":t.labels.pagination}},[a("a",{class:[{disabled:t.current-1<1},"item"],attrs:{href:"",disabled:t.current-1<1,role:"button","aria-label":t.labels.previousPage},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.selectPage(t.current-1)}}},[a("i",{staticClass:"angle left icon"})]),t.compact?t._e():t._l(t.pages,(function(e){return"skip"!==e?a("a",{class:[{active:e===t.current},"item"],attrs:{href:""},on:{click:function(a){return a.preventDefault(),a.stopPropagation(),t.selectPage(e)}}},[t._v(" "+t._s(e)+" ")]):a("div",{staticClass:"disabled item"},[t._v(" â€¦ ")])})),a("a",{class:[{disabled:t.current+1>t.maxPage},"item"],attrs:{href:"",disabled:t.current+1>t.maxPage,role:"button","aria-label":t.labels.nextPage},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.selectPage(t.current+1)}}},[a("i",{staticClass:"angle right icon"})])],2):t._e()},i=[],n=(a("99af"),a("4160"),a("fb6a"),a("a9e3"),a("159b"),a("ceb5")),r={props:{current:{type:Number,default:1},paginateBy:{type:Number,default:25},total:{type:Number},compact:{type:Boolean,default:!1}},computed:{labels:function(){return{pagination:this.$pgettext("Content/*/Hidden text/Noun","Pagination"),previousPage:this.$pgettext("Content/*/Link","Previous Page"),nextPage:this.$pgettext("Content/*/Link","Next Page")}},pages:function(){var t=2,e=this.current,a=n["a"].range(1,Math.min(this.maxPage,1+t)),s=n["a"].range(Math.max(1,e-t+1),Math.min(this.maxPage,e+t)),i=n["a"].range(this.maxPage,Math.max(1,this.maxPage-t)),r=a.concat(s,i);r=n["a"].uniq(r),r=n["a"].sortBy(r,[function(t){return t}]);var l=[];return r.forEach((function(t){var e=l.slice(-1)[0],a=!0;a="skip"!==e&&(!e||e+1===t),a?l.push(t):"skip"!==t&&(l.push("skip"),l.push(t))})),l},maxPage:function(){return Math.ceil(this.total/this.paginateBy)}},methods:{selectPage:function(t){t>this.maxPage||t<1||this.current!==t&&this.$emit("page-changed",t)}}},l=r,o=a("2877"),c=Object(o["a"])(l,s,i,!1,null,null,null);e["a"]=c.exports},"20be":function(t,e,a){"use strict";a("a15b"),a("fb6a"),a("b0c0"),a("ac1f"),a("1276");var s,i,n={props:{defaultOrdering:{type:String,required:!1},orderingConfigName:{type:String,required:!1}},computed:{orderingConfig:function(){return this.$store.state.ui.routePreferences[this.orderingConfigName||this.$route.name]},paginateBy:{set:function(t){this.$store.commit("ui/paginateBy",{route:this.$route.name,value:t})},get:function(){return this.orderingConfig.paginateBy}},ordering:{set:function(t){this.$store.commit("ui/ordering",{route:this.$route.name,value:t})},get:function(){return this.orderingConfig.ordering}},orderingDirection:{set:function(t){this.$store.commit("ui/orderingDirection",{route:this.$route.name,value:t})},get:function(){return this.orderingConfig.orderingDirection}}},methods:{getOrderingFromString:function(t){var e=t.split("-");return e.length>1?{direction:"-",field:e.slice(1).join("-")}:{direction:"+",field:t}},getOrderingAsString:function(){var t=this.orderingDirection;return"+"===t&&(t=""),[t,this.ordering].join("")}}},r=n,l=a("2877"),o=Object(l["a"])(r,s,i,!1,null,null,null);e["a"]=o.exports},"21a2":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.anonymousCanListen?t._e():a("div",{staticClass:"ui warning message",attrs:{role:"alert"}},[a("p",[a("strong",[a("translate",{attrs:{"translate-context":"Content/Embed/Message"}},[t._v("Sharing will not work because this pod doesn't allow anonymous users to access content.")])],1)]),a("p",[a("translate",{attrs:{"translate-context":"Content/Embed/Message"}},[t._v("Please contact your admins and ask them to update the corresponding setting.")])],1)]),a("div",{staticClass:"ui form"},[a("div",{staticClass:"two fields"},[a("div",{staticClass:"field"},[a("div",{staticClass:"field"},[a("label",{attrs:{for:"embed-width"}},[a("translate",{attrs:{"translate-context":"Popup/Embed/Input.Label"}},[t._v("Widget width")])],1),a("p",[a("translate",{attrs:{"translate-context":"Popup/Embed/Paragraph"}},[t._v("Leave empty for a responsive widget")])],1),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.width,expression:"width",modifiers:{number:!0}}],attrs:{id:"embed-width",type:"number",min:"0",step:"10"},domProps:{value:t.width},on:{input:function(e){e.target.composing||(t.width=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),"track"!=t.type?[a("br"),a("div",{staticClass:"field"},[a("label",{attrs:{for:"embed-height"}},[a("translate",{attrs:{"translate-context":"Popup/Embed/Input.Label"}},[t._v("Widget height")])],1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.height,expression:"height"}],attrs:{id:"embed-height",type:"number",min:t.minHeight,max:"1000",step:"10"},domProps:{value:t.height},on:{input:function(e){e.target.composing||(t.height=e.target.value)}}})])]:t._e()],2),a("div",{staticClass:"field"},[a("button",{staticClass:"ui right accent labeled icon floated button",on:{click:t.copy}},[a("i",{staticClass:"copy icon"}),a("translate",{attrs:{"translate-context":"*/*/Button.Label/Short, Verb"}},[t._v("Copy")])],1),a("label",{attrs:{for:"embed-width"}},[a("translate",{attrs:{"translate-context":"Popup/Embed/Input.Label/Noun"}},[t._v("Embed code")])],1),a("p",[a("translate",{attrs:{"translate-context":"Popup/Embed/Paragraph"}},[t._v("Copy/paste this code in your website HTML")])],1),a("textarea",{ref:"textarea",attrs:{rows:"5",readonly:""},domProps:{value:t.embedCode}}),a("div",{staticClass:"ui right"},[t.copied?a("p",{staticClass:"message"},[a("translate",{attrs:{"translate-context":"Content/*/Paragraph"}},[t._v("Text copied to clipboard!")])],1):t._e()])])])]),a("div",{staticClass:"preview"},[a("h3",[a("a",{attrs:{href:t.iframeSrc,target:"_blank"}},[a("translate",{attrs:{"translate-context":"Popup/Embed/Title/Noun"}},[t._v("Preview")])],1)]),a("iframe",{attrs:{width:t.frameWidth,height:t.height,scrolling:"no",frameborder:"no",src:t.iframeSrc}})])])},i=[],n=(a("99af"),a("ac1f"),a("5319"),a("2ca0"),a("5530")),r=a("2f62"),l=a("ceb5"),o={props:["type","id"],data:function(){var t={width:null,height:150,minHeight:100,copied:!1};return"album"!==this.type&&"artist"!==this.type&&"playlist"!==this.type||(t.height=330,t.minHeight=250),t},computed:Object(n["a"])(Object(n["a"])({},Object(r["d"])({nodeinfo:function(t){return t.instance.nodeinfo}})),{},{anonymousCanListen:function(){return l["a"].get(this.nodeinfo,"metadata.library.anonymousCanListen",!1)},iframeSrc:function(){var t="/front/";t.startsWith("/")&&(t="".concat(window.location.protocol,"//").concat(window.location.host).concat(t));var e=this.$store.state.instance.instanceUrl,a="";return window.location.href.startsWith(e)||(a="&b=".concat(e)),"".concat(t,"embed.html?&type=").concat(this.type,"&id=").concat(this.id).concat(a)},frameWidth:function(){return this.width?this.width:"100%"},embedCode:function(){var t=this.iframeSrc.replace(/&/g,"&amp;");return'<iframe width="'.concat(this.frameWidth,'" height="').concat(this.height,'" scrolling="no" frameborder="no" src="').concat(t,'"></iframe>')}}),methods:{copy:function(){this.$refs.textarea.select(),document.execCommand("Copy");var t=this;t.copied=!0,this.timeout=setTimeout((function(){t.copied=!1}),5e3)}}},c=o,u=a("2877"),d=Object(u["a"])(c,s,i,!1,null,null,null);e["a"]=d.exports},2674:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{directives:[{name:"title",rawName:"v-title",value:t.labels.playlists,expression:"labels.playlists"}]},[a("section",{staticClass:"ui vertical stripe segment"},[a("h2",{staticClass:"ui header"},[a("translate",{attrs:{"translate-context":"Content/Playlist/Title"}},[t._v("Browsing playlists")])],1),t.$store.state.auth.authenticated?[a("button",{staticClass:"ui success button",on:{click:function(e){return t.$store.commit("playlists/chooseTrack",null)}}},[a("translate",{attrs:{"translate-context":"Content/Playlist/Button.Label/Verb"}},[t._v("Manage your playlists")])],1),a("div",{staticClass:"ui hidden divider"})]:t._e(),a("form",{class:["ui",{loading:t.isLoading},"form"],on:{submit:function(e){e.preventDefault(),t.updateQueryString(),t.fetchData()}}},[a("div",{staticClass:"fields"},[a("div",{staticClass:"field"},[a("label",{attrs:{for:"playlists-search"}},[a("translate",{attrs:{"translate-context":"Content/Search/Input.Label/Noun"}},[t._v("Search")])],1),a("div",{staticClass:"ui action input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],attrs:{id:"playlists-search",stype:"text",name:"search",placeholder:t.labels.searchPlaceholder},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}}),a("button",{staticClass:"ui icon button",attrs:{type:"submit","aria-label":t.$pgettext("Content/Search/Input.Label/Noun","Search")}},[a("i",{staticClass:"search icon"})])])]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"playlists-ordering"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown.Label/Noun"}},[t._v("Ordering")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.ordering,expression:"ordering"}],staticClass:"ui dropdown",attrs:{id:"playlists-ordering"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.ordering=e.target.multiple?a:a[0]}}},t._l(t.orderingOptions,(function(e){return a("option",{domProps:{value:e[0]}},[t._v(" "+t._s(t.sharedLabels.filters[e[1]])+" ")])})),0)]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"playlists-ordering-direction"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown.Label/Noun"}},[t._v("Order")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.orderingDirection,expression:"orderingDirection"}],staticClass:"ui dropdown",attrs:{id:"playlists-ordering-direction"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.orderingDirection=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"+"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown"}},[t._v("Ascending")])],1),a("option",{attrs:{value:"-"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown"}},[t._v("Descending")])],1)])]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"playlists-results"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown.Label/Noun"}},[t._v("Results per page")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.paginateBy,expression:"paginateBy"}],staticClass:"ui dropdown",attrs:{id:"playlists-results"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.paginateBy=e.target.multiple?a:a[0]}}},[a("option",{domProps:{value:parseInt(12)}},[t._v("12")]),a("option",{domProps:{value:parseInt(25)}},[t._v("25")]),a("option",{domProps:{value:parseInt(50)}},[t._v("50")])])])])]),a("div",{staticClass:"ui hidden divider"}),t.result&&t.result.results.length>0?a("playlist-card-list",{attrs:{playlists:t.result.results}}):t.result&&!t.result.results.length>0?a("div",{staticClass:"ui placeholder segment sixteen wide column",staticStyle:{"text-align":"center",display:"flex","align-items":"center"}},[a("div",{staticClass:"ui icon header"},[a("i",{staticClass:"list icon"}),a("translate",{attrs:{"translate-context":"Content/Playlists/Placeholder"}},[t._v(" No results matching your query ")])],1),t.$store.state.auth.authenticated?a("button",{staticClass:"ui success button labeled icon",on:{click:function(e){return t.$store.commit("playlists/chooseTrack",null)}}},[a("i",{staticClass:"list icon"}),a("translate",{attrs:{"translate-context":"Content/*/Verb"}},[t._v(" Create a playlist ")])],1):t._e()]):t._e(),a("div",{staticClass:"ui center aligned basic segment"},[t.result&&t.result.results.length>0?a("pagination",{attrs:{current:t.page,"paginate-by":t.paginateBy,total:t.result.count},on:{"page-changed":t.selectPage}}):t._e()],1)],2)])},i=[],n=(a("d3b7"),a("e25e"),a("25f0"),a("3ca3"),a("ddb0"),a("2b3d"),a("bc3a")),r=a.n(n),l=(a("ceb5"),a("1157")),o=a.n(l),c=a("20be"),u=a("38b2"),d=a("64c4"),p=a("8479"),h=a("1799"),g="playlists/",m={mixins:[c["a"],u["a"],d["a"]],props:{defaultQuery:{type:String,required:!1,default:""},scope:{type:String,required:!1,default:"all"}},components:{PlaylistCardList:p["a"],Pagination:h["a"]},data:function(){return{isLoading:!0,result:null,page:parseInt(this.defaultPage),query:this.defaultQuery,orderingOptions:[["creation_date","creation_date"],["modification_date","modification_date"],["name","name"]]}},created:function(){this.fetchData()},mounted:function(){o()(".ui.dropdown").dropdown()},computed:{labels:function(){var t=this.$pgettext("*/*/*","Playlists"),e=this.$pgettext("Content/Playlist/Placeholder/Call to action","Enter playlist nameâ€¦");return{playlists:t,searchPlaceholder:e}}},methods:{updateQueryString:function(){history.pushState({},null,this.$route.path+"?"+new URLSearchParams({query:this.query,page:this.page,paginateBy:this.paginateBy,ordering:this.getOrderingAsString()}).toString())},fetchData:function(){var t=this;this.isLoading=!0;var e=g,a={scope:this.scope,page:this.page,page_size:this.paginateBy,q:this.query,ordering:this.getOrderingAsString(),playable:!0};r.a.get(e,{params:a}).then((function(e){t.result=e.data,t.isLoading=!1}))},selectPage:function(t){this.page=t}},watch:{page:function(){this.updateQueryString(),this.fetchData()}}},y=m,v=a("2877"),b=Object(v["a"])(y,s,i,!1,null,null,null);e["default"]=b.exports},2696:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui app-card card"},[a("div",{class:["ui","head-image","squares"],on:{click:function(e){return t.$router.push({name:"library.playlists.detail",params:{id:t.playlist.id}})}}},[t._l(t.images,(function(t,e){return a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"url"}],key:e,attrs:{alt:""}})})),a("play-button",{attrs:{"icon-only":!0,"is-playable":t.playlist.is_playable,"button-classes":["ui","circular","large","vibrant","icon","button"],playlist:t.playlist}})],2),a("div",{staticClass:"content"},[a("strong",[a("router-link",{staticClass:"discrete link",attrs:{to:{name:"library.playlists.detail",params:{id:t.playlist.id}}}},[t._v(" "+t._s(t.playlist.name)+" ")])],1),a("div",{staticClass:"description"},[a("user-link",{staticClass:"left floated",attrs:{user:t.playlist.user,avatar:!1}})],1)]),a("div",{staticClass:"extra content"},[a("translate",{attrs:{"translate-context":"*/*/*","translate-params":{count:t.playlist.tracks_count},"translate-n":t.playlist.tracks_count,"translate-plural":"%{ count } tracks"}},[t._v("%{ count } track")]),a("play-button",{staticClass:"right floated basic icon",attrs:{"dropdown-only":!0,"is-playable":t.playlist.is_playable,"dropdown-icon-classes":["ellipsis","horizontal","large really discrete"],playlist:t.playlist}})],1)])},i=[],n=(a("d81d"),a("fb6a"),a("a3e6")),r={props:["playlist"],components:{PlayButton:n["a"]},computed:{images:function(){var t=this,e=this.playlist.album_covers.map((function(e){return t.$store.getters["instance/absoluteUrl"](e)})).slice(0,4);while(e.length<4)e.push(a("271e"));return e}}},l=r,o=a("2877"),c=Object(o["a"])(l,s,i,!1,null,null,null);e["a"]=c.exports},"38b2":function(t,e,a){"use strict";var s,i,n={props:{defaultPage:{required:!1,default:1},defaultPaginateBy:{required:!1}}},r=n,l=a("2877"),o=Object(l["a"])(r,s,i,!1,null,null,null);e["a"]=o.exports},"64c4":function(t,e,a){"use strict";var s,i,n={computed:{sharedLabels:function(){return{fields:{privacy_level:{label:this.$pgettext("Content/Settings/Dropdown.Label/Noun","Activity visibility"),help:this.$pgettext("Content/Settings/Dropdown.Help text","Determine the visibility level of your activity"),choices:{me:this.$pgettext("Content/Settings/Dropdown","Nobody except me"),instance:this.$pgettext("Content/Settings/Dropdown","Everyone on this instance"),everyone:this.$pgettext("Content/Settings/Dropdown","Everyone, across all instances")},shortChoices:{me:this.$pgettext("Content/Settings/Dropdown/Short","Private"),instance:this.$pgettext("Content/Settings/Dropdown/Short","Instance"),everyone:this.$pgettext("Content/Settings/Dropdown/Short","Everyone")}},import_status:{detailTitle:this.$pgettext("Content/Library/Link.Title","Click to display more information about the import process for this upload"),choices:{skipped:{label:this.$pgettext("Content/Library/*","Skipped"),help:this.$pgettext("Content/Library/Help text","This track is already present in one of your libraries")},draft:{label:this.$pgettext("Content/Library/*/Short","Draft"),help:this.$pgettext("Content/Library/Help text","This track has been uploaded, but hasn't been scheduled for processing yet")},pending:{label:this.$pgettext("Content/Library/*/Short","Pending"),help:this.$pgettext("Content/Library/Help text","This track has been uploaded, but hasn't been processed by the server yet")},errored:{label:this.$pgettext("Content/Library/Table/Short","Errored"),help:this.$pgettext("Content/Library/Help text","This track could not be processed, please make sure it is tagged correctly")},finished:{label:this.$pgettext("Content/Library/*","Finished"),help:this.$pgettext("Content/Library/Help text","Imported")}}},report_type:{label:this.$pgettext("*/*/*","Category"),choices:{takedown_request:this.$pgettext("Content/Moderation/Dropdown","Takedown request"),invalid_metadata:this.$pgettext("Popup/Import/Error.Label","Invalid metadata"),illegal_content:this.$pgettext("Content/Moderation/Dropdown","Illegal content"),offensive_content:this.$pgettext("Content/Moderation/Dropdown","Offensive content"),other:this.$pgettext("Content/Moderation/Dropdown","Other")}},summary:{label:this.$pgettext("Content/Account/*","Bio")},content_category:{label:this.$pgettext("Content/*/Dropdown.Label/Noun","Content category"),choices:{podcast:this.$pgettext("Content/*/Dropdown","Podcast"),music:this.$pgettext("*/*/*","Music"),other:this.$pgettext("*/*/*","Other")}}},filters:{creation_date:this.$pgettext("Content/*/*/Noun","Creation date"),release_date:this.$pgettext("Content/*/*/Noun","Release date"),accessed_date:this.$pgettext("Content/*/*/Noun","Accessed date"),first_seen:this.$pgettext("Content/Moderation/Dropdown/Noun","First seen date"),last_seen:this.$pgettext("Content/Moderation/Dropdown/Noun","Last seen date"),modification_date:this.$pgettext("Content/Playlist/Dropdown/Noun","Modification date"),expiration_date:this.$pgettext("Content/Admin/Table.Label/Noun","Expiration date"),track_title:this.$pgettext("Content/*/Dropdown/Noun","Track name"),album_title:this.$pgettext("Content/*/Dropdown/Noun","Album name"),artist_name:this.$pgettext("Content/*/Dropdown/Noun","Artist name"),name:this.$pgettext("*/*/*/Noun","Name"),length:this.$pgettext("*/*/*/Noun","Length"),items_count:this.$pgettext("*/*/*/Noun","Items"),size:this.$pgettext("Content/*/*/Noun","Size"),bitrate:this.$pgettext("Content/Track/*/Noun","Bitrate"),duration:this.$pgettext("Content/*/*","Duration"),date_joined:this.$pgettext("Content/Admin/Table.Label/Noun","Sign-up date"),last_activity:this.$pgettext("Content/Profile/Table.Label/Short, Noun (Value is a date)","Last activity"),username:this.$pgettext("Content/*/*","Username"),domain:this.$pgettext("Content/Moderation/*/Noun","Domain"),users:this.$pgettext("*/*/*/Noun","Users"),received_messages:this.$pgettext("Content/Moderation/*/Noun","Received messages"),uploads:this.$pgettext("*/*/*","Uploads"),followers:this.$pgettext("Content/Federation/*/Noun","Followers")},scopes:{profile:{label:this.$pgettext("Content/OAuth Scopes/Label","Profile"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to email, username, and profile information")},libraries:{label:this.$pgettext("Content/OAuth Scopes/Label","Libraries and uploads"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to audio files, libraries, artists, albums and tracks")},favorites:{label:this.$pgettext("Sidebar/Favorites/List item.Link/Noun","Favorites"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to favorites")},listenings:{label:this.$pgettext("*/*/*/Noun","Listenings"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to listening history")},follows:{label:this.$pgettext("Content/OAuth Scopes/Label","Follows"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to follows")},playlists:{label:this.$pgettext("*/*/*","Playlists"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to playlists")},radios:{label:this.$pgettext("*/*/*","Radios"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to radios")},filters:{label:this.$pgettext("Content/Settings/Title/Noun","Content filters"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to content filters")},notifications:{label:this.$pgettext("*/Notifications/*","Notifications"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to notifications")},edits:{label:this.$pgettext("*/Admin/*/Noun","Edits"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to edits")},security:{label:this.$pgettext("*/Admin/*/Noun","Security"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to security settings such as password and authorization")},reports:{label:this.$pgettext("*/Moderation/*/Noun","Reports"),description:this.$pgettext("Content/OAuth Scopes/Paragraph","Access to moderation reports")}}}}}},r=n,l=a("2877"),o=Object(l["a"])(r,s,i,!1,null,null,null);e["a"]=o.exports},8479:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.playlists.length>0?a("div",[a("div",{staticClass:"ui app-cards cards"},t._l(t.playlists,(function(t){return a("playlist-card",{key:t.id,attrs:{playlist:t}})})),1)]):t._e()},i=[],n=a("2696"),r={props:["playlists"],components:{PlaylistCard:n["a"]}},l=r,o=a("2877"),c=Object(o["a"])(l,s,i,!1,null,null,null);e["a"]=c.exports},b910:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"ui form",on:{submit:function(e){return e.preventDefault(),t.submit()}}},[t.title?a("h4",{staticClass:"ui header"},[a("translate",{attrs:{"translate-context":"Popup/Playlist/Title/Verb"}},[t._v("Create a new playlist")])],1):t._e(),t.success?a("div",{staticClass:"ui positive message"},[a("h4",{staticClass:"header"},[t.playlist?[a("translate",{attrs:{"translate-context":"Content/Playlist/Message"}},[t._v("Playlist updated")])]:[a("translate",{attrs:{"translate-context":"Content/Playlist/Message"}},[t._v("Playlist created")])]],2)]):t._e(),t.errors.length>0?a("div",{staticClass:"ui negative message",attrs:{role:"alert"}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Content/Playlist/Error message.Title"}},[t._v("The playlist could not be created")])],1),a("ul",{staticClass:"list"},t._l(t.errors,(function(e){return a("li",[t._v(t._s(e))])})),0)]):t._e(),a("div",{staticClass:"three fields"},[a("div",{staticClass:"field"},[a("label",{attrs:{for:"playlist-name"}},[a("translate",{attrs:{"translate-context":"Content/Playlist/Input.Label"}},[t._v("Playlist name")])],1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{id:"playlist-name",name:"name",required:"",type:"text",placeholder:t.labels.placeholder},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"playlist-visibility"}},[a("translate",{attrs:{"translate-context":"Content/Playlist/Dropdown.Label"}},[t._v("Playlist visibility")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.privacyLevel,expression:"privacyLevel"}],staticClass:"ui dropdown",attrs:{id:"playlist-visibility"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.privacyLevel=e.target.multiple?a:a[0]}}},t._l(t.privacyLevelChoices,(function(e){return a("option",{domProps:{value:e.value}},[t._v(t._s(e.label))])})),0)]),a("div",{staticClass:"field"},[a("span",{attrs:{id:"updatePlaylistLabel"}}),a("button",{class:["ui","fluid",{loading:t.isLoading},"button"],attrs:{type:"submit"}},[t.playlist?[a("translate",{attrs:{"translate-context":"Content/Playlist/Button.Label/Verb"}},[t._v("Update playlist")])]:[a("translate",{attrs:{"translate-context":"Content/Playlist/Button.Label/Verb"}},[t._v("Create playlist")])]],2)])])])},i=[],n=(a("7db0"),a("b0c0"),a("1157")),r=a.n(n),l=a("bc3a"),o=a.n(l),c=a("64c4"),u=a("3677"),d={mixins:[c["a"]],props:{title:{type:Boolean,default:!0},playlist:{type:Object,default:null}},mounted:function(){r()(this.$el).find(".dropdown").dropdown()},data:function(){var t={errors:[],success:!1,isLoading:!1};return this.playlist?(t.name=this.playlist.name,t.privacyLevel=this.playlist.privacy_level):(t.privacyLevel=this.$store.state.auth.profile.privacy_level,t.name=""),t},computed:{labels:function(){return{placeholder:this.$pgettext("Content/Playlist/Input.Placeholder","My awesome playlist")}},privacyLevelChoices:function(){return[{value:"me",label:this.sharedLabels.fields.privacy_level.choices["me"]},{value:"instance",label:this.sharedLabels.fields.privacy_level.choices["instance"]},{value:"everyone",label:this.sharedLabels.fields.privacy_level.choices["everyone"]}]}},methods:{submit:function(){this.isLoading=!0,this.success=!1,this.errors=[];var t,e,a=this,s={name:this.name,privacy_level:this.privacyLevel};return this.playlist?(e="playlists/".concat(this.playlist.id,"/"),t=o.a.patch(e,s)):(e="playlists/",t=o.a.post(e,s)),t.then((function(t){a.success=!0,a.isLoading=!1,a.playlist||(a.name=""),a.$emit("updated",t.data),a.$store.dispatch("playlists/fetchOwn")}),(function(t){u["a"].default.error("Error while creating playlist"),a.isLoading=!1,a.errors=t.backendErrors}))}}},p=d,h=a("2877"),g=Object(h["a"])(p,s,i,!1,null,null,null);e["a"]=g.exports}}]);