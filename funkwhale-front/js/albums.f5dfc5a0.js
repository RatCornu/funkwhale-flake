(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["albums"],{"1e6f":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._t("default"),a("div",{staticClass:"ui hidden divider"}),t.isLoading?a("div",{staticClass:"ui inverted active dimmer"},[a("div",{staticClass:"ui loader"})]):t._e(),t._l(t.objects,(function(t){return a("channel-entry-card",{key:t.id,attrs:{entry:t}})})),t.count>t.limit?[a("div",{staticClass:"ui hidden divider"}),a("div",{staticClass:"ui center aligned basic segment"},[a("pagination",{attrs:{current:t.page,"paginate-by":t.limit,total:t.count},on:{"page-changed":t.updatePage}})],1)]:t._e(),t.isLoading||0!==t.objects.length?t._e():[a("empty-state",{attrs:{refresh:!0},on:{refresh:function(e){return t.fetchData("tracks/")}}},[a("p",[a("translate",{attrs:{"translate-context":"Content/Channels/*"}},[t._v("You may need to subscribe to this channel to see its content.")])],1)])]],2)},i=[],r=(a("a9e3"),a("ceb5")),n=a("bc3a"),l=a.n(n),o=a("a432"),c=a("1799"),u=(a("38b2"),{props:{filters:{type:Object,required:!0},limit:{type:Number,default:10}},components:{ChannelEntryCard:o["a"],Pagination:c["a"]},data:function(){return{objects:[],count:0,isLoading:!1,errors:null,nextPage:null,page:1}},created:function(){this.fetchData("tracks/")},methods:{fetchData:function(t){if(t){this.isLoading=!0;var e=this,a=r["a"].clone(this.filters);a.page_size=this.limit,a.page=this.page,a.include_channels=!0,l.a.get(t,{params:a}).then((function(t){e.nextPage=t.data.next,e.isLoading=!1,e.objects=t.data.results,e.count=t.data.count,e.$emit("fetched",t.data)}),(function(t){e.isLoading=!1,e.errors=t.backendErrors}))}},updatePage:function(t){this.page=t}},watch:{page:function(){this.fetchData("tracks/")}}}),d=u,b=a("2877"),p=Object(b["a"])(d,s,i,!1,null,null,null);e["a"]=p.exports},"4b90":function(t,e,a){"use strict";a("c975"),a("4d63"),a("ac1f"),a("25f0"),a("466d"),a("5319");e["a"]={updateQueryString:function(t,e,a){var s=new RegExp("([?&])"+e+"=.*?(&|$)","i"),i=-1!==t.indexOf("?")?"&":"?";return t.match(s)?t.replace(s,"$1"+e+"="+a+"$2"):t+i+e+"="+a}}},"4d63":function(t,e,a){var s=a("83ab"),i=a("da84"),r=a("94ca"),n=a("7156"),l=a("9bf2").f,o=a("241c").f,c=a("44e7"),u=a("ad6d"),d=a("9f7f"),b=a("6eeb"),p=a("d039"),m=a("69f3").set,g=a("2626"),h=a("b622"),v=h("match"),f=i.RegExp,_=f.prototype,y=/a/g,C=/a/g,k=new f(y)!==y,j=d.UNSUPPORTED_Y,x=s&&r("RegExp",!k||j||p((function(){return C[v]=!1,f(y)!=y||f(C)==C||"/a/i"!=f(y,"i")})));if(x){var w=function(t,e){var a,s=this instanceof w,i=c(t),r=void 0===e;if(!s&&i&&t.constructor===w&&r)return t;k?i&&!r&&(t=t.source):t instanceof w&&(r&&(e=u.call(t)),t=t.source),j&&(a=!!e&&e.indexOf("y")>-1,a&&(e=e.replace(/y/g,"")));var l=n(k?new f(t,e):f(t,e),s?this:_,w);return j&&a&&m(l,{sticky:a}),l},$=function(t){t in w||l(w,t,{configurable:!0,get:function(){return f[t]},set:function(e){f[t]=e}})},L=o(f),P=0;while(L.length>P)$(L[P++]);_.constructor=w,w.prototype=_,b(i,"RegExp",w)}g("RegExp")},"845c":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",[t.isLoading?s("div",{directives:[{name:"title",rawName:"v-title",value:t.labels.title,expression:"labels.title"}],staticClass:"ui vertical segment"},[s("div",{class:["ui","centered","active","inline","loader"]})]):t._e(),t.object?[s("section",{staticClass:"ui vertical stripe segment channel-serie"},[s("div",{staticClass:"ui stackable grid container"},[s("div",{staticClass:"ui seven wide column"},[t.isSerie?s("div",{staticClass:"padded basic segment"},[t.isSerie?s("div",{staticClass:"ui two column grid"},[s("div",{staticClass:"column"},[s("div",{staticClass:"large two-images"},[t.object.cover&&t.object.cover.urls.original?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.$store.getters["instance/absoluteUrl"](t.object.cover.urls.medium_square_crop),expression:"$store.getters['instance/absoluteUrl'](object.cover.urls.medium_square_crop)"}],staticClass:"channel-image",attrs:{alt:""}}):s("img",{staticClass:"channel-image",attrs:{alt:"",src:a("271e")}}),t.object.cover&&t.object.cover.urls.original?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.$store.getters["instance/absoluteUrl"](t.object.cover.urls.medium_square_crop),expression:"$store.getters['instance/absoluteUrl'](object.cover.urls.medium_square_crop)"}],staticClass:"channel-image",attrs:{alt:""}}):s("img",{staticClass:"channel-image",attrs:{alt:"",src:a("271e")}})])]),s("div",{staticClass:"ui column right aligned"},[t.object.tags&&t.object.tags.length>0?s("tags-list",{attrs:{tags:t.object.tags}}):t._e(),s("div",{staticClass:"ui small hidden divider"}),t.totalDuration>0?s("human-duration",{attrs:{duration:t.totalDuration}}):t._e(),t.totalTracks>0?[s("div",{staticClass:"ui hidden very small divider"}),t.isSerie?s("translate",{key:"1",attrs:{"translate-context":"Content/Channel/Paragraph","translate-plural":"%{ count } episodes","translate-n":t.totalTracks,"translate-params":{count:t.totalTracks}}},[t._v(" %{ count } episode ")]):s("translate",{attrs:{"translate-context":"*/*/*","translate-params":{count:t.totalTracks},"translate-n":t.totalTracks,"translate-plural":"%{ count } tracks"}},[t._v("%{ count } track")])]:t._e(),s("div",{staticClass:"ui small hidden divider"}),s("play-button",{staticClass:"vibrant",attrs:{tracks:t.object.tracks}}),s("div",{staticClass:"ui hidden horizontal divider"}),s("album-dropdown",{attrs:{object:t.object,"public-libraries":t.publicLibraries,"is-loading":t.isLoading,"is-album":t.isAlbum,"is-serie":t.isSerie,"is-channel":t.isChannel,artist:t.artist}})],2)]):t._e(),s("div",{staticClass:"ui small hidden divider"}),s("header",[s("h2",{staticClass:"ui header",attrs:{title:t.object.title}},[t._v(" "+t._s(t.object.title)+" ")]),s("artist-label",{attrs:{artist:t.artist}})],1)]):s("div",{staticClass:"ui center aligned text padded basic segment"},[t.object.cover&&t.object.cover.urls.original?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.$store.getters["instance/absoluteUrl"](t.object.cover.urls.medium_square_crop),expression:"$store.getters['instance/absoluteUrl'](object.cover.urls.medium_square_crop)"}],staticClass:"channel-image",attrs:{alt:""}}):s("img",{staticClass:"channel-image",attrs:{alt:"",src:a("271e")}}),s("div",{staticClass:"ui hidden divider"}),s("header",[s("h2",{staticClass:"ui header",attrs:{title:t.object.title}},[t._v(" "+t._s(t.object.title)+" ")]),s("artist-label",{staticClass:"rounded",attrs:{artist:t.artist}})],1),s("div",{staticClass:"ui small hidden divider"}),t.totalTracks>0?[s("div",{staticClass:"ui hidden very small divider"}),t.isSerie?s("translate",{key:"1",attrs:{"translate-context":"Content/Channel/Paragraph","translate-plural":"%{ count } episodes","translate-n":t.totalTracks,"translate-params":{count:t.totalTracks}}},[t._v(" %{ count } episode ")]):s("translate",{attrs:{"translate-context":"*/*/*","translate-params":{count:t.totalTracks},"translate-n":t.totalTracks,"translate-plural":"%{ count } tracks"}},[t._v("%{ count } track")]),t._v(" · ")]:t._e(),t.totalDuration>0?s("human-duration",{attrs:{duration:t.totalDuration}}):t._e(),s("div",{staticClass:"ui small hidden divider"}),s("play-button",{staticClass:"vibrant",attrs:{album:t.object}}),s("div",{staticClass:"ui horizontal hidden divider"}),s("album-dropdown",{attrs:{object:t.object,"public-libraries":t.publicLibraries,"is-loading":t.isLoading,"is-album":t.isAlbum,"is-serie":t.isSerie,"is-channel":t.isChannel,artist:t.artist}}),t.object.tags&&t.object.tags.length>0||t.object.description||t.$store.state.auth.authenticated&&t.object.is_local?s("div",[s("div",{staticClass:"ui small hidden divider"}),s("div",{staticClass:"ui divider"}),s("div",{staticClass:"ui small hidden divider"}),t.object.tags&&t.object.tags.length>0?[s("tags-list",{attrs:{tags:t.object.tags}}),s("div",{staticClass:"ui small hidden divider"})]:t._e(),t.object.description?s("rendered-description",{attrs:{content:t.object.description,"can-update":!1}}):t.$store.state.auth.authenticated&&t.object.is_local?s("router-link",{attrs:{to:{name:"library.albums.edit",params:{id:t.object.id}}}},[s("i",{staticClass:"pencil icon"}),s("translate",{attrs:{"translate-context":"Content/*/Button.Label/Verb"}},[t._v("Add a description…")])],1):t._e()],2):t._e()],2),t.isSerie?[s("div",{staticClass:"ui hidden divider"}),t.object.description?s("rendered-description",{attrs:{content:t.object.description,"can-update":!1}}):t.$store.state.auth.authenticated&&t.object.is_local?s("router-link",{attrs:{to:{name:"library.albums.edit",params:{id:t.object.id}}}},[s("i",{staticClass:"pencil icon"}),s("translate",{attrs:{"translate-context":"Content/*/Button.Label/Verb"}},[t._v("Add a description…")])],1):t._e()]:t._e()],2),s("div",{staticClass:"nine wide column"},[t.object?s("router-view",{key:t.$route.fullPath,attrs:{"paginate-by":t.paginateBy,page:t.page,"total-tracks":t.totalTracks,"is-serie":t.isSerie,artist:t.artist,discs:t.discs,object:t.object,"object-type":"album"},on:{"libraries-loaded":function(e){t.libraries=e},"page-changed":function(e){t.page=e}}}):t._e()],1)])])]:t._e()],2)},i=[],r=(a("4de4"),a("4160"),a("13d5"),a("159b"),a("96cf"),a("1da1")),n=a("bc3a"),l=a.n(n),o=a("ceb5"),c=(a("ff19"),a("a3e6")),u=a("6b08"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-link",{staticClass:"artist-label ui image label",attrs:{to:t.route}},[t.artist.cover&&t.artist.cover.urls.original?a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.$store.getters["instance/absoluteUrl"](t.artist.cover.urls.medium_square_crop),expression:"$store.getters['instance/absoluteUrl'](artist.cover.urls.medium_square_crop)"}],class:[{circular:"podcast"!=t.artist.content_category}],attrs:{alt:""}}):a("i",{class:["podcast"!=t.artist.content_category?"circular":"bordered","inverted violet users icon"]}),t._v(" "+t._s(t.artist.name)+" ")])},b=[],p=(a("98fc"),{props:{artist:Object},computed:{route:function(){return this.artist.channel?{name:"channels.detail",params:{id:this.artist.channel.uuid}}:{name:"library.artists.detail",params:{id:this.artist.id}}}}}),m=p,g=a("2877"),h=Object(g["a"])(m,d,b,!1,null,null,null),v=h.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t.isEmbedable?a("modal",{attrs:{show:t.showEmbedModal},on:{"update:show":function(e){t.showEmbedModal=e}}},[a("h4",{staticClass:"header"},[a("translate",{attrs:{"translate-context":"Popup/Album/Title/Verb"}},[t._v("Embed this album on your website")])],1),a("div",{staticClass:"scrolling content"},[a("div",{staticClass:"description"},[a("embed-wizard",{attrs:{type:"album",id:t.object.id}})],1)]),a("div",{staticClass:"actions"},[a("button",{staticClass:"ui basic deny button"},[a("translate",{attrs:{"translate-context":"*/*/Button.Label/Verb"}},[t._v("Cancel")])],1)])]):t._e(),a("button",{directives:[{name:"dropdown",rawName:"v-dropdown",value:{direction:"downward"},expression:"{direction: 'downward'}"}],staticClass:"ui floating dropdown circular icon basic button",attrs:{title:t.labels.more}},[a("i",{staticClass:"ellipsis vertical icon"}),a("div",{staticClass:"menu"},[t.domain!=t.$store.getters["instance/domain"]?a("a",{staticClass:"basic item",attrs:{href:t.object.fid,target:"_blank"}},[a("i",{staticClass:"external icon"}),a("translate",{attrs:{"translate-params":{domain:t.domain},"translate-context":"Content/*/Button.Label/Verb"}},[t._v("View on %{ domain }")])],1):t._e(),t.isEmbedable?a("div",{staticClass:"basic item",attrs:{role:"button"},on:{click:function(e){t.showEmbedModal=!t.showEmbedModal}}},[a("i",{staticClass:"code icon"}),a("translate",{attrs:{"translate-context":"Content/*/Button.Label/Verb"}},[t._v("Embed")])],1):t._e(),t.isAlbum&&t.musicbrainzUrl?a("a",{staticClass:"basic item",attrs:{href:t.musicbrainzUrl,target:"_blank",rel:"noreferrer noopener"}},[a("i",{staticClass:"external icon"}),a("translate",{attrs:{"translate-context":"Content/*/*/Clickable, Verb"}},[t._v("View on MusicBrainz")])],1):t._e(),!t.isChannel&&t.isAlbum?a("a",{staticClass:"basic item",attrs:{href:t.discogsUrl,target:"_blank",rel:"noreferrer noopener"}},[a("i",{staticClass:"external icon"}),a("translate",{attrs:{"translate-context":"Content/*/Button.Label/Verb"}},[t._v("Search on Discogs")])],1):t._e(),t.object.is_local?a("router-link",{staticClass:"basic item",attrs:{to:{name:"library.albums.edit",params:{id:t.object.id}}}},[a("i",{staticClass:"edit icon"}),a("translate",{attrs:{"translate-context":"Content/*/Button.Label/Verb"}},[t._v("Edit")])],1):t._e(),t.artist&&t.$store.state.auth.authenticated&&t.artist.channel&&t.artist.attributed_to.full_username===t.$store.state.auth.fullUsername?a("dangerous-button",{class:["ui",{loading:t.isLoading},"item"],on:{confirm:function(e){return t.remove()}}},[a("i",{staticClass:"ui trash icon"}),a("translate",{attrs:{"translate-context":"*/*/*/Verb"}},[t._v("Delete…")]),a("p",{attrs:{slot:"modal-header"},slot:"modal-header"},[a("translate",{attrs:{"translate-context":"Popup/Channel/Title"}},[t._v("Delete this album?")])],1),a("div",{attrs:{slot:"modal-content"},slot:"modal-content"},[a("p",[a("translate",{attrs:{"translate-context":"Content/Moderation/Paragraph"}},[t._v("The album will be deleted, as well as any related files and data. This action is irreversible.")])],1)]),a("p",{attrs:{slot:"modal-confirm"},slot:"modal-confirm"},[a("translate",{attrs:{"translate-context":"*/*/*/Verb"}},[t._v("Delete")])],1)],1):t._e(),a("div",{staticClass:"divider"}),t._l(t.getReportableObjs({album:t.object,channel:t.artist.channel}),(function(e){return a("div",{key:e.target.type+e.target.id,staticClass:"basic item",attrs:{role:"button"},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.$store.dispatch("moderation/report",e.target)}}},[a("i",{staticClass:"share icon"}),t._v(" "+t._s(e.label)+" ")])})),a("div",{staticClass:"divider"}),t.$store.state.auth.availablePermissions["library"]?a("router-link",{staticClass:"basic item",attrs:{to:{name:"manage.library.albums.detail",params:{id:t.object.id}}}},[a("i",{staticClass:"wrench icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/Link"}},[t._v("Open in moderation interface")])],1):t._e(),t.$store.state.auth.profile&&t.$store.state.auth.profile.is_superuser?a("a",{staticClass:"basic item",attrs:{href:t.$store.getters["instance/absoluteUrl"]("/api/admin/music/album/"+t.object.id),target:"_blank",rel:"noopener noreferrer"}},[a("i",{staticClass:"wrench icon"}),a("translate",{attrs:{"translate-context":"Content/Moderation/Link/Verb"}},[t._v("View in Django's admin")])],1):t._e()],2)])],1)},_=[],y=(a("b0c0"),a("21a2")),C=a("404d"),k=a("add5"),j=a("025e"),x={mixins:[k["a"]],props:{isLoading:Boolean,artist:Object,object:Object,publicLibraries:Array,isAlbum:Boolean,isChannel:Boolean,isSerie:Boolean},components:{EmbedWizard:y["a"],Modal:C["default"]},data:function(){return{showEmbedModal:!1}},computed:{domain:function(){if(this.object)return Object(j["b"])(this.object.fid)},labels:function(){return{more:this.$pgettext("*/*/Button.Label/Noun","More…")}},isEmbedable:function(){return this.isChannel&&this.artist.channel.actor||this.publicLibraries.length>0},musicbrainzUrl:function(){if(this.object.mbid)return"https://musicbrainz.org/release/"+this.object.mbid},discogsUrl:function(){return"https://discogs.com/search/?type=release&title="+encodeURI(this.object.title)+"&artist="+encodeURI(this.object.artist.name)}}},w=x,$=Object(g["a"])(w,f,_,!1,null,null,null),L=$.exports;function P(t,e){var a=e.disc_number-1;return a<0&&(a=0),void 0==t[a]?t.push([e]):t[a].push(e),t}var S={props:["id"],components:{PlayButton:c["a"],TagsList:u["a"],ArtistLabel:v,AlbumDropdown:L},data:function(){return{isLoading:!0,object:null,artist:null,discs:[],libraries:[],page:1,paginateBy:50}},created:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.fetchData();case 2:case"end":return e.stop()}}),e)})))()},methods:{fetchData:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,a=l.a.get("tracks/",{params:{ordering:"disc_number,position",album:t.id,page_size:t.paginateBy,page:t.page,include_channels:"true"}}),e.next=4,l.a.get("albums/".concat(t.id,"/"),{params:{refresh:"true"}});case 4:return s=e.sent,e.next=7,l.a.get("artists/".concat(s.data.artist.id,"/"));case 7:return i=e.sent,t.artist=i.data,t.artist.channel&&(t.artist.channel.artist=t.artist),e.next=12,a;case 12:a=e.sent,t.object=s.data,t.object.tracks=a.data.results,t.discs=t.object.tracks.reduce(P,[]),t.isLoading=!1;case 17:case"end":return e.stop()}}),e)})))()},remove:function(){var t=this,e=this;e.isLoading=!0,l.a.delete("albums/".concat(this.object.id)).then((function(a){e.isLoading=!1,e.$emit("deleted"),e.$router.push({name:"library.artists.detail",params:{id:t.artist.id}})}),(function(t){e.isLoading=!1,e.errors=t.backendErrors}))}},computed:{totalTracks:function(){return this.object.tracks_count},isChannel:function(){return this.object.artist.channel},isSerie:function(){return"podcast"===this.object.artist.content_category},isAlbum:function(){return"music"===this.object.artist.content_category},totalDuration:function(){var t=[0];return this.object.tracks.forEach((function(e){e.uploads[0]&&e.uploads[0].duration&&t.push(e.uploads[0].duration)})),o["a"].sum(t)},labels:function(){return{title:this.$pgettext("*/*/*","Album")}},publicLibraries:function(){return this.libraries.filter((function(t){return"everyone"===t.privacy_level}))}},watch:{id:function(){this.fetchData()},page:function(){this.fetchData()}}},T=S,D=Object(g["a"])(T,s,i,!1,null,null,null);e["default"]=D.exports},"9fd5":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.object?a("div",[a("h2",{staticClass:"ui header"},[t.isSerie?a("translate",{key:"1",attrs:{"translate-context":"Content/Channels/*"}},[t._v("Episodes")]):a("translate",{key:"2",attrs:{"translate-context":"*/*/*"}},[t._v("Tracks")])],1),t.artist.channel&&t.isSerie?a("channel-entries",{attrs:{limit:50,filters:{channel:t.artist.channel.uuid,ordering:"-creation_date"}}}):t.discs&&t.discs.length>1?t._l(t.discs,(function(e,s){return a("div",{key:s},[a("div",{staticClass:"ui hidden divider"}),a("translate",{attrs:{tag:"h3","translate-params":{number:s+1},"translate-context":"Content/Album/"}},[t._v("Volume %{ number }")]),a("album-entries",{attrs:{tracks:e}})],1)})):[a("album-entries",{attrs:{tracks:t.object.tracks}})],a("div",{staticClass:"ui center aligned basic segment"},[!t.isSerie&&t.object.tracks&&t.totalTracks>t.paginateBy?a("pagination",{attrs:{current:t.page,"paginate-by":t.paginateBy,total:t.totalTracks},on:{"page-changed":t.updatePage}}):t._e()],1),t.artist.channel||t.isSerie?t._e():[a("h2",[a("translate",{attrs:{"translate-context":"Content/*/Title/Noun"}},[t._v("User libraries")])],1),a("library-widget",{attrs:{url:"albums/"+t.object.id+"/libraries/"},on:{loaded:function(e){return t.$emit("libraries-loaded",e)}}},[a("translate",{attrs:{slot:"subtitle","translate-context":"Content/Album/Paragraph"},slot:"subtitle"},[t._v("This album is present in the following libraries:")])],1)]],2):t._e()},i=[],r=a("cadb"),n=(a("bc3a"),a("4b90"),a("3677"),a("06cd")),l=a("5a65"),o=a("1e6f"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"album-entries"},t._l(t.tracks,(function(e){return a("div",{key:e.id,class:[{active:t.currentTrack&&t.isPlaying&&e.id===t.currentTrack.id},"album-entry"]},[a("div",{staticClass:"actions"},[a("play-button",{staticClass:"basic circular icon",attrs:{"button-classes":["circular inverted vibrant icon button"],discrete:!0,"icon-only":!0,track:e}})],1),a("div",{staticClass:"position"},[t._v(t._s(t.prettyPosition(e.position)))]),a("div",{staticClass:"content ellipsis"},[a("router-link",{staticClass:"discrete link",attrs:{to:{name:"library.tracks.detail",params:{id:e.id}}}},[a("strong",[t._v(t._s(e.title))]),a("br")])],1),a("div",{staticClass:"meta"},[t.$store.state.auth.authenticated&&t.$store.getters["favorites/isFavorite"](e.id)?[a("track-favorite-icon",{staticClass:"tiny",attrs:{track:e}})]:t._e(),e.uploads[0]&&e.uploads[0].duration?a("human-duration",{attrs:{duration:e.uploads[0].duration}}):t._e()],2),a("div",{staticClass:"actions"},[a("play-button",{staticClass:"play-button basic icon",attrs:{"dropdown-only":!0,"is-playable":e.is_playable,"dropdown-icon-classes":["ellipsis","vertical","large really discrete"],track:e}})],1)])})),0)},u=[],d=a("5530"),b=(a("ceb5"),a("a432"),a("a3e6")),p=a("4389"),m=a("2f62"),g={props:{tracks:Array},components:{PlayButton:b["a"],TrackFavoriteIcon:p["default"]},computed:Object(d["a"])(Object(d["a"])({},Object(m["c"])({currentTrack:"queue/currentTrack"})),{},{isPlaying:function(){return this.$store.state.player.playing}}),methods:{prettyPosition:function(t,e){var a=String(t);while(a.length<(e||2))a="0"+a;return a}}},h=g,v=a("2877"),f=Object(v["a"])(h,c,u,!1,null,null,null),_=f.exports,y=a("1799"),C=(a("38b2"),{props:["object","libraries","discs","isSerie","artist","page","paginateBy","totalTracks"],components:{LibraryWidget:n["a"],AlbumEntries:_,ChannelEntries:o["a"],TrackTable:l["a"],Pagination:y["a"]},data:function(){return{time:r["a"],id:this.object.id}},methods:{updatePage:function(t){this.$emit("page-changed",t)}}}),k=C,j=Object(v["a"])(k,s,i,!1,null,null,null);e["default"]=j.exports},a432:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:[{active:t.currentTrack&&t.isPlaying&&t.entry.id===t.currentTrack.id},"channel-entry-card"]},[s("div",{staticClass:"controls"},[s("play-button",{staticClass:"basic circular icon",attrs:{discrete:!0,"icon-only":!0,"is-playable":!0,"button-classes":["ui","circular","inverted vibrant","icon","button"],track:t.entry}})],1),t.cover&&t.cover.urls.original?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.$store.getters["instance/absoluteUrl"](t.cover.urls.medium_square_crop),expression:"$store.getters['instance/absoluteUrl'](cover.urls.medium_square_crop)"}],staticClass:"channel-image image",attrs:{alt:""},on:{click:function(e){return t.$router.push({name:"library.tracks.detail",params:{id:t.entry.id}})}}}):"podcast"===t.entry.artist.content_category?s("span",{staticClass:"channel-image image",on:{click:function(e){return t.$router.push({name:"library.tracks.detail",params:{id:t.entry.id}})}}},[t._v("#"+t._s(t.entry.position))]):t.entry.album&&t.entry.album.cover&&t.entry.album.cover.urls.original?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.$store.getters["instance/absoluteUrl"](t.entry.album.cover.urls.medium_square_crop),expression:"$store.getters['instance/absoluteUrl'](entry.album.cover.urls.medium_square_crop)"}],staticClass:"channel-image image",attrs:{alt:""},on:{click:function(e){return t.$router.push({name:"library.tracks.detail",params:{id:t.entry.id}})}}}):s("img",{staticClass:"channel-image image",attrs:{alt:"",src:a("271e")},on:{click:function(e){return t.$router.push({name:"library.tracks.detail",params:{id:t.entry.id}})}}}),s("div",{staticClass:"ellipsis content"},[s("strong",[s("router-link",{staticClass:"discrete link",attrs:{to:{name:"library.tracks.detail",params:{id:t.entry.id}}}},[t._v(" "+t._s(t.entry.title)+" ")])],1),s("br"),s("human-date",{staticClass:"really discrete",attrs:{date:t.entry.creation_date}})],1),s("div",{staticClass:"meta"},[t.$store.state.auth.authenticated&&t.$store.getters["favorites/isFavorite"](t.entry.id)?[s("track-favorite-icon",{staticClass:"tiny",attrs:{track:t.entry}})]:t._e(),t.duration?s("human-duration",{attrs:{duration:t.duration}}):t._e()],2),s("div",{staticClass:"controls"},[s("play-button",{staticClass:"play-button basic icon",attrs:{"dropdown-only":!0,"is-playable":t.entry.is_playable,"dropdown-icon-classes":["ellipsis","vertical","large really discrete"],track:t.entry}})],1)])},i=[],r=(a("4de4"),a("5530")),n=a("a3e6"),l=a("4389"),o=a("2f62"),c={props:["entry"],components:{PlayButton:n["a"],TrackFavoriteIcon:l["default"]},computed:Object(r["a"])(Object(r["a"])({},Object(o["c"])({currentTrack:"queue/currentTrack"})),{},{isPlaying:function(){return this.$store.state.player.playing},cover:function(){if(this.entry.cover)return this.entry.cover},duration:function(){var t=this.entry.uploads.filter((function(t){return t.duration}));if(t.length>0)return t[0].duration}})},u=c,d=a("2877"),b=Object(d["a"])(u,s,i,!1,null,null,null);e["a"]=b.exports},af46:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{directives:[{name:"title",rawName:"v-title",value:t.labels.title,expression:"labels.title"}]},[a("section",{staticClass:"ui vertical stripe segment"},[a("h2",{staticClass:"ui header"},[a("translate",{attrs:{"translate-context":"Content/Album/Title"}},[t._v("Browsing albums")])],1),a("form",{class:["ui",{loading:t.isLoading},"form"],on:{submit:function(e){e.preventDefault(),t.updatePage(),t.updateQueryString(),t.fetchData()}}},[a("div",{staticClass:"fields"},[a("div",{staticClass:"field"},[a("label",{attrs:{for:"albums-search"}},[a("translate",{attrs:{"translate-context":"Content/Search/Input.Label/Noun"}},[t._v("Search")])],1),a("div",{staticClass:"ui action input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],attrs:{id:"albums-search",type:"text",name:"search",placeholder:t.labels.searchPlaceholder},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}}),a("button",{staticClass:"ui icon button",attrs:{type:"submit","aria-label":t.$pgettext("Content/Search/Input.Label/Noun","Search")}},[a("i",{staticClass:"search icon"})])])]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"tags-search"}},[a("translate",{attrs:{"translate-context":"*/*/*/Noun"}},[t._v("Tags")])],1),a("tags-selector",{model:{value:t.tags,callback:function(e){t.tags=e},expression:"tags"}})],1),a("div",{staticClass:"field"},[a("label",{attrs:{for:"album-ordering"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown.Label/Noun"}},[t._v("Ordering")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.ordering,expression:"ordering"}],staticClass:"ui dropdown",attrs:{id:"album-ordering"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.ordering=e.target.multiple?a:a[0]}}},t._l(t.orderingOptions,(function(e){return a("option",{domProps:{value:e[0]}},[t._v(" "+t._s(t.sharedLabels.filters[e[1]])+" ")])})),0)]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"album-ordering-direction"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown.Label/Noun"}},[t._v("Ordering direction")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.orderingDirection,expression:"orderingDirection"}],staticClass:"ui dropdown",attrs:{id:"album-ordering-direction"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.orderingDirection=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"+"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown"}},[t._v("Ascending")])],1),a("option",{attrs:{value:"-"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown"}},[t._v("Descending")])],1)])]),a("div",{staticClass:"field"},[a("label",{attrs:{for:"album-results"}},[a("translate",{attrs:{"translate-context":"Content/Search/Dropdown.Label/Noun"}},[t._v("Results per page")])],1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.paginateBy,expression:"paginateBy"}],staticClass:"ui dropdown",attrs:{id:"album-results"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.paginateBy=e.target.multiple?a:a[0]}}},[a("option",{domProps:{value:parseInt(12)}},[t._v("12")]),a("option",{domProps:{value:parseInt(25)}},[t._v("25")]),a("option",{domProps:{value:parseInt(50)}},[t._v("50")])])])])]),a("div",{staticClass:"ui hidden divider"}),t.result?a("div",{attrs:{"transition-duration":"0","item-selector":".column","percent-position":"true",stagger:"0"}},[t.result.results.length>0?a("div",{staticClass:"ui app-cards cards"},t._l(t.result.results,(function(t){return a("album-card",{key:t.id,attrs:{album:t}})})),1):a("div",{staticClass:"ui placeholder segment sixteen wide column",staticStyle:{"text-align":"center",display:"flex","align-items":"center"}},[a("div",{staticClass:"ui icon header"},[a("i",{staticClass:"compact disc icon"}),a("translate",{attrs:{"translate-context":"Content/Albums/Placeholder"}},[t._v(" No results matching your query ")])],1),t.$store.state.auth.authenticated?a("router-link",{staticClass:"ui success button labeled icon",attrs:{to:{name:"content.index"}}},[a("i",{staticClass:"upload icon"}),a("translate",{attrs:{"translate-context":"Content/*/Verb"}},[t._v(" Add some music ")])],1):t._e()],1)]):t._e(),a("div",{staticClass:"ui center aligned basic segment"},[t.result&&t.result.count>t.paginateBy?a("pagination",{attrs:{current:t.page,"paginate-by":t.paginateBy,total:t.result.count},on:{"page-changed":t.selectPage}}):t._e()],1)])])},i=[],r=(a("4de4"),a("d3b7"),a("e25e"),a("25f0"),a("3ca3"),a("ddb0"),a("2b3d"),a("4328")),n=a.n(r),l=a("bc3a"),o=a.n(l),c=(a("ceb5"),a("1157")),u=a.n(c),d=a("3677"),b=a("20be"),p=a("38b2"),m=a("64c4"),g=a("af03"),h=a("1799"),v=a("8352"),f="albums/",_={mixins:[b["a"],p["a"],m["a"]],props:{defaultQuery:{type:String,required:!1,default:""},defaultTags:{type:Array,required:!1,default:function(){return[]}},scope:{type:String,required:!1,default:"all"}},components:{AlbumCard:g["a"],Pagination:h["a"],TagsSelector:v["a"]},data:function(){return{isLoading:!0,result:null,page:parseInt(this.defaultPage),query:this.defaultQuery,tags:(this.defaultTags||[]).filter((function(t){return t.length>0})),orderingOptions:[["creation_date","creation_date"],["title","album_title"],["release_date","release_date"]]}},created:function(){this.fetchData()},mounted:function(){u()(".ui.dropdown").dropdown()},computed:{labels:function(){var t=this.$pgettext("Content/Search/Input.Placeholder","Enter album title…"),e=this.$pgettext("*/*/*","Albums");return{searchPlaceholder:t,title:e}}},methods:{updateQueryString:function(){history.pushState({},null,this.$route.path+"?"+new URLSearchParams({query:this.query,page:this.page,tag:this.tags,paginateBy:this.paginateBy,ordering:this.getOrderingAsString()}).toString())},fetchData:function(){var t=this;this.isLoading=!0;var e=f,a={scope:this.scope,page:this.page,page_size:this.paginateBy,q:this.query,ordering:this.getOrderingAsString(),playable:"true",tag:this.tags};d["a"].default.debug("Fetching albums"),o.a.get(e,{params:a,paramsSerializer:function(t){return n.a.stringify(t,{indices:!1})}}).then((function(e){t.result=e.data,t.isLoading=!1}),(function(e){t.result=null,t.isLoading=!1}))},selectPage:function(t){this.page=t},updatePage:function(){this.page=this.defaultPage}},watch:{page:function(){this.updateQueryString(),this.fetchData()},"$store.state.moderation.lastUpdate":function(){this.fetchData()}}},y=_,C=a("2877"),k=Object(C["a"])(y,s,i,!1,null,null,null);e["default"]=k.exports}}]);